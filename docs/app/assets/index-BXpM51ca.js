const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AdminPanel-mEpuBlS8.js","assets/charts-vendor-OydaLZmL.js","assets/react-vendor-C0Dkio3Y.js","assets/icons-vendor-e87K8PwW.js","assets/pdf-vendor-CtlUXWgY.js"])))=>i.map(i=>d[i]);
import{r as la,a as da,g as ca}from"./react-vendor-C0Dkio3Y.js";import{r as l,R as et,P as ma,a as xa,C as us,T as tt,L as bs,B as ot,b as it,X as nt,Y as lt,c as He,d as pa}from"./charts-vendor-OydaLZmL.js";import{h as St,E as $t,a as ga}from"./pdf-vendor-CtlUXWgY.js";import{U as ts,D as De,P as Dt,F as ss,a as as,T as Ct,X as kt,b as Yt,c as ha,d as Jt,e as Rt,f as st,L as Wt,g as ua,E as ba,h as fa,C as va,i as ya,j as ja,H as Na,B as dt,k as Qt,l as ht,A as wa,m as ct,n as Da,M as Ra,o as Sa,p as Mt,q as $a,r as Xt,s as Zt,S as Ca}from"./icons-vendor-e87K8PwW.js";(function(){const y=document.createElement("link").relList;if(y&&y.supports&&y.supports("modulepreload"))return;for(const D of document.querySelectorAll('link[rel="modulepreload"]'))ve(D);new MutationObserver(D=>{for(const M of D)if(M.type==="childList")for(const W of M.addedNodes)W.tagName==="LINK"&&W.rel==="modulepreload"&&ve(W)}).observe(document,{childList:!0,subtree:!0});function S(D){const M={};return D.integrity&&(M.integrity=D.integrity),D.referrerPolicy&&(M.referrerPolicy=D.referrerPolicy),D.crossOrigin==="use-credentials"?M.credentials="include":D.crossOrigin==="anonymous"?M.credentials="omit":M.credentials="same-origin",M}function ve(D){if(D.ep)return;D.ep=!0;const M=S(D);fetch(D.href,M)}})();var es={exports:{}},Bt={};var fs;function ka(){if(fs)return Bt;fs=1;var w=la(),y=Symbol.for("react.element"),S=Symbol.for("react.fragment"),ve=Object.prototype.hasOwnProperty,D=w.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,M={key:!0,ref:!0,__self:!0,__source:!0};function W(ne,b,I){var P,me={},xe=null,$e=null;I!==void 0&&(xe=""+I),b.key!==void 0&&(xe=""+b.key),b.ref!==void 0&&($e=b.ref);for(P in b)ve.call(b,P)&&!M.hasOwnProperty(P)&&(me[P]=b[P]);if(ne&&ne.defaultProps)for(P in b=ne.defaultProps,b)me[P]===void 0&&(me[P]=b[P]);return{$$typeof:y,type:ne,key:xe,ref:$e,props:me,_owner:D.current}}return Bt.Fragment=S,Bt.jsx=W,Bt.jsxs=W,Bt}var vs;function Fa(){return vs||(vs=1,es.exports=ka()),es.exports}var e=Fa(),_t={},ys;function Ta(){if(ys)return _t;ys=1;var w=da();return _t.createRoot=w.createRoot,_t.hydrateRoot=w.hydrateRoot,_t}var Pa=Ta();const Ea=ca(Pa),La=typeof window<"u"&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"),ae=La?"http://localhost:8001/api":"/api",Aa=()=>{const[w,y]=l.useState([]),[S,ve]=l.useState(new Set),[D,M]=l.useState(!1),[W,ne]=l.useState(null),[b,I]=l.useState({name:"",email:"",phone:"",address:"",documentType:"cpf",cpf:"",cnpj:""}),[P,me]=l.useState({}),[xe,$e]=l.useState(!1),pe=l.useRef(null),[de,U]=l.useState(!1),[k,O]=l.useState(!0),[ye,Ue]=l.useState(!0),[ge,re]=l.useState({field:null,direction:"asc"}),[$,he]=l.useState({name:"",email:"",phone:""});l.useEffect(()=>{(async()=>{try{const z=await(await fetch(`${ae}/clients`)).json();z.success&&y(z.data)}catch{}})()},[]),l.useEffect(()=>{const o=document?.body;if(o)return xe||D?o.classList.add("modal-open"):o.classList.remove("modal-open"),()=>{o.classList.remove("modal-open")}},[xe,D]);const Te=o=>{let h="asc";ge.field===o&&ge.direction==="asc"&&(h="desc"),re({field:o,direction:h})},Pe=o=>ge.field!==o?e.jsx("span",{className:"text-gray-400",children:"‚Üï"}):ge.direction==="asc"?e.jsx("span",{className:"text-amber-600",children:"‚Üë"}):e.jsx("span",{className:"text-amber-600",children:"‚Üì"}),Ee=l.useMemo(()=>{let o=[...w];return $.name&&(o=o.filter(h=>h.name.toLowerCase().includes($.name.toLowerCase()))),$.email&&(o=o.filter(h=>h.email.toLowerCase().includes($.email.toLowerCase()))),$.phone&&(o=o.filter(h=>h.phone.includes($.phone))),ge.field&&o.sort((h,z)=>{let i=h[ge.field],f=z[ge.field];return typeof i=="string"&&(i=i.toLowerCase(),f=String(f).toLowerCase()),i<f?ge.direction==="asc"?-1:1:i>f?ge.direction==="asc"?1:-1:0}),o},[w,$,ge]),Z=()=>{S.size===w.length?ve(new Set):ve(new Set(w.map(o=>o.id)))},Oe=o=>{ve(h=>{const z=new Set(h);return z.has(o)?z.delete(o):z.add(o),z})},_e=()=>he({name:"",email:"",phone:""}),Le=()=>{const o={};return b.name.trim()||(o.name="Campo obrigat√≥rio"),b.email.trim()||(o.email="Campo obrigat√≥rio"),b.phone.trim()||(o.phone="Campo obrigat√≥rio"),b.address.trim()||(o.address="Campo obrigat√≥rio"),b.documentType==="cpf"&&!b.cpf.trim()?o.cpf="Campo obrigat√≥rio":b.documentType==="cnpj"&&!b.cnpj.trim()&&(o.cnpj="Campo obrigat√≥rio"),me(o),Object.keys(o).length===0},E=async()=>{if(!Le())return;const o={id:W?.id,name:b.name,email:b.email,phone:b.phone,address:b.address,cpf:b.cpf||void 0,cnpj:b.cnpj||void 0};try{if(W){const z=await(await fetch(`${ae}/clients/${W.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).json();z.success&&y(i=>i.map(f=>f.id===W.id?z.data:f))}else{const z=await(await fetch(`${ae}/clients`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).json();z.success&&y(i=>[z.data,...i])}M(!1),ne(null),I({name:"",email:"",phone:"",address:"",documentType:"cpf",cpf:"",cnpj:""}),me({})}catch(h){console.error("Erro ao salvar:",h)}},Ce=async o=>{try{(await(await fetch(`${ae}/clients/${o}`,{method:"DELETE"})).json()).success&&y(i=>i.filter(f=>f.id!==o))}catch{}},ze=async()=>{try{const o=Array.from(S);await fetch(`${ae}/clients`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:o})}),y(h=>h.filter(z=>!S.has(z.id))),ve(new Set)}catch{}},ke=()=>{window.open(`${ae}/modelo/clients`,"_blank")},Ie=async o=>{const h=o.target.files?.[0];if(!h)return;const z=new FormData;z.append("file",h),z.append("type","clients");try{const f=await(await fetch(`${ae}/import`,{method:"POST",body:z})).json();f.success&&(y(L=>[...f.data,...L]),$e(!1))}catch{}},Je=async()=>{try{const h=await(await fetch(`${ae}/export`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"clients",data:w})})).blob(),z=URL.createObjectURL(h),i=document.createElement("a");i.href=z,i.download=`clients_${new Date().toISOString().split("T")[0]}.xlsx`,i.click(),URL.revokeObjectURL(z)}catch{}},Ke=async()=>{try{U(!1);const o=k?Ee:w;if(o.length===0){alert("N√£o h√° clientes para exportar!");return}let h=o.length,z=0,i=0,f=0,L=0,le=0,Re=0,ue=0,Fe=0;ye&&o.forEach(Q=>{Q.cpf&&z++,Q.cnpj&&i++,Q.email&&Q.email.trim()?f++:L++,Q.phone&&Q.phone.trim()?le++:Re++,Q.address&&Q.address.trim()?ue++:Fe++});const ee=document.createElement("div");ee.style.position="absolute",ee.style.left="-9999px",ee.style.top="-9999px",ee.style.width="800px",ee.style.backgroundColor="white",ee.style.padding="20px",ee.style.fontFamily="Arial, sans-serif";let F="Todos os clientes";if(k){const Q=[];$.name&&Q.push(`Nome: ${$.name}`),$.email&&Q.push(`Email: ${$.email}`),$.phone&&Q.push(`Telefone: ${$.phone}`),Q.length>0?F=`Clientes filtrados: ${Q.join(", ")}`:F="Todos os clientes (sem filtros ativos)"}let J=`
        <div style="text-align: center; margin-bottom: 30px;">
          <h1 style="color: #f59e0b; font-size: 28px; margin: 0; font-weight: bold;">ALYA VELAS</h1>
          <h2 style="color: #374151; font-size: 24px; margin: 10px 0; font-weight: bold;">Relat√≥rio de Clientes</h2>
          <p style="color: #6b7280; font-size: 14px; margin: 5px 0;">${F}</p>
          <p style="color: #6b7280; font-size: 14px; margin: 0;">Gerado em ${new Date().toLocaleDateString("pt-BR")} √†s ${new Date().toLocaleTimeString("pt-BR")}</p>
        </div>
      `;ye&&(J+=`
          <div style="margin-bottom: 30px;">
            <h3 style="color: #f59e0b; font-size: 20px; margin-bottom: 15px; border-bottom: 2px solid #f59e0b; padding-bottom: 5px;">üìä Resumo Estat√≠stico</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
              <div style="background: #fffbeb; padding: 15px; border-radius: 8px; border-left: 4px solid #f59e0b;">
                <div style="font-weight: bold; color: #f59e0b; margin-bottom: 5px;">Total de Clientes</div>
                <div style="font-size: 18px; font-weight: bold; color: #d97706;">${h}</div>
              </div>
              <div style="background: #eff6ff; padding: 15px; border-radius: 8px; border-left: 4px solid #3b82f6;">
                <div style="font-weight: bold; color: #3b82f6; margin-bottom: 5px;">Clientes com CPF</div>
                <div style="font-size: 18px; font-weight: bold; color: #2563eb;">${z}</div>
              </div>
              <div style="background: #f0fdf4; padding: 15px; border-radius: 8px; border-left: 4px solid #10b981;">
                <div style="font-weight: bold; color: #10b981; margin-bottom: 5px;">Clientes com CNPJ</div>
                <div style="font-size: 18px; font-weight: bold; color: #059669;">${i}</div>
              </div>
              <div style="background: #f0fdf4; padding: 15px; border-radius: 8px; border-left: 4px solid #10b981;">
                <div style="font-weight: bold; color: #10b981; margin-bottom: 5px;">Com Email</div>
                <div style="font-size: 18px; font-weight: bold; color: #059669;">${f}</div>
              </div>
              <div style="background: #fef2f2; padding: 15px; border-radius: 8px; border-left: 4px solid #ef4444;">
                <div style="font-weight: bold; color: #ef4444; margin-bottom: 5px;">Sem Email</div>
                <div style="font-size: 18px; font-weight: bold; color: #dc2626;">${L}</div>
              </div>
              <div style="background: #f0fdf4; padding: 15px; border-radius: 8px; border-left: 4px solid #10b981;">
                <div style="font-weight: bold; color: #10b981; margin-bottom: 5px;">Com Telefone</div>
                <div style="font-size: 18px; font-weight: bold; color: #059669;">${le}</div>
              </div>
              <div style="background: #fef2f2; padding: 15px; border-radius: 8px; border-left: 4px solid #ef4444;">
                <div style="font-weight: bold; color: #ef4444; margin-bottom: 5px;">Sem Telefone</div>
                <div style="font-size: 18px; font-weight: bold; color: #dc2626;">${Re}</div>
              </div>
              <div style="background: #f0fdf4; padding: 15px; border-radius: 8px; border-left: 4px solid #10b981;">
                <div style="font-weight: bold; color: #10b981; margin-bottom: 5px;">Com Endere√ßo</div>
                <div style="font-size: 18px; font-weight: bold; color: #059669;">${ue}</div>
              </div>
            </div>
          </div>
        `),J+=`
        <div style="margin-bottom: 30px;">
          <h3 style="color: #f59e0b; font-size: 20px; margin-bottom: 15px; border-bottom: 2px solid #f59e0b; padding-bottom: 5px;">üë• Lista de Clientes</h3>
          <div style="overflow-x: auto;">
            <table style="width: 100%; border-collapse: collapse; background: white;">
              <thead>
                <tr style="background: linear-gradient(to right, #fef3c7, #fed7aa); border-bottom: 2px solid #f59e0b;">
                  <th style="padding: 12px; text-align: left; font-weight: bold; color: #92400e; border-right: 1px solid #fbbf24;">Nome</th>
                  <th style="padding: 12px; text-align: left; font-weight: bold; color: #92400e; border-right: 1px solid #fbbf24;">CPF/CNPJ</th>
                  <th style="padding: 12px; text-align: left; font-weight: bold; color: #92400e; border-right: 1px solid #fbbf24;">Email</th>
                  <th style="padding: 12px; text-align: left; font-weight: bold; color: #92400e; border-right: 1px solid #fbbf24;">Telefone</th>
                  <th style="padding: 12px; text-align: left; font-weight: bold; color: #92400e;">Endere√ßo</th>
                </tr>
              </thead>
              <tbody>
      `,o.forEach((Q,Me)=>{const Qe=Q.cpf||Q.cnpj||"-",ft=Me%2===0?"#ffffff":"#f9fafb";J+=`
          <tr style="background: ${ft}; border-bottom: 1px solid #e5e7eb;">
            <td style="padding: 10px; color: #374151; font-weight: 500;">${Q.name}</td>
            <td style="padding: 10px; color: #6b7280;">${Qe}</td>
            <td style="padding: 10px; color: #374151;">${Q.email}</td>
            <td style="padding: 10px; color: #374151;">${Q.phone}</td>
            <td style="padding: 10px; color: #6b7280;">${Q.address}</td>
          </tr>
        `}),J+=`
              </tbody>
            </table>
          </div>
        </div>
      `,J+=`
        <div style="text-align: center; margin-top: 40px; padding-top: 20px; border-top: 2px solid #e2e8f0;">
          <p style="color: #6b7280; font-size: 12px; margin: 0;">
            Relat√≥rio gerado automaticamente pelo sistema Alya Velas<br>
            Dados baseados em clientes ${k?"filtrados":"completos"}<br>
            Para mais informa√ß√µes, acesse o painel administrativo
          </p>
        </div>
      `,ee.innerHTML=J,document.body.appendChild(ee);const se=await St(ee,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"});document.body.removeChild(ee);const Ae=se.toDataURL("image/png"),ut=new $t("p","mm","a4"),We=210,Ye=295,bt=se.height*We/se.width;let Ge=bt,Ft=0;for(ut.addImage(Ae,"PNG",0,Ft,We,bt),Ge-=Ye;Ge>=0;)Ft=Ge-bt,ut.addPage(),ut.addImage(Ae,"PNG",0,Ft,We,bt),Ge-=Ye;const Y=`Clientes_${k?"Filtrados":"Completos"}_${new Date().toISOString().split("T")[0]}.pdf`;ut.save(Y),alert(`‚úÖ Relat√≥rio PDF exportado com sucesso!
Arquivo: ${Y}

üìä Dados inclu√≠dos:
‚Ä¢ Total de clientes: ${h}${ye?`
‚Ä¢ Clientes com CPF: ${z}
‚Ä¢ Clientes com CNPJ: ${i}
‚Ä¢ Clientes com email: ${f}
‚Ä¢ Clientes com telefone: ${le}
‚Ä¢ Clientes com endere√ßo: ${ue}`:""}`)}catch(o){console.error("Erro ao exportar PDF:",o),alert("‚ùå Erro ao exportar PDF. Tente novamente.")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[e.jsx(ts,{className:"w-8 h-8 text-amber-600"}),"Clientes"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>U(!0),className:"flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-amber-500 to-orange-600 text-white font-semibold rounded-xl hover:from-amber-600 hover:to-orange-700 shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300",children:[e.jsx(De,{className:"h-5 w-5"}),"Exportar PDF"]}),e.jsxs("button",{onClick:()=>$e(!0),className:"flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-amber-500 to-orange-600 text-white font-semibold rounded-xl hover:from-amber-600 hover:to-orange-700 shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300",children:[e.jsx(De,{className:"h-5 w-5"}),"Importar/Exportar"]}),e.jsxs("button",{onClick:()=>{ne(null),I({name:"",email:"",phone:"",address:"",documentType:"cpf",cpf:"",cnpj:""}),me({}),M(!0)},className:"flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-amber-500 to-orange-600 text-white font-semibold rounded-xl hover:from-amber-600 hover:to-orange-700 shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300",children:[e.jsx(Dt,{className:"h-5 w-5"}),"Novo Cliente"]})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 p-4 rounded-lg border border-amber-200 shadow-sm",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-4 lg:gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ss,{className:"w-5 h-5 text-amber-600"}),e.jsx("h2",{className:"text-lg font-bold text-gray-800 uppercase tracking-wide",children:"Filtre seus itens:"})]}),e.jsxs("div",{className:"flex items-end gap-1 sm:gap-2 md:gap-3 lg:gap-4 flex-1",children:[e.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[e.jsx("label",{className:"text-xs sm:text-sm font-semibold text-gray-700 mb-1 truncate",children:"Nome"}),e.jsx("input",{type:"text",placeholder:"Nome...",value:$.name,onChange:o=>he(h=>({...h,name:o.target.value})),className:"px-1 sm:px-2 md:px-3 py-1 sm:py-2 border border-amber-300 rounded-md text-xs sm:text-sm focus:ring-2 focus:ring-amber-500 focus:border-amber-500 bg-white w-full"})]}),e.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[e.jsx("label",{className:"text-xs sm:text-sm font-semibold text-gray-700 mb-1 truncate",children:"Email"}),e.jsx("input",{type:"text",placeholder:"Email...",value:$.email,onChange:o=>he(h=>({...h,email:o.target.value})),className:"px-1 sm:px-2 md:px-3 py-1 sm:py-2 border border-amber-300 rounded-md text-xs sm:text-sm focus:ring-2 focus:ring-amber-500 focus:border-amber-500 bg-white w-full"})]}),e.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[e.jsx("label",{className:"text-xs sm:text-sm font-semibold text-gray-700 mb-1 truncate",children:"Telefone"}),e.jsx("input",{type:"text",placeholder:"Telefone...",value:$.phone,onChange:o=>he(h=>({...h,phone:o.target.value})),className:"px-1 sm:px-2 md:px-3 py-1 sm:py-2 border border-amber-300 rounded-md text-xs sm:text-sm focus:ring-2 focus:ring-amber-500 focus:border-amber-500 bg-white w-full"})]})]}),e.jsx("div",{className:"lg:ml-auto",children:e.jsx("button",{onClick:_e,className:"px-2 sm:px-3 md:px-4 py-1 sm:py-2 bg-amber-600 text-white rounded-md text-xs sm:text-sm hover:bg-amber-700 transition-colors w-full lg:w-auto",children:"Limpar Filtros"})})]})}),e.jsx("div",{className:"space-y-4",children:w.length===0?e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-8 text-center",children:[e.jsx("p",{className:"text-gray-600",children:"Nenhum cliente encontrado."}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:'Adicione seu primeiro cliente clicando no bot√£o "Novo Cliente".'})]}):e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden overflow-x-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-100 border-b border-amber-200 p-4 min-w-max",children:e.jsxs("div",{className:"flex items-center gap-0.5 sm:gap-1 md:gap-2 lg:gap-3 min-w-[800px]",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("input",{type:"checkbox",checked:w.length>0&&S.size===w.length,onChange:Z,className:"w-4 h-4 text-amber-600 bg-gray-100 border-gray-300 rounded focus:ring-amber-500 focus:ring-2"})}),e.jsxs("button",{onClick:()=>Te("name"),className:"flex items-center justify-center gap-1 hover:bg-amber-100 rounded px-1 sm:px-2 py-1 transition-colors flex-shrink-0 w-52 sm:w-60",children:[e.jsx("p",{className:"text-xs sm:text-sm font-bold text-amber-800 uppercase tracking-wide truncate",children:"Nome"}),Pe("name")]}),e.jsxs("button",{onClick:()=>Te("email"),className:"flex items-center justify-center gap-1 hover:bg-amber-100 rounded px-1 sm:px-2 py-1 transition-colors flex-shrink-0 w-36 sm:w-44",children:[e.jsx("p",{className:"text-xs sm:text-sm font-bold text-amber-800 uppercase tracking-wide truncate",children:"Email"}),Pe("email")]}),e.jsxs("button",{onClick:()=>Te("phone"),className:"flex items-center justify-center gap-1 hover:bg-amber-100 rounded px-1 sm:px-2 py-1 transition-colors flex-shrink-0 w-28 sm:w-32",children:[e.jsx("p",{className:"text-xs sm:text-sm font-bold text-amber-800 uppercase tracking-wide truncate",children:"Telefone"}),Pe("phone")]}),e.jsxs("button",{onClick:()=>Te("address"),className:"flex items-center justify-center gap-1 hover:bg-amber-100 rounded px-1 sm:px-2 py-1 transition-colors flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-bold text-amber-800 uppercase tracking-wide truncate",children:"Endere√ßo"}),Pe("address")]}),e.jsx("div",{className:"flex-shrink-0 w-16 sm:w-20 flex justify-center",children:e.jsx("p",{className:"text-xs sm:text-sm font-bold text-amber-800 uppercase tracking-wide",children:"A√ß√µes"})})]})}),Ee.map((o,h)=>e.jsx("div",{className:`bg-white border-b border-gray-100 p-4 hover:bg-amber-50/30 transition-all duration-200 ${h===w.length-1?"border-b-0":""}`,children:e.jsxs("div",{className:"flex items-center gap-0.5 sm:gap-1 md:gap-2 lg:gap-3 min-w-[800px]",children:[e.jsx("div",{className:"flex-shrink-0 text-left",children:e.jsx("input",{type:"checkbox",checked:S.has(o.id),onChange:()=>Oe(o.id),className:"w-3 h-3 sm:w-4 sm:h-4 text-amber-600 bg-gray-100 border-gray-300 rounded focus:ring-amber-500 focus:ring-2"})}),e.jsxs("div",{className:"flex-shrink-0 w-52 sm:w-60 text-left",children:[e.jsx("h3",{className:"text-xs sm:text-sm font-semibold text-gray-900 truncate",children:o.name}),(o.cpf||o.cnpj)&&e.jsx("p",{className:"text-xs text-gray-500 truncate",children:o.cpf||o.cnpj})]}),e.jsx("div",{className:"flex-shrink-0 w-36 sm:w-44 text-center",children:e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 truncate",children:o.email})}),e.jsx("div",{className:"flex-shrink-0 w-28 sm:w-32 text-center",children:e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 truncate",children:o.phone})}),e.jsx("div",{className:"flex-1 min-w-0 text-left",children:e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 truncate",children:o.address})}),e.jsxs("div",{className:"flex-shrink-0 w-16 sm:w-20 flex gap-0.5 sm:gap-1 justify-center",children:[e.jsx("button",{onClick:()=>{ne(o),I({name:o.name,email:o.email,phone:o.phone,address:o.address,documentType:o.cpf?"cpf":"cnpj",cpf:o.cpf||"",cnpj:o.cnpj||""}),M(!0)},className:"p-0.5 sm:p-1 text-amber-600 hover:text-amber-800 hover:bg-amber-50 rounded-full transition-all duration-200",title:"Editar cliente",children:e.jsx(as,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3"})}),e.jsx("button",{onClick:()=>Ce(o.id),className:"p-0.5 sm:p-1 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-full transition-all duration-200",title:"Excluir cliente",children:e.jsx(Ct,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3"})})]})]})},o.id)),S.size>0&&e.jsx("div",{className:"flex justify-end p-4 bg-red-50 border-t border-red-200",children:e.jsxs("button",{onClick:ze,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:[e.jsx(Ct,{className:"h-4 w-4"}),"Deletar Selecionado",S.size>1?"s":""," (",S.size,")"]})})]})}),D&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[10000] p-4",onClick:o=>{o.target===o.currentTarget&&(M(!1),ne(null),me({}))},children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md shadow-2xl border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:W?"Editar Cliente":"Novo Cliente"}),e.jsx("button",{onClick:()=>{M(!1),ne(null),me({})},className:"text-gray-500 hover:text-gray-700",children:e.jsx(kt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:["Nome ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:b.name,onChange:o=>I(h=>({...h,name:o.target.value})),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 ${P.name?"border-red-500 bg-red-50":""}`}),P.name&&e.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-red-500 text-white text-xs px-2 py-1 rounded shadow-lg z-10",children:[P.name,e.jsx("div",{className:"absolute -top-1 left-2 w-2 h-2 bg-red-500 transform rotate-45"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",value:b.email,onChange:o=>I(h=>({...h,email:o.target.value})),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 ${P.email?"border-red-500 bg-red-50":""}`}),P.email&&e.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-red-500 text-white text-xs px-2 py-1 rounded shadow-lg z-10",children:[P.email,e.jsx("div",{className:"absolute -top-1 left-2 w-2 h-2 bg-red-500 transform rotate-45"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:["Telefone ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:b.phone,onChange:o=>I(h=>({...h,phone:o.target.value})),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 ${P.phone?"border-red-500 bg-red-50":""}`}),P.phone&&e.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-red-500 text-white text-xs px-2 py-1 rounded shadow-lg z-10",children:[P.phone,e.jsx("div",{className:"absolute -top-1 left-2 w-2 h-2 bg-red-500 transform rotate-45"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:["Endere√ßo ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:b.address,onChange:o=>I(h=>({...h,address:o.target.value})),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 ${P.address?"border-red-500 bg-red-50":""}`}),P.address&&e.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-red-500 text-white text-xs px-2 py-1 rounded shadow-lg z-10",children:[P.address,e.jsx("div",{className:"absolute -top-1 left-2 w-2 h-2 bg-red-500 transform rotate-45"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:["Tipo de Documento ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:b.documentType,onChange:o=>I(h=>({...h,documentType:o.target.value,cpf:"",cnpj:""})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"cpf",children:"CPF (Pessoa F√≠sica)"}),e.jsx("option",{value:"cnpj",children:"CNPJ (Pessoa Jur√≠dica)"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[b.documentType==="cpf"?"CPF":"CNPJ"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:b.documentType==="cpf"?b.cpf:b.cnpj,onChange:o=>I(h=>({...h,[b.documentType]:o.target.value})),placeholder:b.documentType==="cpf"?"000.000.000-00":"00.000.000/0000-00",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 ${b.documentType==="cpf"&&P.cpf||b.documentType==="cnpj"&&P.cnpj?"border-red-500 bg-red-50":""}`}),(b.documentType==="cpf"&&P.cpf||b.documentType==="cnpj"&&P.cnpj)&&e.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-red-500 text-white text-xs px-2 py-1 rounded shadow-lg z-10",children:[b.documentType==="cpf"?P.cpf:P.cnpj,e.jsx("div",{className:"absolute -top-1 left-2 w-2 h-2 bg-red-500 transform rotate-45"})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{M(!1),ne(null),me({})},className:"px-4 py-2 rounded-lg bg-gray-100 hover:bg-gray-200 text-gray-700",children:"Cancelar"}),e.jsx("button",{onClick:E,className:"px-4 py-2 rounded-lg bg-amber-600 hover:bg-amber-700 text-white font-semibold",children:"Salvar"})]})]})}),xe&&e.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",onClick:o=>{o.target===o.currentTarget&&$e(!1)},children:e.jsxs("div",{className:"relative bg-white rounded-2xl w-full max-w-md shadow-2xl border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-3 bg-gradient-to-b from-amber-50 to-white border-b",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Yt,{className:"w-5 h-5 text-amber-700"}),e.jsx("h2",{className:"text-xl font-extrabold text-gray-800",children:"Importar/Exportar Clientes"})]}),e.jsx("button",{onClick:()=>$e(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(kt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"px-5 py-5",children:[e.jsx("p",{className:"text-center text-sm text-gray-700 mb-5",children:"Escolha uma das op√ß√µes abaixo para gerenciar seus dados:"}),e.jsxs("div",{className:"rounded-xl border border-amber-200 bg-amber-50 p-5 mb-6 text-center",children:[e.jsx("p",{className:"font-bold text-amber-800 mb-1",children:"Primeiro baixe o modelo, depois importe!"}),e.jsx("p",{className:"text-amber-700 text-sm",children:"Baixe o arquivo modelo, preencha com seus dados e depois fa√ßa o upload."}),e.jsxs("button",{onClick:ke,className:"mt-4 inline-flex items-center justify-center gap-2 px-5 py-3 rounded-lg bg-amber-600 hover:bg-amber-700 text-white font-semibold shadow mx-auto",children:[e.jsx(De,{className:"w-4 h-4"})," Baixar Modelo de Clientes"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"block w-full rounded-2xl bg-gradient-to-r from-amber-500 to-orange-600 text-white cursor-pointer shadow hover:shadow-md transition-shadow text-center",children:[e.jsxs("div",{className:"px-3 py-3 flex items-center justify-center gap-2",children:[e.jsx(Yt,{className:"w-4 h-4 opacity-90"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-bold leading-tight",children:"Selecionar Arquivo"}),e.jsx("p",{className:"text-white/90 text-xs",children:"Carregar arquivo .xlsx"})]})]}),e.jsx("input",{ref:pe,type:"file",accept:".xlsx",className:"hidden",onChange:Ie})]}),e.jsx("button",{onClick:Je,className:"w-full rounded-2xl bg-gradient-to-r from-amber-500 to-orange-600 text-white px-3 py-3 text-center shadow hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(De,{className:"w-4 h-4 opacity-90"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-bold leading-tight",children:"Exportar"}),e.jsx("p",{className:"text-white/90 text-xs",children:"Salvar dados em arquivo"})]})]})})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>$e(!1),className:"w-full px-6 py-4 rounded-xl bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold",children:"Cancelar"})})]})]})}),de&&e.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-amber-900/50 to-orange-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:o=>{o.target===o.currentTarget&&U(!1)},children:e.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-2xl p-6 w-full max-w-md shadow-2xl border border-gray-200/50",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 -mx-6 -mt-6 mb-6 px-6 py-4 border-b border-amber-200/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-bold text-amber-800 flex items-center gap-2",children:[e.jsx(De,{className:"w-6 h-6 text-amber-700"}),"Exportar Clientes em PDF"]}),e.jsx("button",{onClick:()=>U(!1),className:"text-amber-600 hover:text-amber-800 hover:bg-amber-100 p-2 rounded-full transition-all",children:e.jsx(kt,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("p",{className:"text-gray-700 text-sm",children:"Configure as op√ß√µes de exporta√ß√£o:"}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-amber-50 rounded-xl border border-amber-200",children:[e.jsx("input",{type:"checkbox",id:"exportarFiltrados",checked:k,onChange:o=>O(o.target.checked),className:"mt-1 w-5 h-5 text-amber-600 bg-gray-100 border-gray-300 rounded focus:ring-amber-500 focus:ring-2"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"exportarFiltrados",className:"font-semibold text-gray-800 cursor-pointer block mb-1",children:"Exportar apenas clientes filtrados"}),e.jsx("p",{className:"text-sm text-gray-600",children:k?"Ser√£o exportados apenas os clientes que est√£o vis√≠veis na lista (com filtros aplicados).":"Todos os clientes ser√£o exportados, independente dos filtros ativos."})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-amber-50 rounded-xl border border-amber-200",children:[e.jsx("input",{type:"checkbox",id:"incluirResumo",checked:ye,onChange:o=>Ue(o.target.checked),className:"mt-1 w-5 h-5 text-amber-600 bg-gray-100 border-gray-300 rounded focus:ring-amber-500 focus:ring-2"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"incluirResumo",className:"font-semibold text-gray-800 cursor-pointer block mb-1",children:"Incluir resumo estat√≠stico"}),e.jsx("p",{className:"text-sm text-gray-600",children:ye?"O PDF incluir√° um resumo com totais de clientes, distribui√ß√£o por tipo de documento (CPF/CNPJ) e estat√≠sticas de dados completos.":"Apenas a tabela de clientes ser√° inclu√≠da no PDF."})]})]}),($.name||$.email||$.phone)&&k&&e.jsxs("div",{className:"p-4 bg-blue-50 rounded-xl border border-blue-200",children:[e.jsx("p",{className:"text-sm font-semibold text-blue-800 mb-2",children:"Filtros ativos:"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[$.name&&e.jsxs("li",{children:["‚Ä¢ Nome: ",$.name]}),$.email&&e.jsxs("li",{children:["‚Ä¢ Email: ",$.email]}),$.phone&&e.jsxs("li",{children:["‚Ä¢ Telefone: ",$.phone]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>U(!1),className:"flex-1 py-2 px-4 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-all font-medium",children:"Cancelar"}),e.jsx("button",{onClick:Ke,className:"flex-1 py-2 px-4 bg-gradient-to-r from-amber-500 to-orange-600 text-white font-semibold rounded-lg hover:from-amber-600 hover:to-orange-700 transition-all shadow-lg hover:shadow-xl",children:"Exportar PDF"})]})]})]})})]})},js=l.createContext(void 0),Gt=()=>{const w=l.useContext(js);if(w===void 0)throw new Error("useAuth deve ser usado dentro de um AuthProvider");return w},Ma=({children:w})=>{const[y,S]=l.useState(null),[ve,D]=l.useState(null),[M,W]=l.useState(!0),ne=typeof window<"u"&&(window.location.hostname.includes("github.io")||window.location.hostname.includes("demo")||window.location.hostname.includes("demo.")),b=()=>ne?sessionStorage:localStorage;l.useEffect(()=>{const de=b().getItem("authToken");de?I(de):W(!1)},[]);const I=async pe=>{try{const de=await fetch(`${ae}/auth/verify`,{method:"POST",headers:{Authorization:`Bearer ${pe}`,"Content-Type":"application/json"}});if(de.ok){const U=await de.json();S(U.user),D(pe)}else b().removeItem("authToken"),S(null),D(null)}catch(de){console.error("Erro ao verificar token:",de),b().removeItem("authToken"),S(null),D(null)}finally{W(!1)}},$e={user:y,token:ve,login:async(pe,de)=>{try{if(typeof window<"u"&&"serviceWorker"in navigator&&(window.location.hostname.includes("github.io")||window.location.hostname==="alya.fercarvalho.com"||window.location.hostname.includes("demo")))try{await navigator.serviceWorker.ready,console.log("[AuthContext] Service Worker est√° pronto")}catch(O){console.warn("[AuthContext] Service Worker n√£o est√° pronto:",O)}console.log("[AuthContext] Tentando login:",{username:pe,apiUrl:`${ae}/auth/login`});const U=await fetch(`${ae}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:pe,password:de})});if(console.log("[AuthContext] Resposta recebida:",{ok:U.ok,status:U.status}),U.ok){const k=await U.json();console.log("[AuthContext] Dados recebidos:",{success:k.success,hasUser:!!k.user,hasToken:!!k.token});const O=b();return k.firstLogin&&k.newPassword?(O.setItem("authToken",k.token),O.setItem("pendingFirstLogin","true"),{success:!0,firstLogin:!0,newPassword:k.newPassword}):k.success&&k.user&&k.token?(S(k.user),D(k.token),O.setItem("authToken",k.token),O.removeItem("pendingFirstLogin"),{success:!0,firstLogin:!1}):(console.error("[AuthContext] Resposta inv√°lida:",k),{success:!1})}else{let k;try{k=await U.json()}catch{k={error:`Erro HTTP ${U.status}`}}return console.error("[AuthContext] Erro no login:",k),{success:!1}}}catch(U){return console.error("[AuthContext] Erro ao fazer login:",U),{success:!1}}},logout:()=>{S(null),D(null);const pe=b();pe.removeItem("authToken"),pe.removeItem("pendingFirstLogin")},isLoading:M,completeFirstLogin:async()=>{const pe=b(),de=pe.getItem("authToken");de&&(await I(de),pe.removeItem("pendingFirstLogin"))}};return e.jsx(js.Provider,{value:$e,children:w})},Ba=()=>{const{token:w,logout:y}=Gt(),[S,ve]=l.useState([]),[D,M]=l.useState("mensal"),[W,ne]=l.useState(new Date().getMonth()),[b,I]=l.useState(new Date().getFullYear()),[P,me]=l.useState(!0),xe=l.useRef(null);l.useEffect(()=>{$e()},[]);const $e=async()=>{try{me(!0);const i={"Content-Type":"application/json"};w&&(i.Authorization=`Bearer ${w}`);const f=await fetch(`${ae}/transactions`,{headers:i}),L=await f.json();if(f.status===401||f.status===403){y();return}L.success&&ve(L.data)}catch(i){console.error("Erro ao buscar transa√ß√µes:",i)}finally{me(!1)}},pe=(i,f,L)=>{if(i==="mensal")return f===0?{month:11,year:L-1}:{month:f-1,year:L};if(i==="trimestral"){const le=Math.floor(f/3)*3;return le===0?{month:9,year:L-1}:{month:le-3,year:L}}else return{month:0,year:L-1}},de=(i,f,L)=>{const le=new Date(f,i,1);let Re;return L==="mensal"?Re=new Date(f,i+1,0):L==="trimestral"?Re=new Date(f,i+3,0):Re=new Date(f,11,31),S.filter(ue=>{const Fe=new Date(ue.date);return Fe>=le&&Fe<=Re})},U=l.useMemo(()=>de(W,b,D),[S,D,W,b]),k=l.useMemo(()=>pe(D,W,b),[D,W,b]),O=l.useMemo(()=>de(k.month,k.year,D),[S,D,k.month,k.year]),ye=i=>{const f=i.filter(J=>J.type==="Receita"),L=i.filter(J=>J.type==="Despesa"),le=f.reduce((J,se)=>J+se.value,0),Re=L.reduce((J,se)=>J+se.value,0),ue=le-Re,Fe=f.reduce((J,se)=>{const Ae=se.category&&se.category.trim()?se.category:"Outros";return J[Ae]||(J[Ae]=0),J[Ae]+=se.value,J},{}),ee=L.reduce((J,se)=>{const Ae=se.category&&se.category.trim()?se.category:"Outros";return J[Ae]||(J[Ae]=0),J[Ae]+=se.value,J},{}),F=[{id:"receitas",description:"RECEITAS OPERACIONAIS",value:le,type:"total",level:0}];return Object.entries(Fe).forEach(([J,se])=>{F.push({id:`receita-${J}`,description:J,value:se,type:"receita",level:1,parent:"receitas"})}),F.push({id:"despesas",description:"DESPESAS OPERACIONAIS",value:Re,type:"total",level:0}),Object.entries(ee).forEach(([J,se])=>{F.push({id:`despesa-${J}`,description:J,value:se,type:"despesa",level:1,parent:"despesas"})}),F.push({id:"resultado",description:"RESULTADO L√çQUIDO",value:ue,type:ue>=0?"receita":"despesa",level:0}),F},Ue=l.useMemo(()=>ye(U),[U]),ge=l.useMemo(()=>ye(O),[O]),re=l.useMemo(()=>Ue.map(i=>{const f=ge.find(L=>L.id===i.id);if(f){const L=i.value-f.value,le=f.value!==0?(i.value-f.value)/f.value*100:i.value>0?100:i.value<0?-100:0;return{...i,valuePrevious:f.value,variation:L,variationPercent:le}}return i}),[Ue,ge]),$=i=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(i),he=i=>new Intl.NumberFormat("pt-BR",{style:"percent",minimumFractionDigits:1,maximumFractionDigits:1}).format(i/100),Te=i=>["Janeiro","Fevereiro","Mar√ßo","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"][i],Pe=()=>D==="mensal"?`${Te(W)} ${b}`:D==="trimestral"?`${Math.floor(W/3)+1}¬∫ Trimestre ${b}`:`Ano ${b}`,Ee=()=>D==="mensal"?`${Te(k.month)} ${k.year}`:D==="trimestral"?`${Math.floor(k.month/3)+1}¬∫ Trimestre ${k.year}`:`Ano ${k.year}`,Z=async()=>{if(xe.current)try{const i=await St(xe.current,{scale:2,useCORS:!0,logging:!1}),f=i.toDataURL("image/png"),L=new $t("p","mm","a4"),le=210,Re=295,ue=i.height*le/i.width;let Fe=ue,ee=0;for(L.addImage(f,"PNG",0,ee,le,ue),Fe-=Re;Fe>=0;)ee=Fe-ue,L.addPage(),L.addImage(f,"PNG",0,ee,le,ue),Fe-=Re;const F=`DRE_${Pe().replace(/\s/g,"_")}_${new Date().toISOString().split("T")[0]}.pdf`;L.save(F)}catch(i){console.error("Erro ao exportar PDF:",i),alert("Erro ao exportar PDF. Tente novamente.")}},Oe=async()=>{try{const i=re.map(F=>({Descri√ß√£o:F.description,"Valor Atual":F.value,"Valor Anterior":F.valuePrevious||0,Varia√ß√£o:F.variation||0,"Varia√ß√£o %":F.variationPercent?`${F.variationPercent.toFixed(2)}%`:"-"})),f=ge.map(F=>({Descri√ß√£o:F.description,Valor:F.value})),L=[["DRE - "+Pe()],[""],["Descri√ß√£o","Valor Atual","Valor Anterior","Varia√ß√£o","Varia√ß√£o %"],...i.map(F=>[F.Descri√ß√£o,F["Valor Atual"].toFixed(2),F["Valor Anterior"].toFixed(2),F.Varia√ß√£o.toFixed(2),F["Varia√ß√£o %"]])].map(F=>F.join(",")).join(`
`),le=[["DRE - "+Ee()],[""],["Descri√ß√£o","Valor"],...f.map(F=>[F.Descri√ß√£o,F.Valor.toFixed(2)])].map(F=>F.join(",")).join(`
`),Re=L+`

`+le,ue=new Blob(["\uFEFF"+Re],{type:"text/csv;charset=utf-8;"}),Fe=URL.createObjectURL(ue),ee=document.createElement("a");ee.href=Fe,ee.download=`DRE_${Pe().replace(/\s/g,"_")}_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(ee),ee.click(),document.body.removeChild(ee),URL.revokeObjectURL(Fe)}catch(i){console.error("Erro ao exportar Excel:",i),alert("Erro ao exportar Excel. Tente novamente.")}};if(P)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600"})});const _e=re.find(i=>i.id==="receitas")?.value||0,Le=re.find(i=>i.id==="despesas")?.value||0,E=re.find(i=>i.id==="resultado")?.value||0,Ce=ge.find(i=>i.id==="receitas")?.value||0,ze=ge.find(i=>i.id==="despesas")?.value||0,ke=ge.find(i=>i.id==="resultado")?.value||0,Ie=_e-Ce,Je=Ce!==0?(_e-Ce)/Ce*100:_e>0?100:0,Ke=Le-ze,o=ze!==0?(Le-ze)/ze*100:Le>0?100:0,h=E-ke,z=ke!==0?(E-ke)/ke*100:E>0?100:E<0?-100:0;return e.jsxs("div",{className:"space-y-6",ref:xe,children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"DRE - Demonstrativo de Resultado do Exerc√≠cio"}),e.jsx("p",{className:"text-gray-600",children:"An√°lise de receitas e despesas do per√≠odo"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:Z,className:"flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-amber-500 to-orange-600 text-white font-semibold rounded-xl hover:from-amber-600 hover:to-orange-700 shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300",children:[e.jsx(De,{className:"h-5 w-5"}),"Exportar PDF"]}),e.jsxs("button",{onClick:Oe,className:"flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-amber-500 to-orange-600 text-white font-semibold rounded-xl hover:from-amber-600 hover:to-orange-700 shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300",children:[e.jsx(ha,{className:"h-5 w-5"}),"Exportar Excel"]})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-end",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Per√≠odo"}),e.jsxs("select",{value:D,onChange:i=>M(i.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500",children:[e.jsx("option",{value:"mensal",children:"Mensal"}),e.jsx("option",{value:"trimestral",children:"Trimestral"}),e.jsx("option",{value:"anual",children:"Anual"})]})]}),D!=="anual"&&e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"M√™s"}),e.jsx("select",{value:W,onChange:i=>ne(parseInt(i.target.value)),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500",children:Array.from({length:12},(i,f)=>e.jsx("option",{value:f,children:Te(f)},f))})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Ano"}),e.jsx("select",{value:b,onChange:i=>I(parseInt(i.target.value)),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500",children:Array.from({length:5},(i,f)=>{const L=new Date().getFullYear()-2+f;return e.jsx("option",{value:L,children:L},L)})})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"px-4 sm:px-6 py-4 border-b border-gray-200",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["DRE - ",Pe()]}),O.length>0&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Compara√ß√£o com ",Ee()]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descri√ß√£o"}),e.jsx("th",{className:"px-4 sm:px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Atual"}),O.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"px-4 sm:px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Anterior"}),e.jsx("th",{className:"px-4 sm:px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Varia√ß√£o"})]})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:re.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:O.length>0?4:2,className:"px-4 sm:px-6 py-8 text-center text-gray-500",children:"Nenhuma transa√ß√£o encontrada para o per√≠odo selecionado"})}):re.map(i=>e.jsxs("tr",{className:`${i.level===0?"bg-amber-50 font-semibold":i.level===1?"bg-gray-50":""} ${i.id==="resultado"?"border-t-2 border-gray-300":""}`,children:[e.jsx("td",{className:`px-4 sm:px-6 py-3 text-sm ${i.level===0?"text-amber-900":"text-gray-900"}`,style:{paddingLeft:`${i.level*20+16}px`},children:i.description}),e.jsx("td",{className:`px-4 sm:px-6 py-3 text-sm text-right font-medium ${i.type==="receita"?"text-green-600":i.type==="despesa"?"text-red-600":i.value>=0?"text-green-600":"text-red-600"}`,children:$(i.value)}),O.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-4 sm:px-6 py-3 text-sm text-right text-gray-600",children:i.valuePrevious!==void 0?$(i.valuePrevious):"-"}),e.jsx("td",{className:"px-4 sm:px-6 py-3 text-sm text-right",children:i.variation!==void 0&&i.variationPercent!==void 0?e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsxs("span",{className:`font-medium ${i.variation>=0?"text-green-600":"text-red-600"}`,children:[i.variation>=0?"‚Üë":"‚Üì"," ",$(Math.abs(i.variation))]}),e.jsxs("span",{className:`text-xs ${i.variationPercent>=0?"text-green-600":"text-red-600"}`,children:["(",he(i.variationPercent),")"]})]}):e.jsx("span",{className:"text-gray-400",children:"-"})})]})]},i.id))})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Jt,{className:"h-8 w-8 text-green-600"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Receitas"}),e.jsx("p",{className:"text-2xl font-semibold text-green-600",children:$(_e)}),O.length>0&&Ce>0&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsxs("span",{className:`text-xs ${Ie>=0?"text-green-600":"text-red-600"}`,children:[Ie>=0?"‚Üë":"‚Üì"," ",$(Math.abs(Ie))]}),e.jsxs("span",{className:`text-xs ${Je>=0?"text-green-600":"text-red-600"}`,children:["(",he(Je),")"]})]})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Rt,{className:"h-8 w-8 text-red-600"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Despesas"}),e.jsx("p",{className:"text-2xl font-semibold text-red-600",children:$(Le)}),O.length>0&&ze>0&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsxs("span",{className:`text-xs ${Ke<=0?"text-green-600":"text-red-600"}`,children:[Ke<=0?"‚Üì":"‚Üë"," ",$(Math.abs(Ke))]}),e.jsxs("span",{className:`text-xs ${o<=0?"text-green-600":"text-red-600"}`,children:["(",he(o),")"]})]})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(st,{className:"h-8 w-8 text-amber-600"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Resultado L√≠quido"}),e.jsx("p",{className:`text-2xl font-semibold ${E>=0?"text-green-600":"text-red-600"}`,children:$(E)}),O.length>0&&ke!==0&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsxs("span",{className:`text-xs ${h>=0?"text-green-600":"text-red-600"}`,children:[h>=0?"‚Üë":"‚Üì"," ",$(Math.abs(h))]}),e.jsxs("span",{className:`text-xs ${z>=0?"text-green-600":"text-red-600"}`,children:["(",he(z),")"]})]})]})]})})]})]})},Oa=()=>{const[w,y]=l.useState(""),[S,ve]=l.useState(""),[D,M]=l.useState(!1),[W,ne]=l.useState(!1),[b,I]=l.useState(""),[P,me]=l.useState(!1),[xe,$e]=l.useState(""),[pe,de]=l.useState(!1),{login:U,completeFirstLogin:k}=Gt(),O=typeof window<"u"&&(window.location.hostname.includes("github.io")||window.location.hostname.includes("demo")||window.location.hostname.includes("demo.")||window.location.hostname==="alya.fercarvalho.com"),ye=async re=>{re.preventDefault(),ne(!0),I("");const $=await U(w,S);if(!$.success)I("Usu√°rio ou senha incorretos"),ne(!1);else{if($.firstLogin&&$.newPassword){$e($.newPassword),me(!0),ne(!1);return}ne(!1)}},Ue=()=>{navigator.clipboard.writeText(xe),de(!0),setTimeout(()=>de(!1),2e3)},ge=async()=>{me(!1),de(!1),await k()};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 to-amber-100 flex items-center justify-center p-4",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-gradient-to-r from-amber-500 to-amber-600 rounded-full flex items-center justify-center mb-4",children:e.jsx(Wt,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"ALYA"}),e.jsx("p",{className:"text-gray-600",children:"Sistema Financeiro"})]}),e.jsxs("form",{onSubmit:ye,className:"space-y-6",children:[O&&e.jsx("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-amber-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:"!"})})}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("h3",{className:"text-sm font-bold text-amber-900 mb-2",children:"Modo Demo"}),e.jsxs("div",{className:"text-xs text-amber-800 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Login:"})," ",e.jsx("code",{className:"bg-amber-100 px-2 py-1 rounded",children:"demo"})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Senha:"})," ",e.jsx("code",{className:"bg-amber-100 px-2 py-1 rounded",children:"demo123"})]})]})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Usu√°rio"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(ua,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",value:w,onChange:re=>y(re.target.value),className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 bg-white",placeholder:"Digite seu usu√°rio",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Wt,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:D?"text":"password",value:S,onChange:re=>ve(re.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 bg-white",placeholder:"Digite sua senha",required:!0}),e.jsx("button",{type:"button",onClick:()=>M(!D),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:D?e.jsx(ba,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(fa,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]}),b&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsx("p",{className:"text-red-600 text-sm",children:b})}),e.jsx("button",{type:"submit",disabled:W,className:"w-full bg-gradient-to-r from-amber-500 to-amber-600 text-white font-semibold py-3 px-4 rounded-lg hover:from-amber-600 hover:to-amber-700 focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:W?"Entrando...":"Entrar"})]})]}),P&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md animate-in fade-in zoom-in duration-200",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-gradient-to-r from-amber-500 to-amber-600 rounded-full flex items-center justify-center mb-4",children:e.jsx(Wt,{className:"w-8 h-8 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Primeiro Acesso"}),e.jsx("p",{className:"text-gray-600",children:"Uma nova senha foi gerada para voc√™"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Sua Nova Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:xe,readOnly:!0,className:"w-full px-4 py-3 border-2 border-amber-500 rounded-lg bg-amber-50 font-mono text-lg font-bold text-gray-900 pr-12"}),e.jsx("button",{type:"button",onClick:Ue,className:"absolute inset-y-0 right-0 pr-3 flex items-center",title:"Copiar senha",children:pe?e.jsx(va,{className:"h-5 w-5 text-green-600"}):e.jsx(ya,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),pe&&e.jsx("p",{className:"text-green-600 text-sm mt-2",children:"Senha copiada!"})]}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-amber-800 text-sm",children:[e.jsx("strong",{children:"‚ö†Ô∏è Importante:"})," Anote esta senha em local seguro. Voc√™ precisar√° dela para fazer login novamente."]})}),e.jsx("button",{onClick:ge,className:"w-full bg-gradient-to-r from-amber-500 to-amber-600 text-white font-semibold py-3 px-4 rounded-lg hover:from-amber-600 hover:to-amber-700 focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 transition-all duration-200",children:"Entendi, continuar"})]})})]})},za=()=>{const{user:w,token:y}=Gt(),[S,ve]=l.useState([]),[D,M]=l.useState(!0),W=async()=>{try{M(!0);const I={"Content-Type":"application/json"};y&&(I.Authorization=`Bearer ${y}`);const P=w?.role==="admin"?`${ae}/admin/modules`:`${ae}/modules`,xe=await(await fetch(P,{headers:I})).json();xe.success&&ve(xe.data)}catch(I){console.error("Erro ao carregar m√≥dulos:",I)}finally{M(!1)}},ne=()=>!w||!w.modules||w.modules.length===0?S.filter(I=>I.isActive):S.filter(I=>I.isActive&&(w.modules?.includes(I.key)||w.role==="admin")),b=I=>S.find(P=>P.key===I);return l.useEffect(()=>{w&&W()},[w,y]),{modules:S,isLoading:D,loadModules:W,getVisibleModules:ne,getModuleByKey:b}},Ia=l.lazy(()=>ga(()=>import("./AdminPanel-mEpuBlS8.js"),__vite__mapDeps([0,1,2,3,4]))),qa=()=>{const{user:w,token:y,logout:S,isLoading:ve}=Gt();za();const D=typeof window<"u"&&(window.location.hostname==="alya.fercarvalho.com"||window.location.hostname.includes("github.io")||window.location.hostname.includes("demo")||window.location.hostname.includes("demo.")),M=()=>D?sessionStorage:localStorage,W=async()=>{const t={"Content-Type":"application/json"};y&&(t.Authorization=`Bearer ${y}`);const s=await fetch(`${ae}/transactions`,{headers:t}),a=await s.json();return s.status===401||s.status===403?(S(),[]):a.success?a.data:[]},ne=async t=>{const s={"Content-Type":"application/json"};y&&(s.Authorization=`Bearer ${y}`);const a=await fetch(`${ae}/transactions`,{method:"POST",headers:s,body:JSON.stringify(t)});if(a.status===401||a.status===403)return S(),null;const r=await a.json();return r.success?r.data:null},b=async(t,s)=>{const a={"Content-Type":"application/json"};y&&(a.Authorization=`Bearer ${y}`);const r=await fetch(`${ae}/transactions/${t}`,{method:"PUT",headers:a,body:JSON.stringify(s)});if(r.status===401||r.status===403)return S(),null;const n=await r.json();return n.success?n.data:null},I=async t=>{const s={};y&&(s.Authorization=`Bearer ${y}`);const a=await fetch(`${ae}/transactions/${t}`,{method:"DELETE",headers:s});return a.status===401||a.status===403?(S(),!1):(await a.json()).success},P=async t=>{const s={"Content-Type":"application/json"};y&&(s.Authorization=`Bearer ${y}`);const a=await fetch(`${ae}/transactions`,{method:"DELETE",headers:s,body:JSON.stringify({ids:t})});return a.status===401||a.status===403?(S(),!1):(await a.json()).success},me=async()=>{const t={"Content-Type":"application/json"};y&&(t.Authorization=`Bearer ${y}`);const s=await fetch(`${ae}/products`,{headers:t}),a=await s.json();return s.status===401||s.status===403?(S(),[]):a.success?a.data:[]},xe=async t=>{const s={"Content-Type":"application/json"};y&&(s.Authorization=`Bearer ${y}`);const a=await fetch(`${ae}/products`,{method:"POST",headers:s,body:JSON.stringify(t)});if(a.status===401||a.status===403)return S(),null;const r=await a.json();return r.success?r.data:null},$e=async(t,s)=>{const a={"Content-Type":"application/json"};y&&(a.Authorization=`Bearer ${y}`);const r=await fetch(`${ae}/products/${t}`,{method:"PUT",headers:a,body:JSON.stringify(s)});if(r.status===401||r.status===403)return S(),null;const n=await r.json();return n.success?n.data:null},pe=async t=>{const s={};y&&(s.Authorization=`Bearer ${y}`);const a=await fetch(`${ae}/products/${t}`,{method:"DELETE",headers:s});return a.status===401||a.status===403?(S(),!1):(await a.json()).success},de=async t=>{const s={"Content-Type":"application/json"};y&&(s.Authorization=`Bearer ${y}`);const a=await fetch(`${ae}/products`,{method:"DELETE",headers:s,body:JSON.stringify({ids:t})});return a.status===401||a.status===403?(S(),!1):(await a.json()).success},[U,k]=l.useState("dashboard"),[O,ye]=l.useState([]),[Ue,ge]=l.useState([]),[re,$]=l.useState(new Set),[he,Te]=l.useState(new Set),[Pe,Ee]=l.useState(!1),[Z,Oe]=l.useState({name:"",category:"",price:"",cost:"",stock:"",sold:""}),[_e,Le]=l.useState({name:!1,category:!1,price:!1,cost:!1,stock:!1,sold:!1}),[E,Ce]=l.useState([]),[ze,ke]=l.useState(!1),[Ie,Je]=l.useState(null),[Ke,o]=l.useState(!1),[h,z]=l.useState("transactions"),[i,f]=l.useState(null),[L,le]=l.useState(!1),[Re,ue]=l.useState(!1),[Fe,ee]=l.useState(!1),[F,J]=l.useState(!0),[se,Ae]=l.useState(!0),[ut,We]=l.useState(!1),[Ye,bt]=l.useState(!0),[Ge,Ft]=l.useState(!0),[Y,Q]=l.useState({date:new Date().toISOString().split("T")[0],description:"",value:"",type:"Receita",category:""}),[Me,Qe]=l.useState({date:!1,description:!1,value:!1,type:!1,category:!1}),[ft,mt]=l.useState(!1),[rs,Ht]=l.useState(new Date),[Ot,Tt]=l.useState(!1),[zt,Pt]=l.useState(!1),[Ns,It]=l.useState(null),[ws,qt]=l.useState(null),[fe,Ds]=l.useState({field:null,direction:"asc"}),[A,xt]=l.useState({type:"",category:"",dateFrom:"",dateTo:"",hasDateFilter:!1}),[G,Et]=l.useState({category:"",stockFilter:"",soldFilter:"",costFilter:""}),[Lt,vt]=l.useState(null),[yt,Rs]=l.useState(new Date().getMonth()),[Xe,os]=l.useState([]),[at,Ss]=l.useState([]);if(l.useEffect(()=>{if(!y||!w)return;(async()=>{try{const[s,a]=await Promise.all([W(),me()]);Ce(s),ye(a)}catch(s){console.error("Erro ao carregar dados:",s)}})()},[y,w]),l.useEffect(()=>{if(!y||!w){const t=M(),s=t.getItem("alya-transactions"),a=t.getItem("alya-products"),r=t.getItem("alya-metas");s&&Ce(JSON.parse(s)),a&&ye(JSON.parse(a)),r&&ge(JSON.parse(r))}},[y,w]),l.useEffect(()=>{const t=M();E.length>0&&t.setItem("alya-transactions",JSON.stringify(E))},[E]),l.useEffect(()=>{const t=M();O.length>0&&t.setItem("alya-products",JSON.stringify(O))},[O]),l.useEffect(()=>{const t=M();Ue.length>0&&t.setItem("alya-metas",JSON.stringify(Ue))},[Ue]),l.useEffect(()=>{const t=s=>{if(s.key==="Escape"){if(Ot){Tt(!1);return}if(zt){Pt(!1);return}if(ft){mt(!1);return}if(Pe){Ee(!1),vt(null),Oe({name:"",category:"",price:"",cost:"",stock:"",sold:""}),Le({name:!1,category:!1,price:!1,cost:!1,stock:!1,sold:!1});return}if(ze){ke(!1),Je(null),Q({date:new Date().toISOString().split("T")[0],description:"",value:"",type:"Receita",category:""}),Qe({date:!1,description:!1,value:!1,type:!1,category:!1}),mt(!1);return}if(Ke){o(!1),f(null);return}}};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[Ot,zt,ft,Pe,ze,Ke]),ve)return e.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Carregando..."})]})});if(!w)return e.jsx(Oa,{});const jt=t=>t.toISOString().split("T")[0],Kt=t=>new Date(t).toLocaleDateString("pt-BR"),is=t=>{Q(s=>({...s,date:jt(t)})),Ht(t),mt(!1),Qe(s=>({...s,date:!1}))},ns=()=>{mt(!ft)},ls=t=>{Ht(s=>{const a=new Date(s);return t==="prev"?a.setMonth(s.getMonth()-1):a.setMonth(s.getMonth()+1),a})},$s=()=>{const t=new Date;Ht(t),is(t)},Cs=()=>{Q(t=>({...t,date:""})),mt(!1)},ds=t=>{xt(s=>({...s,dateFrom:jt(t)})),It(t),Tt(!1)},cs=t=>{xt(s=>({...s,dateTo:jt(t)})),qt(t),Pt(!1)},ks=()=>{Tt(!Ot),Pt(!1)},Fs=()=>{Pt(!zt),Tt(!1)},ms=t=>{It(s=>{const a=s||new Date,r=new Date(a);return t==="prev"?r.setMonth(a.getMonth()-1):r.setMonth(a.getMonth()+1),r})},xs=t=>{qt(s=>{const a=s||new Date,r=new Date(a);return t==="prev"?r.setMonth(a.getMonth()-1):r.setMonth(a.getMonth()+1),r})},Ts=()=>{const t=new Date;It(t),ds(t)},Ps=()=>{const t=new Date;qt(t),cs(t)},Es=()=>{xt(t=>({...t,dateFrom:""})),It(null),Tt(!1)},Ls=()=>{xt(t=>({...t,dateTo:""})),qt(null),Pt(!1)},Vt=t=>{const{name:s,value:a}=t.target;Q(r=>({...r,[s]:a,...s==="type"?{category:""}:{}})),Qe(r=>({...r,[s]:!1}))},As=t=>{$(s=>{const a=new Set(s);return a.has(t)?a.delete(t):a.add(t),a})},Ms=()=>{re.size===O.length?$(new Set):$(new Set(O.map(t=>t.id)))},Bs=async()=>{if(re.size===0)return;const t=re.size===1?"Tem certeza que deseja deletar este produto?":`Tem certeza que deseja deletar ${re.size} produtos?`;if(confirm(t))try{const s=Array.from(re);await de(s)&&(ye(r=>r.filter(n=>!re.has(n.id))),$(new Set))}catch(s){console.error("Erro ao deletar produtos:",s)}},Os=t=>{Te(s=>{const a=new Set(s);return a.has(t)?a.delete(t):a.add(t),a})},zs=()=>{he.size===E.length?Te(new Set):Te(new Set(E.map(t=>t.id)))},Is=async()=>{if(he.size===0)return;const t=he.size===1?"Tem certeza que deseja deletar esta transa√ß√£o?":`Tem certeza que deseja deletar ${he.size} transa√ß√µes?`;if(confirm(t))try{const s=Array.from(he);await P(s)&&(Ce(r=>r.filter(n=>!he.has(n.id))),Te(new Set))}catch(s){console.error("Erro ao deletar transa√ß√µes:",s)}},qe=t=>{let s="asc";fe.field===t&&fe.direction==="asc"&&(s="desc"),Ds({field:t,direction:s})},Ve=t=>fe.field!==t?e.jsx("span",{className:"text-gray-400",children:"‚Üï"}):fe.direction==="asc"?e.jsx("span",{className:"text-amber-600",children:"‚Üë"}):e.jsx("span",{className:"text-amber-600",children:"‚Üì"}),ps=()=>{let t=E;return A.type&&(t=t.filter(s=>s.type===A.type)),A.category&&(t=t.filter(s=>s.category.toLowerCase().includes(A.category.toLowerCase()))),A.dateFrom&&(t=t.filter(s=>new Date(s.date)>=new Date(A.dateFrom))),A.dateTo&&(t=t.filter(s=>new Date(s.date)<=new Date(A.dateTo))),fe.field?t.sort((s,a)=>{let r=s[fe.field],n=a[fe.field];return fe.field==="date"?(r=new Date(r).getTime(),n=new Date(n).getTime()):fe.field==="value"?(r=Number(r),n=Number(n)):typeof r=="string"&&(r=r.toLowerCase(),n=n.toLowerCase()),r<n?fe.direction==="asc"?-1:1:r>n?fe.direction==="asc"?1:-1:0}):t},gs=()=>{let t=O;return G.category&&(t=t.filter(s=>s.category.toLowerCase().includes(G.category.toLowerCase()))),G.stockFilter==="inStock"?t=t.filter(s=>s.stock>0):G.stockFilter==="outOfStock"&&(t=t.filter(s=>s.stock===0)),G.soldFilter==="sold"?t=t.filter(s=>s.sold>0):G.soldFilter==="notSold"&&(t=t.filter(s=>s.sold===0)),G.costFilter==="withCost"?t=t.filter(s=>s.cost>0):G.costFilter==="withoutCost"&&(t=t.filter(s=>s.cost===0)),fe.field?t.sort((s,a)=>{let r=s[fe.field],n=a[fe.field];return fe.field==="price"||fe.field==="cost"||fe.field==="stock"||fe.field==="sold"?(r=Number(r),n=Number(n)):typeof r=="string"&&(r=r.toLowerCase(),n=n.toLowerCase()),r<n?fe.direction==="asc"?-1:1:r>n?fe.direction==="asc"?1:-1:0}):t},qs=()=>{xt({type:"",category:"",dateFrom:"",dateTo:"",hasDateFilter:!1})},Vs=()=>{Et({category:"",stockFilter:"",soldFilter:"",costFilter:""})},Us=()=>{const t={date:!Y.date||Y.date.trim()==="",description:!Y.description||Y.description.trim()==="",value:!Y.value||Y.value.trim()===""||parseFloat(Y.value)<=0,type:!Y.type||Y.type.trim()==="",category:!Y.category||Y.category.trim()===""};return Qe(t),!Object.values(t).some(a=>a)},_s=()=>{const t=new Date,s=rs.getMonth(),a=rs.getFullYear(),r=new Date(a,s,1),n=new Date(r);n.setDate(n.getDate()-r.getDay());const x=[],c=["D","S","T","Q","Q","S","S"];for(let u=0;u<42;u++){const p=new Date(n);p.setDate(n.getDate()+u),x.push(p)}const d=["Janeiro","Fevereiro","Mar√ßo","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];return e.jsxs("div",{className:"absolute top-full left-0 mt-2 bg-white rounded-xl shadow-2xl border border-gray-200 p-4 z-50 min-w-[320px]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("button",{onClick:()=>ls("prev"),className:"p-2 hover:bg-amber-50 rounded-lg transition-colors",children:e.jsx(Xt,{className:"w-5 h-5 text-amber-600"})}),e.jsxs("h3",{className:"text-lg font-semibold text-amber-800",children:[d[s]," ",a]}),e.jsx("button",{onClick:()=>ls("next"),className:"p-2 hover:bg-amber-50 rounded-lg transition-colors",children:e.jsx(Zt,{className:"w-5 h-5 text-amber-600"})})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:c.map((u,p)=>e.jsx("div",{className:"text-center text-sm font-semibold text-gray-600 py-2",children:u},p))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:x.map((u,p)=>{const C=u.getMonth()===s,te=u.toDateString()===t.toDateString(),q=Y.date===jt(u);return e.jsx("button",{onClick:()=>is(u),className:`
                  w-10 h-10 text-sm rounded-lg transition-all duration-200
                  ${C?"text-gray-900":"text-gray-400"}
                  ${te?"bg-amber-100 text-amber-800 font-semibold":""}
                  ${q?"bg-amber-500 text-white font-semibold":""}
                  ${!q&&!te?"hover:bg-amber-50":""}
                `,children:u.getDate()},p)})}),e.jsxs("div",{className:"flex gap-2 mt-4 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:Cs,className:"flex-1 px-3 py-2 text-sm text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Limpar"}),e.jsx("button",{onClick:$s,className:"flex-1 px-3 py-2 text-sm text-white bg-amber-500 rounded-lg hover:bg-amber-600 transition-colors",children:"Hoje"})]})]})},Js=()=>{const t=new Date,s=Ns||new Date,a=s.getMonth(),r=s.getFullYear(),n=new Date(r,a,1),x=new Date(n);x.setDate(x.getDate()-n.getDay());const c=[],d=["D","S","T","Q","Q","S","S"];for(let p=0;p<42;p++){const C=new Date(x);C.setDate(x.getDate()+p),c.push(C)}const u=["Janeiro","Fevereiro","Mar√ßo","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];return e.jsxs("div",{className:"absolute top-full left-0 mt-2 bg-white rounded-xl shadow-2xl border border-gray-200 p-4 z-50 min-w-[320px]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("button",{onClick:()=>ms("prev"),className:"p-2 hover:bg-amber-50 rounded-lg transition-colors",children:e.jsx(Xt,{className:"w-5 h-5 text-amber-600"})}),e.jsxs("h3",{className:"text-lg font-semibold text-amber-800",children:[u[a]," ",r]}),e.jsx("button",{onClick:()=>ms("next"),className:"p-2 hover:bg-amber-50 rounded-lg transition-colors",children:e.jsx(Zt,{className:"w-5 h-5 text-amber-600"})})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:d.map((p,C)=>e.jsx("div",{className:"text-center text-sm font-semibold text-gray-600 py-2",children:p},C))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:c.map((p,C)=>{const te=p.getMonth()===a,q=p.toDateString()===t.toDateString(),V=A.dateFrom===jt(p);return e.jsx("button",{onClick:()=>ds(p),className:`
                  w-10 h-10 text-sm rounded-lg transition-all duration-200
                  ${te?"text-gray-900":"text-gray-400"}
                  ${q?"bg-amber-100 text-amber-800 font-semibold":""}
                  ${V?"bg-amber-500 text-white font-semibold":""}
                  ${!V&&!q?"hover:bg-amber-50":""}
                `,children:p.getDate()},C)})}),e.jsxs("div",{className:"flex gap-2 mt-4 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:Es,className:"flex-1 px-3 py-2 text-sm text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Limpar"}),e.jsx("button",{onClick:Ts,className:"flex-1 px-3 py-2 text-sm text-white bg-amber-500 rounded-lg hover:bg-amber-600 transition-colors",children:"Hoje"})]})]})},Ys=()=>{const t=new Date,s=ws||new Date,a=s.getMonth(),r=s.getFullYear(),n=new Date(r,a,1),x=new Date(n);x.setDate(x.getDate()-n.getDay());const c=[],d=["D","S","T","Q","Q","S","S"];for(let p=0;p<42;p++){const C=new Date(x);C.setDate(x.getDate()+p),c.push(C)}const u=["Janeiro","Fevereiro","Mar√ßo","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];return e.jsxs("div",{className:"absolute top-full left-0 mt-2 bg-white rounded-xl shadow-2xl border border-gray-200 p-4 z-50 min-w-[320px]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("button",{onClick:()=>xs("prev"),className:"p-2 hover:bg-amber-50 rounded-lg transition-colors",children:e.jsx(Xt,{className:"w-5 h-5 text-amber-600"})}),e.jsxs("h3",{className:"text-lg font-semibold text-amber-800",children:[u[a]," ",r]}),e.jsx("button",{onClick:()=>xs("next"),className:"p-2 hover:bg-amber-50 rounded-lg transition-colors",children:e.jsx(Zt,{className:"w-5 h-5 text-amber-600"})})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:d.map((p,C)=>e.jsx("div",{className:"text-center text-sm font-semibold text-gray-600 py-2",children:p},C))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:c.map((p,C)=>{const te=p.getMonth()===a,q=p.toDateString()===t.toDateString(),V=A.dateTo===jt(p);return e.jsx("button",{onClick:()=>cs(p),className:`
                  w-10 h-10 text-sm rounded-lg transition-all duration-200
                  ${te?"text-gray-900":"text-gray-400"}
                  ${q?"bg-amber-100 text-amber-800 font-semibold":""}
                  ${V?"bg-amber-500 text-white font-semibold":""}
                  ${!V&&!q?"hover:bg-amber-50":""}
                `,children:p.getDate()},C)})}),e.jsxs("div",{className:"flex gap-2 mt-4 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:Ls,className:"flex-1 px-3 py-2 text-sm text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Limpar"}),e.jsx("button",{onClick:Ps,className:"flex-1 px-3 py-2 text-sm text-white bg-amber-500 rounded-lg hover:bg-amber-600 transition-colors",children:"Hoje"})]})]})},Ut=t=>t==="Receita"?["Atacado","Varejo","Investimentos","Outros"]:t==="Despesa"?["Fixo","Vari√°vel","Investimento","Mkt","Outros"]:[],Gs=t=>{Je(t),Q({date:t.date,description:t.description,value:t.value.toString(),type:t.type,category:t.category}),ke(!0)},Nt=t=>{const{name:s,value:a}=t.target;Oe(r=>({...r,[s]:a})),Le(r=>({...r,[s]:!1}))},Hs=()=>{const t={name:!Z.name||Z.name.trim()==="",category:!Z.category||Z.category.trim()==="",price:!Z.price||Z.price.trim()===""||parseFloat(Z.price)<=0,cost:!1,stock:!1,sold:!1};return Le(t),!(t.name||t.category||t.price)},Ks=t=>{vt(t),Oe({name:t.name,price:t.price.toString(),cost:t.cost.toString(),stock:t.stock.toString(),sold:t.sold.toString(),category:t.category}),Ee(!0)},Ws=()=>{if(!E||E.length===0)return{receitas:0,despesas:0,faturamento:0,resultado:0};const t=new Date,s=t.getMonth(),a=t.getFullYear();try{const r=E.filter(u=>{if(!u.date)return!1;const p=new Date(u.date);return p.getMonth()===s&&p.getFullYear()===a}),n=r.filter(u=>u.type==="Receita").reduce((u,p)=>u+(p.value||0),0),x=r.filter(u=>u.type==="Despesa").reduce((u,p)=>u+(p.value||0),0),c=n,d=n-x;return{receitas:n,despesas:x,faturamento:c,resultado:d}}catch(r){return console.error("Erro ao calcular totais:",r),{receitas:0,despesas:0,faturamento:0,resultado:0}}},rt=[{nome:"JANEIRO",indice:0,meta:18500},{nome:"FEVEREIRO",indice:1,meta:19200},{nome:"MAR√áO",indice:2,meta:20100},{nome:"ABRIL",indice:3,meta:19800},{nome:"MAIO",indice:4,meta:20500},{nome:"JUNHO",indice:5,meta:21e3},{nome:"JULHO",indice:6,meta:21500},{nome:"AGOSTO",indice:7,meta:22e3},{nome:"SETEMBRO",indice:8,meta:21889.17},{nome:"OUTUBRO",indice:9,meta:23e3},{nome:"NOVEMBRO",indice:10,meta:25e3},{nome:"DEZEMBRO",indice:11,meta:28e3}],Ze=t=>{os(s=>s.includes(t)?s.filter(a=>a!==t):[...s,t])},pt=t=>{Ss(s=>s.includes(t)?s.filter(a=>a!==t):[...s,t])},Qs=()=>{const t=D?e.jsx("div",{className:"mb-6 bg-amber-50 border-l-4 border-amber-500 p-4 rounded-r-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-amber-500",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("h3",{className:"text-sm font-bold text-amber-900",children:"Modo Demo"}),e.jsx("p",{className:"text-sm text-amber-800 mt-1",children:"Os dados s√£o tempor√°rios e ser√£o perdidos ao fechar o navegador. Este √© um ambiente de demonstra√ß√£o."})]})]})}):null,{receitas:s,despesas:a,resultado:r}=Ws(),n=rt.find(j=>j.indice===yt)||rt[new Date().getMonth()],x=s,c=a,d=r,p=(j=>Math.floor(j/3))(yt),C=[p*3,p*3+1,p*3+2],te=["Q1 (Jan-Mar)","Q2 (Abr-Jun)","Q3 (Jul-Set)","Q4 (Out-Dez)"],q=E.filter(j=>{const ie=new Date(j.date).getMonth();return C.includes(ie)}),V=q.filter(j=>j.type==="Receita").reduce((j,ie)=>j+ie.value,0),be=q.filter(j=>j.type==="Despesa").reduce((j,ie)=>j+ie.value,0),R=V-be,g=C.reduce((j,ie)=>j+(rt[ie]?.meta||0),0),N=E.filter(j=>new Date(j.date).getFullYear()===new Date().getFullYear()),v=N.filter(j=>j.type==="Receita").reduce((j,ie)=>j+ie.value,0),T=N.filter(j=>j.type==="Despesa").reduce((j,ie)=>j+ie.value,0),H=v-T,oe=E.sort((j,ie)=>new Date(ie.date).getTime()-new Date(j.date).getTime()).slice(0,5),m=[{name:"Receitas",value:x,color:"#22c55e"},{name:"Despesas",value:c,color:"#ef4444"}],B=[{name:"Receitas",value:V,color:"#06b6d4"},{name:"Despesas",value:be,color:"#f97316"}],Se=[{name:"Receitas Anuais",value:v,color:"#16a34a"},{name:"Despesas Anuais",value:T,color:"#dc2626"}],Be=[{name:"Meta",value:n.meta,color:"#f59e0b"},{name:"Real",value:d,color:d>=n.meta?"#22c55e":"#ef4444"}],K=[{name:"Meta",value:g,color:"#f59e0b"},{name:"Real",value:R,color:R>=g?"#22c55e":"#ef4444"}],X=rt.reduce((j,ie)=>j+ie.meta,0),ce=[{name:"Meta Anual",value:X,color:"#f59e0b"},{name:"Real Anual",value:H,color:H>=X?"#22c55e":"#ef4444"}],_=(j,ie)=>{const je=j.length>0&&j.some(we=>we.value>0),wt=je?j:[{name:"Sem dados",value:100,color:"#e5e7eb"}];return e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100 mt-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:ie}),e.jsx(et,{width:"100%",height:350,children:e.jsxs(ma,{children:[e.jsx(xa,{data:wt,cx:"50%",cy:"50%",innerRadius:80,outerRadius:140,paddingAngle:je?8:0,dataKey:"value",cornerRadius:je?10:0,stroke:"none",children:wt.map((we,gt)=>e.jsx(us,{fill:we.color},`cell-${gt}`))}),je&&e.jsx(tt,{formatter:we=>[`R$ ${we.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,""],contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"12px",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)"}}),je&&e.jsx(bs,{verticalAlign:"bottom",height:36,iconType:"circle",wrapperStyle:{paddingTop:"20px",fontSize:"14px",fontWeight:600}}),!je&&e.jsx("text",{x:"50%",y:"50%",textAnchor:"middle",dominantBaseline:"middle",className:"fill-gray-400 text-sm font-medium",children:"Sem dados dispon√≠veis"})]})})]})},Ne=(j,ie)=>e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100 mt-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:ie}),e.jsx(et,{width:"100%",height:350,children:e.jsxs(ot,{data:j,margin:{top:20,right:30,left:20,bottom:20},children:[e.jsx(it,{strokeDasharray:"3 3",stroke:"#f0f0f0",vertical:!1}),e.jsx(nt,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:"#666"}}),e.jsx(lt,{tickFormatter:je=>`R$ ${je.toLocaleString("pt-BR")}`,axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:"#666"}}),e.jsx(tt,{formatter:je=>`R$ ${je.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,contentStyle:{backgroundColor:"white",border:"1px solid #e0e0e0",borderRadius:"12px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.12)"}}),e.jsx(He,{dataKey:"value",fill:"#8884d8",radius:[8,8,0,0],children:j.map((je,wt)=>e.jsx(us,{fill:je.color},`cell-${wt}`))})]})})]});return e.jsxs("div",{className:"space-y-8",children:[t,e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[e.jsx(dt,{className:"w-8 h-8 text-blue-600"}),"Dashboard Financeiro"]}),e.jsxs("button",{onClick:()=>ke(!0),className:"flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-amber-400 to-orange-400 text-white font-semibold rounded-xl hover:from-amber-500 hover:to-orange-500 shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300",children:[e.jsx(Dt,{className:"h-5 w-5"}),"Nova Transa√ß√£o"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-3",children:[e.jsx(Mt,{className:"w-6 h-6 text-gray-600"}),"M√™s Atual",e.jsx("span",{className:"text-lg font-medium text-amber-600 bg-amber-50 px-3 py-1 rounded-lg border border-amber-200",children:n.nome})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-green-500 p-6 rounded-2xl shadow-lg cursor-pointer hover:shadow-xl transition-all duration-200 hover:-translate-y-1",onClick:()=>Ze("receitas-mensal"),children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-xl flex items-center justify-center",children:e.jsx(st,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-white text-opacity-80 uppercase tracking-wide",children:"Receitas"}),e.jsxs("p",{className:"text-2xl font-bold text-white mt-1",children:["R$ ",x.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})}),Xe.includes("receitas-mensal")&&_(m,"Distribui√ß√£o Mensal: Receitas vs Despesas")]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-red-500 p-6 rounded-2xl shadow-lg cursor-pointer hover:shadow-xl transition-all duration-200 hover:-translate-y-1",onClick:()=>Ze("despesas-mensal"),children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-xl flex items-center justify-center",children:e.jsx(Rt,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-white text-opacity-80 uppercase tracking-wide",children:"Despesas"}),e.jsxs("p",{className:"text-2xl font-bold text-white mt-1",children:["R$ ",c.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})}),Xe.includes("despesas-mensal")&&_(m,"Distribui√ß√£o Mensal: Receitas vs Despesas")]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:`p-6 rounded-2xl shadow-lg cursor-pointer hover:shadow-xl transition-all duration-200 hover:-translate-y-1 ${d>=0,"bg-yellow-500"}`,onClick:()=>Ze("saldo-mensal"),children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-xl flex items-center justify-center",children:e.jsx(dt,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-white text-opacity-80 uppercase tracking-wide",children:"Saldo"}),e.jsxs("p",{className:`text-2xl font-bold mt-1 ${d>=0?"text-green-900":"text-red-900"}`,children:["R$ ",d.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})}),Xe.includes("saldo-mensal")&&Ne(Be,`Compara√ß√£o: Meta vs Real (${n.nome})`)]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-2xl font-bold text-cyan-800 flex items-center gap-3",children:[e.jsx(Mt,{className:"w-6 h-6 text-cyan-600"}),"Trimestre Atual",e.jsx("span",{className:"text-lg font-medium text-cyan-600 bg-cyan-50 px-3 py-1 rounded-lg border border-cyan-200",children:te[p]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 p-6 rounded-2xl shadow-lg cursor-pointer hover:shadow-xl transition-all duration-200 hover:-translate-y-1",onClick:()=>Ze("receitas-trimestre"),children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-xl flex items-center justify-center",children:e.jsx(st,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-white text-opacity-80 uppercase tracking-wide",children:"Receitas"}),e.jsxs("p",{className:"text-2xl font-bold text-white mt-1",children:["R$ ",V.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})}),Xe.includes("receitas-trimestre")&&_(B,"Distribui√ß√£o Trimestral: Receitas vs Despesas")]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-red-500 to-red-600 p-6 rounded-2xl shadow-lg cursor-pointer hover:shadow-xl transition-all duration-200 hover:-translate-y-1",onClick:()=>Ze("despesas-trimestre"),children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-xl flex items-center justify-center",children:e.jsx(Rt,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-white text-opacity-80 uppercase tracking-wide",children:"Despesas"}),e.jsxs("p",{className:"text-2xl font-bold text-white mt-1",children:["R$ ",be.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})}),Xe.includes("despesas-trimestre")&&_(B,"Distribui√ß√£o Trimestral: Receitas vs Despesas")]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 p-6 rounded-2xl shadow-lg cursor-pointer hover:shadow-xl transition-all duration-200 hover:-translate-y-1",onClick:()=>Ze("saldo-trimestre"),children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-xl flex items-center justify-center",children:e.jsx(dt,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-white text-opacity-80 uppercase tracking-wide",children:"Saldo"}),e.jsxs("p",{className:`text-2xl font-bold mt-1 ${R>=0?"text-green-900":"text-red-900"}`,children:["R$ ",R.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})}),Xe.includes("saldo-trimestre")&&Ne(K,`Compara√ß√£o Trimestral: Meta vs Real (${te[p]})`)]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-2xl font-bold text-purple-800 flex items-center gap-3",children:[e.jsx(Mt,{className:"w-6 h-6 text-purple-600"}),"Ano"]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-green-600 p-6 rounded-2xl shadow-lg cursor-pointer hover:shadow-xl transition-all duration-200 hover:-translate-y-1",onClick:()=>Ze("receitas-anual"),children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-xl flex items-center justify-center",children:e.jsx(st,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-white text-opacity-80 uppercase tracking-wide",children:"Receitas Anuais"}),e.jsxs("p",{className:"text-2xl font-bold text-white mt-1",children:["R$ ",v.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})}),Xe.includes("receitas-anual")&&_(Se,"Distribui√ß√£o Anual: Receitas vs Despesas")]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-red-600 p-6 rounded-2xl shadow-lg cursor-pointer hover:shadow-xl transition-all duration-200 hover:-translate-y-1",onClick:()=>Ze("despesas-anual"),children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-xl flex items-center justify-center",children:e.jsx(Rt,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-white text-opacity-80 uppercase tracking-wide",children:"Despesas Anuais"}),e.jsxs("p",{className:"text-2xl font-bold text-white mt-1",children:["R$ ",T.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})}),Xe.includes("despesas-anual")&&_(Se,"Distribui√ß√£o Anual: Receitas vs Despesas")]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:`p-6 rounded-2xl shadow-lg cursor-pointer hover:shadow-xl transition-all duration-200 hover:-translate-y-1 ${H>=0,"bg-yellow-600"}`,onClick:()=>Ze("saldo-anual"),children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-xl flex items-center justify-center",children:e.jsx(dt,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-white text-opacity-80 uppercase tracking-wide",children:"Saldo Anual"}),e.jsxs("p",{className:`text-2xl font-bold mt-1 ${H>=0?"text-green-900":"text-red-900"}`,children:["R$ ",H.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})}),Xe.includes("saldo-anual")&&Ne(ce,"Compara√ß√£o Anual: Meta vs Real")]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-3",children:[e.jsx(st,{className:"w-6 h-6 text-gray-600"}),"Transa√ß√µes Recentes"]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:[oe.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("p",{className:"text-gray-500",children:"Nenhuma transa√ß√£o encontrada."}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Adicione suas primeiras transa√ß√µes para v√™-las aqui."})]}):e.jsx("div",{className:"divide-y divide-gray-100",children:oe.map((j,ie)=>e.jsx("div",{className:"p-4 hover:bg-gray-50 transition-colors duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${j.type==="Receita"?"bg-emerald-500":"bg-red-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:j.description}),e.jsx("p",{className:"text-sm text-gray-500",children:j.category})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`font-bold ${j.type==="Receita"?"text-emerald-600":"text-red-600"}`,children:[j.type==="Receita"?"+":"-","R$ ",j.value.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(j.date).toLocaleDateString("pt-BR")})]})]})},ie))}),e.jsx("div",{className:"p-6 bg-gradient-to-r from-gray-50 to-blue-50 border-t border-gray-100",children:e.jsxs("button",{onClick:()=>k("transactions"),className:"w-full flex items-center justify-center gap-3 px-6 py-4 bg-gradient-to-r from-blue-500 to-indigo-600 text-white font-semibold rounded-xl hover:from-blue-600 hover:to-indigo-700 shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300 group",children:[e.jsx(st,{className:"h-5 w-5 group-hover:scale-110 transition-transform duration-300"}),"Ver todas as transa√ß√µes",e.jsx(ct,{className:"h-5 w-5 rotate-90 group-hover:translate-x-1 transition-all duration-300"})]})})]})]})]})},hs=(t,s,a,r=31970.5)=>{const x=E.filter(u=>{const p=new Date(u.date);return p.getMonth()===s&&p.getFullYear()===2025}),c=x.filter(u=>u.type==="Receita").reduce((u,p)=>u+p.value,0),d=x.filter(u=>u.type==="Despesa").reduce((u,p)=>u+p.value,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-3",children:[e.jsx(Mt,{className:"w-6 h-6 text-gray-600"}),"Resultado"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"bg-white/90 backdrop-blur-sm p-8 rounded-2xl shadow-lg border border-gray-200",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"REFOR√áO DE CAIXA"}),e.jsx("span",{className:"font-bold text-gray-800",children:"R$ 0,00"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"SA√çDA DE CAIXA"}),e.jsx("span",{className:"font-bold text-gray-800",children:"R$ 0,00"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"font-semibold text-emerald-700",children:"RECEITA"}),e.jsxs("span",{className:"font-bold text-emerald-800",children:["R$ ",c.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"font-semibold text-red-700",children:"DESPESA"}),e.jsxs("span",{className:"font-bold text-red-800",children:["-R$ ",d.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"font-semibold text-blue-700",children:"SALDO INICIAL"}),e.jsxs("span",{className:"font-bold text-blue-800",children:["R$ ",r.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex justify-between items-center py-4 bg-gray-50 px-4 rounded-lg border-2 border-gray-300 mt-4",children:[e.jsx("span",{className:"font-bold text-gray-900 text-lg",children:"Total geral"}),e.jsxs("span",{className:`font-bold text-xl ${r+c-d>=0?"text-emerald-800":"text-red-800"}`,children:["R$ ",(r+c-d).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})}),e.jsx("div",{className:"bg-white/90 backdrop-blur-sm p-8 rounded-2xl shadow-lg border border-gray-200",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 pb-2 border-b-2 border-gray-300",children:[e.jsx("div",{className:"text-center",children:e.jsx("span",{className:"font-bold text-gray-600 text-lg"})}),e.jsx("div",{className:"text-center",children:e.jsx("span",{className:"font-bold text-gray-800 text-xl",children:"R$"})}),e.jsx("div",{className:"text-center",children:e.jsx("span",{className:"font-bold text-gray-800 text-xl",children:"%"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 py-3 border-b border-gray-200",children:[e.jsx("div",{className:"font-bold text-gray-800 italic",children:"META"}),e.jsxs("div",{className:"text-center font-bold text-gray-800",children:["R$ ",a.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsx("div",{className:"text-center font-bold text-gray-800",children:"100%"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 py-3 border-b border-gray-200",children:[e.jsx("div",{className:"font-bold text-emerald-700 italic",children:"ALCAN√áADO"}),e.jsxs("div",{className:"text-center font-bold text-emerald-800",children:["R$ ",c.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"text-center font-bold text-emerald-800",children:[a>0?(c/a*100).toFixed(0):0,"%"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 py-3",children:[e.jsx("div",{className:"font-bold text-red-700 italic",children:"RESTANTE"}),e.jsxs("div",{className:"text-center font-bold text-red-800",children:["-R$ ",Math.max(0,a-c).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"text-center font-bold text-red-800",children:[a>0?Math.max(0,100-c/a*100).toFixed(0):100,"%"]})]})]})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-2xl font-bold text-emerald-800 flex items-center gap-3",children:[e.jsx(Jt,{className:"w-6 h-6 text-emerald-600"}),"Faturamento"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 p-6 rounded-2xl border border-emerald-200 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-bold text-emerald-800 mb-4",children:"Faturamento TOTAL"}),e.jsxs("div",{className:"text-2xl font-bold text-emerald-900 mb-4",children:["R$ ",c.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between text-sm font-medium text-emerald-700 mb-1",children:[e.jsx("span",{children:"Progresso"}),e.jsxs("span",{children:[(c/3e4*100).toFixed(0),"%"]})]}),e.jsxs("div",{className:"w-full bg-emerald-200 rounded-full h-2 relative",children:[e.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-emerald-600 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(100,c/3e4*100)}%`}}),c/3e4*100>100&&e.jsx("div",{className:"absolute top-0 left-0 bg-gradient-to-r from-emerald-700 to-emerald-800 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(100,c/3e4*100-100)}%`}})]})]}),e.jsxs("div",{className:"text-sm text-emerald-700 font-medium",children:["R$ ",c.toLocaleString("pt-BR",{minimumFractionDigits:2})," / R$ ",Math.max(0,3e4-c).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-6 rounded-2xl border border-green-200 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-bold text-green-800 mb-4",children:"Faturamento Varejo"}),e.jsxs("div",{className:"text-2xl font-bold text-green-900 mb-4",children:["R$ ",(c*.6).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between text-sm font-medium text-green-700 mb-1",children:[e.jsx("span",{children:"Progresso"}),e.jsxs("span",{children:[(c*.6/18e3*100).toFixed(0),"%"]})]}),e.jsxs("div",{className:"w-full bg-green-200 rounded-full h-2 relative",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(100,c*.6/18e3*100)}%`}}),c*.6/18e3*100>100&&e.jsx("div",{className:"absolute top-0 left-0 bg-gradient-to-r from-green-700 to-green-800 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(100,c*.6/18e3*100-100)}%`}})]})]}),e.jsxs("div",{className:"text-sm text-green-700 font-medium",children:["R$ ",(c*.6).toLocaleString("pt-BR",{minimumFractionDigits:2})," / R$ ",Math.max(0,18e3-c*.6).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-teal-100 p-6 rounded-2xl border border-teal-200 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-bold text-teal-800 mb-4",children:"Faturamento Atacado"}),e.jsxs("div",{className:"text-2xl font-bold text-teal-900 mb-4",children:["R$ ",(c*.3).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between text-sm font-medium text-teal-700 mb-1",children:[e.jsx("span",{children:"Progresso"}),e.jsxs("span",{children:[(c*.3/12e3*100).toFixed(0),"%"]})]}),e.jsxs("div",{className:"w-full bg-teal-200 rounded-full h-2 relative",children:[e.jsx("div",{className:"bg-gradient-to-r from-teal-500 to-teal-600 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(100,c*.3/12e3*100)}%`}}),c*.3/12e3*100>100&&e.jsx("div",{className:"absolute top-0 left-0 bg-gradient-to-r from-teal-700 to-teal-800 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(100,c*.3/12e3*100-100)}%`}})]})]}),e.jsxs("div",{className:"text-sm text-teal-700 font-medium",children:["R$ ",(c*.3).toLocaleString("pt-BR",{minimumFractionDigits:2})," / R$ ",Math.max(0,12e3-c*.3).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-2xl font-bold text-red-800 flex items-center gap-3",children:[e.jsx(Rt,{className:"w-6 h-6 text-red-600"}),"Despesas"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 p-6 rounded-2xl border border-red-200 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-bold text-red-800 mb-4",children:"Despesas TOTAL"}),e.jsxs("div",{className:"text-2xl font-bold text-red-900 mb-4",children:["R$ ",d.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between text-sm font-medium text-red-700 mb-1",children:[e.jsx("span",{children:"Limite"}),e.jsxs("span",{children:[(d/15e3*100).toFixed(0),"%"]})]}),e.jsxs("div",{className:"w-full bg-red-200 rounded-full h-2 relative",children:[e.jsx("div",{className:"bg-gradient-to-r from-red-500 to-red-600 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(100,d/15e3*100)}%`}}),d/15e3*100>100&&e.jsx("div",{className:"absolute top-0 left-0 bg-gradient-to-r from-red-700 to-red-900 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(100,d/15e3*100-100)}%`}})]})]}),e.jsxs("div",{className:"text-sm text-red-700 font-medium",children:["R$ ",d.toLocaleString("pt-BR",{minimumFractionDigits:2})," / R$ ",Math.max(0,15e3-d).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 p-6 rounded-2xl border border-orange-200 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-bold text-orange-800 mb-4",children:"Despesas Vari√°veis"}),e.jsxs("div",{className:"text-2xl font-bold text-orange-900 mb-4",children:["R$ ",(d*.7).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between text-sm font-medium text-orange-700 mb-1",children:[e.jsx("span",{children:"Limite"}),e.jsxs("span",{children:[(d*.7/10500*100).toFixed(0),"%"]})]}),e.jsxs("div",{className:"w-full bg-orange-200 rounded-full h-2 relative",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(100,d*.7/10500*100)}%`}}),d*.7/10500*100>100&&e.jsx("div",{className:"absolute top-0 left-0 bg-gradient-to-r from-orange-700 to-orange-900 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(100,d*.7/10500*100-100)}%`}})]})]}),e.jsxs("div",{className:"text-sm text-orange-700 font-medium",children:["R$ ",(d*.7).toLocaleString("pt-BR",{minimumFractionDigits:2})," / R$ ",Math.max(0,10500-d*.7).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 p-6 rounded-2xl border border-amber-200 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-bold text-amber-800 mb-4",children:"Despesas Fixas"}),e.jsxs("div",{className:"text-2xl font-bold text-amber-900 mb-4",children:["R$ ",(d*.25).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between text-sm font-medium text-amber-700 mb-1",children:[e.jsx("span",{children:"Limite"}),e.jsxs("span",{children:[(d*.25/4500*100).toFixed(0),"%"]})]}),e.jsxs("div",{className:"w-full bg-amber-200 rounded-full h-2 relative",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(100,d*.25/4500*100)}%`}}),d*.25/4500*100>100&&e.jsx("div",{className:"absolute top-0 left-0 bg-gradient-to-r from-amber-700 to-amber-900 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(100,d*.25/4500*100-100)}%`}})]})]}),e.jsxs("div",{className:"text-sm text-amber-700 font-medium",children:["R$ ",(d*.25).toLocaleString("pt-BR",{minimumFractionDigits:2})," / R$ ",Math.max(0,4500-d*.25).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-2xl font-bold text-indigo-800 flex items-center gap-3",children:[e.jsx(ct,{className:"w-6 h-6 text-indigo-600"}),"Investimentos"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-6 rounded-2xl border border-blue-200 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-800 mb-4",children:"Investimentos Gerais"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-900 mb-4",children:["R$ ",(d*.05).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between text-sm font-medium text-blue-700 mb-1",children:[e.jsx("span",{children:"Meta"}),e.jsxs("span",{children:[(d*.05/2e3*100).toFixed(0),"%"]})]}),e.jsxs("div",{className:"w-full bg-blue-200 rounded-full h-2 relative",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(100,d*.05/2e3*100)}%`}}),d*.05/2e3*100>100&&e.jsx("div",{className:"absolute top-0 left-0 bg-gradient-to-r from-blue-700 to-blue-900 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(100,d*.05/2e3*100-100)}%`}})]})]}),e.jsxs("div",{className:"text-sm text-blue-700 font-medium",children:["R$ ",(d*.05).toLocaleString("pt-BR",{minimumFractionDigits:2})," / R$ ",Math.max(0,2e3-d*.05).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-6 rounded-2xl border border-purple-200 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-bold text-purple-800 mb-4",children:"Investimentos em MKT"}),e.jsxs("div",{className:"text-2xl font-bold text-purple-900 mb-4",children:["R$ ",(c*.1).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between text-sm font-medium text-purple-700 mb-1",children:[e.jsx("span",{children:"Meta"}),e.jsxs("span",{children:[(c*.1/3e3*100).toFixed(0),"%"]})]}),e.jsxs("div",{className:"w-full bg-purple-200 rounded-full h-2 relative",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(100,c*.1/3e3*100)}%`}}),c*.1/3e3*100>100&&e.jsx("div",{className:"absolute top-0 left-0 bg-gradient-to-r from-purple-700 to-purple-900 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(100,c*.1/3e3*100-100)}%`}})]})]}),e.jsxs("div",{className:"text-sm text-purple-700 font-medium",children:["R$ ",(c*.1).toLocaleString("pt-BR",{minimumFractionDigits:2})," / R$ ",Math.max(0,3e3-c*.1).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})]})]})},Xs=(t,s,a,r=31970.5)=>e.jsxs("div",{className:"space-y-6 mb-12",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-400 to-orange-400 p-6 rounded-2xl shadow-lg",children:e.jsxs("h2",{className:"text-3xl font-bold text-white text-center uppercase tracking-wider",children:[t," - 2025"]})}),hs(t,s,a,r)]},t),Zs=()=>{const s=E.filter(d=>new Date(d.date).getFullYear()===2025),a=s.filter(d=>d.type==="Receita").reduce((d,u)=>d+u.value,0),r=s.filter(d=>d.type==="Despesa").reduce((d,u)=>d+u.value,0),x=[18500,19200,20100,19800,20500,21e3,21500,22e3,21889.17,23e3,25e3,28e3].reduce((d,u)=>d+u,0),c=31970.5;return e.jsxs("div",{className:"space-y-6 mb-12",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-600 p-8 rounded-2xl shadow-xl",children:e.jsx("h2",{className:"text-4xl font-bold text-white text-center uppercase tracking-wider",children:"TOTAL DO ANO - 2025"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-3xl font-bold text-purple-800 flex items-center gap-3",children:[e.jsx(Mt,{className:"w-8 h-8 text-purple-600"}),"Resultado Anual"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-indigo-50 p-8 rounded-2xl shadow-lg border-2 border-purple-200",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center py-3 border-b-2 border-purple-200",children:[e.jsx("span",{className:"font-bold text-purple-800 text-lg",children:"REFOR√áO DE CAIXA"}),e.jsx("span",{className:"font-bold text-purple-900 text-lg",children:"R$ 0,00"})]}),e.jsxs("div",{className:"flex justify-between items-center py-3 border-b-2 border-purple-200",children:[e.jsx("span",{className:"font-bold text-purple-800 text-lg",children:"SA√çDA DE CAIXA"}),e.jsx("span",{className:"font-bold text-purple-900 text-lg",children:"R$ 0,00"})]}),e.jsxs("div",{className:"flex justify-between items-center py-3 border-b-2 border-purple-200",children:[e.jsx("span",{className:"font-bold text-emerald-700 text-lg",children:"RECEITA ANUAL"}),e.jsxs("span",{className:"font-bold text-emerald-800 text-lg",children:["R$ ",a.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex justify-between items-center py-3 border-b-2 border-purple-200",children:[e.jsx("span",{className:"font-bold text-red-700 text-lg",children:"DESPESA ANUAL"}),e.jsxs("span",{className:"font-bold text-red-800 text-lg",children:["-R$ ",r.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex justify-between items-center py-3 border-b-2 border-purple-200",children:[e.jsx("span",{className:"font-bold text-blue-700 text-lg",children:"SALDO INICIAL"}),e.jsxs("span",{className:"font-bold text-blue-800 text-lg",children:["R$ ",c.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex justify-between items-center py-6 bg-gradient-to-r from-purple-100 to-indigo-100 px-6 rounded-xl border-3 border-purple-400 mt-6",children:[e.jsx("span",{className:"font-bold text-purple-900 text-2xl",children:"Total Geral Anual"}),e.jsxs("span",{className:`font-bold text-2xl ${c+a-r>=0?"text-emerald-800":"text-red-800"}`,children:["R$ ",(c+a-r).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-indigo-50 p-8 rounded-2xl shadow-lg border-2 border-purple-200",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 pb-3 border-b-3 border-purple-400",children:[e.jsx("div",{className:"text-center",children:e.jsx("span",{className:"font-bold text-purple-700 text-xl"})}),e.jsx("div",{className:"text-center",children:e.jsx("span",{className:"font-bold text-purple-900 text-2xl",children:"R$"})}),e.jsx("div",{className:"text-center",children:e.jsx("span",{className:"font-bold text-purple-900 text-2xl",children:"%"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 py-4 border-b-2 border-purple-200",children:[e.jsx("div",{className:"font-bold text-purple-800 italic text-lg",children:"META ANUAL"}),e.jsxs("div",{className:"text-center font-bold text-purple-900 text-lg",children:["R$ ",x.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsx("div",{className:"text-center font-bold text-purple-900 text-lg",children:"100%"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 py-4 border-b-2 border-purple-200",children:[e.jsx("div",{className:"font-bold text-emerald-700 italic text-lg",children:"ALCAN√áADO"}),e.jsxs("div",{className:"text-center font-bold text-emerald-800 text-lg",children:["R$ ",a.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"text-center font-bold text-emerald-800 text-lg",children:[x>0?(a/x*100).toFixed(0):0,"%"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 py-4",children:[e.jsx("div",{className:"font-bold text-red-700 italic text-lg",children:"RESTANTE"}),e.jsxs("div",{className:"text-center font-bold text-red-800 text-lg",children:["-R$ ",Math.max(0,x-a).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"text-center font-bold text-red-800 text-lg",children:[x>0?Math.max(0,100-a/x*100).toFixed(0):100,"%"]})]})]})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-3xl font-bold text-emerald-800 flex items-center gap-3",children:[e.jsx(Jt,{className:"w-8 h-8 text-emerald-600"}),"Faturamento Anual"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-emerald-100 to-emerald-200 p-8 rounded-2xl border-2 border-emerald-300 shadow-xl",children:[e.jsx("h3",{className:"text-xl font-bold text-emerald-900 mb-6",children:"Faturamento TOTAL ANUAL"}),e.jsxs("div",{className:"text-3xl font-bold text-emerald-900 mb-4",children:["R$ ",a.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between text-sm font-medium text-emerald-800 mb-1",children:[e.jsx("span",{children:"Progresso Anual"}),e.jsxs("span",{children:[(a/36e4*100).toFixed(0),"%"]})]}),e.jsxs("div",{className:"w-full bg-emerald-300 rounded-full h-3 relative",children:[e.jsx("div",{className:"bg-gradient-to-r from-emerald-600 to-emerald-700 h-3 rounded-full transition-all duration-300",style:{width:`${Math.min(100,a/36e4*100)}%`}}),a/36e4*100>100&&e.jsx("div",{className:"absolute top-0 left-0 bg-gradient-to-r from-emerald-800 to-emerald-900 h-3 rounded-full transition-all duration-300",style:{width:`${Math.min(100,a/36e4*100-100)}%`}})]})]}),e.jsxs("div",{className:"text-sm text-emerald-800 font-medium",children:["R$ ",a.toLocaleString("pt-BR",{minimumFractionDigits:2})," / R$ ",Math.max(0,36e4-a).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-100 to-green-200 p-8 rounded-2xl border-2 border-green-300 shadow-xl",children:[e.jsx("h3",{className:"text-xl font-bold text-green-900 mb-6",children:"Faturamento Varejo Anual"}),e.jsxs("div",{className:"text-3xl font-bold text-green-900 mb-4",children:["R$ ",(a*.6).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between text-sm font-medium text-green-800 mb-1",children:[e.jsx("span",{children:"Progresso Anual"}),e.jsxs("span",{children:[(a*.6/216e3*100).toFixed(0),"%"]})]}),e.jsxs("div",{className:"w-full bg-green-300 rounded-full h-3 relative",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-600 to-green-700 h-3 rounded-full transition-all duration-300",style:{width:`${Math.min(100,a*.6/216e3*100)}%`}}),a*.6/216e3*100>100&&e.jsx("div",{className:"absolute top-0 left-0 bg-gradient-to-r from-green-800 to-green-900 h-3 rounded-full transition-all duration-300",style:{width:`${Math.min(100,a*.6/216e3*100-100)}%`}})]})]}),e.jsxs("div",{className:"text-sm text-green-800 font-medium",children:["R$ ",(a*.6).toLocaleString("pt-BR",{minimumFractionDigits:2})," / R$ ",Math.max(0,216e3-a*.6).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-teal-100 to-teal-200 p-8 rounded-2xl border-2 border-teal-300 shadow-xl",children:[e.jsx("h3",{className:"text-xl font-bold text-teal-900 mb-6",children:"Faturamento Atacado Anual"}),e.jsxs("div",{className:"text-3xl font-bold text-teal-900 mb-4",children:["R$ ",(a*.3).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between text-sm font-medium text-teal-800 mb-1",children:[e.jsx("span",{children:"Progresso Anual"}),e.jsxs("span",{children:[(a*.3/144e3*100).toFixed(0),"%"]})]}),e.jsxs("div",{className:"w-full bg-teal-300 rounded-full h-3 relative",children:[e.jsx("div",{className:"bg-gradient-to-r from-teal-600 to-teal-700 h-3 rounded-full transition-all duration-300",style:{width:`${Math.min(100,a*.3/144e3*100)}%`}}),a*.3/144e3*100>100&&e.jsx("div",{className:"absolute top-0 left-0 bg-gradient-to-r from-teal-800 to-teal-900 h-3 rounded-full transition-all duration-300",style:{width:`${Math.min(100,a*.3/144e3*100-100)}%`}})]})]}),e.jsxs("div",{className:"text-sm text-teal-800 font-medium",children:["R$ ",(a*.3).toLocaleString("pt-BR",{minimumFractionDigits:2})," / R$ ",Math.max(0,144e3-a*.3).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-3xl font-bold text-red-800 flex items-center gap-3",children:[e.jsx(Rt,{className:"w-8 h-8 text-red-600"}),"Despesas Anuais"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-red-100 to-red-200 p-8 rounded-2xl border-2 border-red-300 shadow-xl",children:[e.jsx("h3",{className:"text-xl font-bold text-red-900 mb-6",children:"Despesas TOTAL Anuais"}),e.jsxs("div",{className:"text-3xl font-bold text-red-900 mb-4",children:["R$ ",r.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between text-sm font-medium text-red-800 mb-1",children:[e.jsx("span",{children:"Limite Anual"}),e.jsxs("span",{children:[(r/18e4*100).toFixed(0),"%"]})]}),e.jsxs("div",{className:"w-full bg-red-300 rounded-full h-3 relative",children:[e.jsx("div",{className:"bg-gradient-to-r from-red-600 to-red-700 h-3 rounded-full transition-all duration-300",style:{width:`${Math.min(100,r/18e4*100)}%`}}),r/18e4*100>100&&e.jsx("div",{className:"absolute top-0 left-0 bg-gradient-to-r from-red-800 to-red-900 h-3 rounded-full transition-all duration-300",style:{width:`${Math.min(100,r/18e4*100-100)}%`}})]})]}),e.jsxs("div",{className:"text-sm text-red-800 font-medium",children:["R$ ",r.toLocaleString("pt-BR",{minimumFractionDigits:2})," / R$ ",Math.max(0,18e4-r).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-100 to-orange-200 p-8 rounded-2xl border-2 border-orange-300 shadow-xl",children:[e.jsx("h3",{className:"text-xl font-bold text-orange-900 mb-6",children:"Despesas Vari√°veis Anuais"}),e.jsxs("div",{className:"text-3xl font-bold text-orange-900 mb-4",children:["R$ ",(r*.7).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between text-sm font-medium text-orange-800 mb-1",children:[e.jsx("span",{children:"Limite Anual"}),e.jsxs("span",{children:[(r*.7/126e3*100).toFixed(0),"%"]})]}),e.jsxs("div",{className:"w-full bg-orange-300 rounded-full h-3 relative",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-orange-700 h-3 rounded-full transition-all duration-300",style:{width:`${Math.min(100,r*.7/126e3*100)}%`}}),r*.7/126e3*100>100&&e.jsx("div",{className:"absolute top-0 left-0 bg-gradient-to-r from-orange-800 to-orange-900 h-3 rounded-full transition-all duration-300",style:{width:`${Math.min(100,r*.7/126e3*100-100)}%`}})]})]}),e.jsxs("div",{className:"text-sm text-orange-800 font-medium",children:["R$ ",(r*.7).toLocaleString("pt-BR",{minimumFractionDigits:2})," / R$ ",Math.max(0,126e3-r*.7).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-100 to-amber-200 p-8 rounded-2xl border-2 border-amber-300 shadow-xl",children:[e.jsx("h3",{className:"text-xl font-bold text-amber-900 mb-6",children:"Despesas Fixas Anuais"}),e.jsxs("div",{className:"text-3xl font-bold text-amber-900 mb-4",children:["R$ ",(r*.25).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between text-sm font-medium text-amber-800 mb-1",children:[e.jsx("span",{children:"Limite Anual"}),e.jsxs("span",{children:[(r*.25/54e3*100).toFixed(0),"%"]})]}),e.jsxs("div",{className:"w-full bg-amber-300 rounded-full h-3 relative",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-600 to-amber-700 h-3 rounded-full transition-all duration-300",style:{width:`${Math.min(100,r*.25/54e3*100)}%`}}),r*.25/54e3*100>100&&e.jsx("div",{className:"absolute top-0 left-0 bg-gradient-to-r from-amber-800 to-amber-900 h-3 rounded-full transition-all duration-300",style:{width:`${Math.min(100,r*.25/54e3*100-100)}%`}})]})]}),e.jsxs("div",{className:"text-sm text-amber-800 font-medium",children:["R$ ",(r*.25).toLocaleString("pt-BR",{minimumFractionDigits:2})," / R$ ",Math.max(0,54e3-r*.25).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-3xl font-bold text-indigo-800 flex items-center gap-3",children:[e.jsx(ct,{className:"w-8 h-8 text-indigo-600"}),"Investimentos Anuais"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-100 to-blue-200 p-8 rounded-2xl border-2 border-blue-300 shadow-xl",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-900 mb-6",children:"Investimentos Gerais Anuais"}),e.jsxs("div",{className:"text-3xl font-bold text-blue-900 mb-4",children:["R$ ",(r*.05).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between text-sm font-medium text-blue-800 mb-1",children:[e.jsx("span",{children:"Meta Anual"}),e.jsxs("span",{children:[(r*.05/24e3*100).toFixed(0),"%"]})]}),e.jsxs("div",{className:"w-full bg-blue-300 rounded-full h-3 relative",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 h-3 rounded-full transition-all duration-300",style:{width:`${Math.min(100,r*.05/24e3*100)}%`}}),r*.05/24e3*100>100&&e.jsx("div",{className:"absolute top-0 left-0 bg-gradient-to-r from-blue-800 to-blue-900 h-3 rounded-full transition-all duration-300",style:{width:`${Math.min(100,r*.05/24e3*100-100)}%`}})]})]}),e.jsxs("div",{className:"text-sm text-blue-800 font-medium",children:["R$ ",(r*.05).toLocaleString("pt-BR",{minimumFractionDigits:2})," / R$ ",Math.max(0,24e3-r*.05).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-100 to-purple-200 p-8 rounded-2xl border-2 border-purple-300 shadow-xl",children:[e.jsx("h3",{className:"text-xl font-bold text-purple-900 mb-6",children:"Investimentos MKT Anuais"}),e.jsxs("div",{className:"text-3xl font-bold text-purple-900 mb-4",children:["R$ ",(a*.1).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between text-sm font-medium text-purple-800 mb-1",children:[e.jsx("span",{children:"Meta Anual"}),e.jsxs("span",{children:[(a*.1/36e3*100).toFixed(0),"%"]})]}),e.jsxs("div",{className:"w-full bg-purple-300 rounded-full h-3 relative",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-700 h-3 rounded-full transition-all duration-300",style:{width:`${Math.min(100,a*.1/36e3*100)}%`}}),a*.1/36e3*100>100&&e.jsx("div",{className:"absolute top-0 left-0 bg-gradient-to-r from-purple-800 to-purple-900 h-3 rounded-full transition-all duration-300",style:{width:`${Math.min(100,a*.1/36e3*100-100)}%`}})]})]}),e.jsxs("div",{className:"text-sm text-purple-800 font-medium",children:["R$ ",(a*.1).toLocaleString("pt-BR",{minimumFractionDigits:2})," / R$ ",Math.max(0,36e3-a*.1).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})]})]})},ea=async()=>{try{ee(!1);const t=F?ps():E;if(t.length===0){alert("N√£o h√° transa√ß√µes para exportar!");return}let s=0,a=0,r=0;se&&(s=t.filter(g=>g.type==="Receita").reduce((g,N)=>g+N.value,0),a=t.filter(g=>g.type==="Despesa").reduce((g,N)=>g+N.value,0),r=s-a);const n=document.createElement("div");n.style.position="absolute",n.style.left="-9999px",n.style.top="-9999px",n.style.width="800px",n.style.backgroundColor="white",n.style.padding="20px",n.style.fontFamily="Arial, sans-serif";let x="Todas as transa√ß√µes";if(F){const g=[];A.type&&g.push(`Tipo: ${A.type}`),A.category&&g.push(`Categoria: ${A.category}`),A.dateFrom&&g.push(`De: ${new Date(A.dateFrom).toLocaleDateString("pt-BR")}`),A.dateTo&&g.push(`At√©: ${new Date(A.dateTo).toLocaleDateString("pt-BR")}`),g.length>0?x=`Transa√ß√µes filtradas: ${g.join(", ")}`:x="Todas as transa√ß√µes (sem filtros ativos)"}let c=`
        <div style="text-align: center; margin-bottom: 30px;">
          <h1 style="color: #f59e0b; font-size: 28px; margin: 0; font-weight: bold;">ALYA VELAS</h1>
          <h2 style="color: #374151; font-size: 24px; margin: 10px 0; font-weight: bold;">Relat√≥rio de Transa√ß√µes</h2>
          <p style="color: #6b7280; font-size: 14px; margin: 5px 0;">${x}</p>
          <p style="color: #6b7280; font-size: 14px; margin: 0;">Gerado em ${new Date().toLocaleDateString("pt-BR")} √†s ${new Date().toLocaleTimeString("pt-BR")}</p>
        </div>
      `;se&&(c+=`
          <div style="margin-bottom: 30px;">
            <h3 style="color: #f59e0b; font-size: 20px; margin-bottom: 15px; border-bottom: 2px solid #f59e0b; padding-bottom: 5px;">üìä Resumo Executivo</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
              <div style="background: #f0fdf4; padding: 15px; border-radius: 8px; border-left: 4px solid #10b981;">
                <div style="font-weight: bold; color: #10b981; margin-bottom: 5px;">Total de Receitas</div>
                <div style="font-size: 18px; font-weight: bold; color: #059669;">R$ ${s.toLocaleString("pt-BR",{minimumFractionDigits:2})}</div>
              </div>
              <div style="background: #fef2f2; padding: 15px; border-radius: 8px; border-left: 4px solid #ef4444;">
                <div style="font-weight: bold; color: #ef4444; margin-bottom: 5px;">Total de Despesas</div>
                <div style="font-size: 18px; font-weight: bold; color: #dc2626;">R$ ${a.toLocaleString("pt-BR",{minimumFractionDigits:2})}</div>
              </div>
              <div style="background: ${r>=0?"#f0fdf4":"#fef2f2"}; padding: 15px; border-radius: 8px; border-left: 4px solid ${r>=0?"#10b981":"#ef4444"};">
                <div style="font-weight: bold; color: ${r>=0?"#10b981":"#ef4444"}; margin-bottom: 5px;">Saldo</div>
                <div style="font-size: 18px; font-weight: bold; color: ${r>=0?"#059669":"#dc2626"};">R$ ${r.toLocaleString("pt-BR",{minimumFractionDigits:2})}</div>
              </div>
              <div style="background: #fffbeb; padding: 15px; border-radius: 8px; border-left: 4px solid #f59e0b;">
                <div style="font-weight: bold; color: #f59e0b; margin-bottom: 5px;">Quantidade de Transa√ß√µes</div>
                <div style="font-size: 18px; font-weight: bold; color: #d97706;">${t.length}</div>
              </div>
            </div>
          </div>
        `),c+=`
        <div style="margin-bottom: 30px;">
          <h3 style="color: #f59e0b; font-size: 20px; margin-bottom: 15px; border-bottom: 2px solid #f59e0b; padding-bottom: 5px;">üìã Lista de Transa√ß√µes</h3>
          <div style="overflow-x: auto;">
            <table style="width: 100%; border-collapse: collapse; background: white;">
              <thead>
                <tr style="background: linear-gradient(to right, #fef3c7, #fed7aa); border-bottom: 2px solid #f59e0b;">
                  <th style="padding: 12px; text-align: left; font-weight: bold; color: #92400e; border-right: 1px solid #fbbf24;">Data</th>
                  <th style="padding: 12px; text-align: left; font-weight: bold; color: #92400e; border-right: 1px solid #fbbf24;">Descri√ß√£o</th>
                  <th style="padding: 12px; text-align: center; font-weight: bold; color: #92400e; border-right: 1px solid #fbbf24;">Tipo</th>
                  <th style="padding: 12px; text-align: left; font-weight: bold; color: #92400e; border-right: 1px solid #fbbf24;">Categoria</th>
                  <th style="padding: 12px; text-align: right; font-weight: bold; color: #92400e;">Valor</th>
                </tr>
              </thead>
              <tbody>
      `,t.forEach((g,N)=>{const v=new Date(g.date).toLocaleDateString("pt-BR"),T=g.value.toLocaleString("pt-BR",{minimumFractionDigits:2}),H=g.type==="Receita"?"#10b981":"#ef4444",oe=g.type==="Receita"?"#f0fdf4":"#fef2f2",m=g.type==="Receita"?"#059669":"#dc2626",B=g.type==="Receita"?"+":"-",Se=N%2===0?"#ffffff":"#f9fafb";c+=`
          <tr style="background: ${Se}; border-bottom: 1px solid #e5e7eb;">
            <td style="padding: 10px; color: #374151;">${v}</td>
            <td style="padding: 10px; color: #374151; font-weight: 500;">${g.description}</td>
            <td style="padding: 10px; text-align: center;">
              <span style="background: ${oe}; color: ${H}; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold;">
                ${g.type}
              </span>
            </td>
            <td style="padding: 10px; color: #6b7280;">${g.category}</td>
            <td style="padding: 10px; text-align: right; font-weight: bold; color: ${m};">
              ${B}R$ ${T}
            </td>
          </tr>
        `}),c+=`
              </tbody>
            </table>
          </div>
        </div>
      `,c+=`
        <div style="text-align: center; margin-top: 40px; padding-top: 20px; border-top: 2px solid #e2e8f0;">
          <p style="color: #6b7280; font-size: 12px; margin: 0;">
            Relat√≥rio gerado automaticamente pelo sistema Alya Velas<br>
            Dados baseados em transa√ß√µes ${F?"filtradas":"completas"}<br>
            Para mais informa√ß√µes, acesse o painel administrativo
          </p>
        </div>
      `,n.innerHTML=c,document.body.appendChild(n);const d=await St(n,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"});document.body.removeChild(n);const u=d.toDataURL("image/png"),p=new $t("p","mm","a4"),C=210,te=295,q=d.height*C/d.width;let V=q,be=0;for(p.addImage(u,"PNG",0,be,C,q),V-=te;V>=0;)be=V-q,p.addPage(),p.addImage(u,"PNG",0,be,C,q),V-=te;const R=`Transacoes_${F?"Filtradas":"Completas"}_${new Date().toISOString().split("T")[0]}.pdf`;p.save(R),alert(`‚úÖ Relat√≥rio PDF exportado com sucesso!
Arquivo: ${R}

üìä Dados inclu√≠dos:
‚Ä¢ Total de transa√ß√µes: ${t.length}${se?`
‚Ä¢ Total de Receitas: R$ ${s.toLocaleString("pt-BR",{minimumFractionDigits:2})}
‚Ä¢ Total de Despesas: R$ ${a.toLocaleString("pt-BR",{minimumFractionDigits:2})}
‚Ä¢ Saldo: R$ ${r.toLocaleString("pt-BR",{minimumFractionDigits:2})}`:""}`)}catch(t){console.error("Erro ao exportar PDF:",t),alert("‚ùå Erro ao exportar PDF. Tente novamente.")}},ta=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[e.jsx(st,{className:"w-8 h-8 text-green-600"}),"Transa√ß√µes"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>ee(!0),className:"flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-amber-500 to-orange-600 text-white font-semibold rounded-xl hover:from-amber-600 hover:to-orange-700 shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300",children:[e.jsx(De,{className:"h-5 w-5"}),"Exportar PDF"]}),e.jsxs("button",{onClick:()=>{z("transactions"),o(!0)},className:"flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-amber-400 to-orange-400 text-white font-semibold rounded-xl hover:from-amber-500 hover:to-orange-500 shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300",children:[e.jsx(De,{className:"h-5 w-5"}),"Importar/Exportar"]}),e.jsxs("button",{onClick:()=>ke(!0),className:"flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-amber-400 to-orange-400 text-white font-semibold rounded-xl hover:from-amber-500 hover:to-orange-500 shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300",children:[e.jsx(Dt,{className:"h-5 w-5"}),"Nova Transa√ß√£o"]})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 p-4 rounded-lg border border-amber-200 shadow-sm",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-4 lg:gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ss,{className:"w-5 h-5 text-amber-600"}),e.jsx("h2",{className:"text-lg font-bold text-gray-800 uppercase tracking-wide",children:"FILTRE SEUS ITENS:"})]}),e.jsxs("div",{className:"flex items-end gap-1 sm:gap-2 md:gap-3 lg:gap-4 flex-1",children:[e.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[e.jsx("label",{className:"text-xs sm:text-xs sm:text-sm font-semibold text-gray-700 mb-1 truncate truncate",children:"Tipo"}),e.jsxs("select",{value:A.type,onChange:t=>xt(s=>({...s,type:t.target.value,category:""})),className:"px-1 sm:px-2 md:px-3 py-1 sm:py-2 border border-amber-300 rounded-md text-xs sm:text-sm focus:ring-2 focus:ring-amber-500 focus:border-amber-500 bg-white w-full",children:[e.jsx("option",{value:"",children:"Todos os tipos"}),e.jsx("option",{value:"Receita",children:"Receitas"}),e.jsx("option",{value:"Despesa",children:"Despesas"})]})]}),e.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[e.jsx("label",{className:"text-xs sm:text-xs sm:text-sm font-semibold text-gray-700 mb-1 truncate truncate",children:"Categoria"}),e.jsxs("select",{value:A.category,onChange:t=>xt(s=>({...s,category:t.target.value})),className:"px-1 sm:px-2 md:px-3 py-1 sm:py-2 border border-amber-300 rounded-md text-xs sm:text-sm focus:ring-2 focus:ring-amber-500 focus:border-amber-500 bg-white w-full",children:[e.jsx("option",{value:"",children:"Todas as categorias"}),A.type?Ut(A.type).map(t=>e.jsx("option",{value:t,children:t},t)):e.jsxs(e.Fragment,{children:[e.jsx("optgroup",{label:"Receita",children:Ut("Receita").map(t=>e.jsx("option",{value:t,children:t},t))}),e.jsx("optgroup",{label:"Despesa",children:Ut("Despesa").map(t=>e.jsx("option",{value:t,children:t},t))})]})]})]}),e.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[e.jsx("label",{className:"text-xs sm:text-xs sm:text-sm font-semibold text-gray-700 mb-1 truncate truncate",children:"Data In√≠cio"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"In√≠cio",value:A.dateFrom?Kt(A.dateFrom):"",readOnly:!0,onClick:ks,className:"px-1 sm:px-2 md:px-3 py-1 sm:py-2 border border-amber-300 rounded-md text-xs sm:text-sm focus:ring-2 focus:ring-amber-500 focus:border-amber-500 bg-white cursor-pointer w-full"}),e.jsx(ht,{className:"absolute right-1 sm:right-2 md:right-3 top-1/2 transform -translate-y-1/2 w-3 h-3 sm:w-4 sm:h-4 text-amber-600 pointer-events-none"}),Ot&&Js()]})]}),e.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[e.jsx("label",{className:"text-xs sm:text-xs sm:text-sm font-semibold text-gray-700 mb-1 truncate truncate",children:"Data Fim"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Fim",value:A.dateTo?Kt(A.dateTo):"",readOnly:!0,onClick:Fs,className:"px-1 sm:px-2 md:px-3 py-1 sm:py-2 border border-amber-300 rounded-md text-xs sm:text-sm focus:ring-2 focus:ring-amber-500 focus:border-amber-500 bg-white cursor-pointer w-full"}),e.jsx(ht,{className:"absolute right-1 sm:right-2 md:right-3 top-1/2 transform -translate-y-1/2 w-3 h-3 sm:w-4 sm:h-4 text-amber-600 pointer-events-none"}),zt&&Ys()]})]})]}),e.jsx("div",{className:"lg:ml-auto",children:e.jsx("button",{onClick:qs,className:"px-2 sm:px-3 md:px-4 py-1 sm:py-2 bg-amber-600 text-white rounded-md text-xs sm:text-sm hover:bg-amber-700 transition-colors w-full lg:w-auto",children:"Limpar Filtros"})})]})}),e.jsx("div",{className:"space-y-4",children:E.length===0?e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-8 text-center",children:[e.jsx("p",{className:"text-gray-600",children:"Nenhuma transa√ß√£o encontrada."}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:'Adicione sua primeira transa√ß√£o clicando no bot√£o "Nova Transa√ß√£o".'})]}):e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-100 border-b border-amber-200 p-4",children:e.jsxs("div",{className:"flex items-center gap-0.5 sm:gap-1 md:gap-2 lg:gap-3",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("input",{type:"checkbox",checked:E.length>0&&he.size===E.length,onChange:zs,className:"w-4 h-4 text-amber-600 bg-gray-100 border-gray-300 rounded focus:ring-amber-500 focus:ring-2"})}),e.jsxs("button",{onClick:()=>qe("date"),className:"flex items-center justify-center gap-1 hover:bg-amber-100 rounded px-1 sm:px-2 py-1 transition-colors flex-shrink-0 w-20 sm:w-24",children:[e.jsx("p",{className:"text-xs sm:text-sm font-bold text-amber-800 uppercase tracking-wide truncate",children:"Data"}),Ve("date")]}),e.jsxs("button",{onClick:()=>qe("description"),className:"flex items-center justify-center gap-1 hover:bg-amber-100 rounded px-1 sm:px-2 py-1 transition-colors flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-bold text-amber-800 uppercase tracking-wide truncate",children:"Descri√ß√£o"}),Ve("description")]}),e.jsxs("button",{onClick:()=>qe("type"),className:"flex items-center justify-center gap-1 hover:bg-amber-100 rounded px-1 sm:px-2 py-1 transition-colors flex-shrink-0 w-16 sm:w-20",children:[e.jsx("p",{className:"text-xs sm:text-sm font-bold text-amber-800 uppercase tracking-wide",children:"Tipo"}),Ve("type")]}),e.jsxs("button",{onClick:()=>qe("category"),className:"flex items-center justify-center gap-1 hover:bg-amber-100 rounded px-1 sm:px-2 py-1 transition-colors flex-shrink-0 w-20 sm:w-24",children:[e.jsx("p",{className:"text-xs sm:text-sm font-bold text-amber-800 uppercase tracking-wide truncate",children:"Categoria"}),Ve("category")]}),e.jsxs("button",{onClick:()=>qe("value"),className:"flex items-center justify-center gap-1 hover:bg-amber-100 rounded px-1 sm:px-2 py-1 transition-colors flex-shrink-0 w-20 sm:w-24",children:[e.jsx("p",{className:"text-xs sm:text-sm font-bold text-amber-800 uppercase tracking-wide",children:"Valor"}),Ve("value")]}),e.jsx("div",{className:"flex-shrink-0 w-16 sm:w-20 flex justify-center",children:e.jsx("p",{className:"text-xs sm:text-sm font-bold text-amber-800 uppercase tracking-wide",children:"A√ß√µes"})})]})}),ps().map((t,s)=>e.jsx("div",{className:`bg-white border-b border-gray-100 p-4 hover:bg-amber-50/30 transition-all duration-200 ${s===E.length-1?"border-b-0":""}`,children:e.jsxs("div",{className:"flex items-center gap-0.5 sm:gap-1 md:gap-2 lg:gap-3",children:[e.jsx("div",{className:"flex-shrink-0 text-left",children:e.jsx("input",{type:"checkbox",checked:he.has(t.id),onChange:()=>Os(t.id),className:"w-3 h-3 sm:w-4 sm:h-4 text-amber-600 bg-gray-100 border-gray-300 rounded focus:ring-amber-500 focus:ring-2"})}),e.jsx("div",{className:"flex-shrink-0 w-20 sm:w-24 text-left",children:e.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-900 truncate",children:new Date(t.date).toLocaleDateString("pt-BR")})}),e.jsx("div",{className:"flex-1 min-w-0 text-left",children:e.jsx("h3",{className:"text-xs sm:text-sm font-semibold text-gray-900 truncate",children:t.description})}),e.jsx("div",{className:"flex-shrink-0 w-16 sm:w-20 text-center",children:e.jsx("span",{className:`px-0.5 sm:px-1 py-0.5 rounded-full text-xs font-medium ${t.type==="Receita"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.type})}),e.jsx("div",{className:"flex-shrink-0 w-20 sm:w-24 text-center",children:e.jsx("span",{className:"text-xs sm:text-sm text-gray-600 bg-gray-50 px-0.5 sm:px-1 py-0.5 rounded-md truncate",children:t.category})}),e.jsx("div",{className:"flex-shrink-0 w-20 sm:w-24 text-center",children:e.jsxs("p",{className:`text-xs sm:text-sm md:text-lg font-bold ${t.type==="Receita"?"text-green-600":"text-red-600"} truncate`,children:[t.type==="Receita"?"+":"-","R$ ",t.value.toLocaleString("pt-BR",{minimumFractionDigits:2})]})}),e.jsxs("div",{className:"flex-shrink-0 w-16 sm:w-20 flex gap-0.5 sm:gap-1 justify-center",children:[e.jsx("button",{onClick:()=>Gs(t),className:"p-0.5 sm:p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-full transition-all duration-200",title:"Editar transa√ß√£o",children:e.jsx(as,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3"})}),e.jsx("button",{onClick:async()=>{if(confirm("Tem certeza que deseja excluir esta transa√ß√£o?"))try{await I(t.id)&&Ce(r=>r.filter(n=>n.id!==t.id))}catch(a){console.error("Erro ao deletar transa√ß√£o:",a)}},className:"p-0.5 sm:p-1 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-full transition-all duration-200",title:"Excluir transa√ß√£o",children:e.jsx(Ct,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3"})})]})]})},t.id)),he.size>0&&e.jsx("div",{className:"flex justify-end p-4 bg-red-50 border-t border-red-200",children:e.jsxs("button",{onClick:Is,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:[e.jsx(Ct,{className:"h-4 w-4"}),"Deletar Selecionada",he.size>1?"s":""," (",he.size,")"]})})]})})]}),sa=async()=>{try{We(!1);const t=Ye?gs():O;if(t.length===0){alert("N√£o h√° produtos para exportar!");return}let s=t.length,a=0,r=0,n=0,x=0,c=0,d=0,u=0,p={};Ge&&(t.forEach(m=>{if(a+=m.price*m.stock,r+=m.cost*m.stock,c+=m.sold,m.stock>0?d++:u++,p[m.category]=(p[m.category]||0)+1,m.price>0){const B=(m.price-m.cost)/m.price*100;x+=B}}),n=a-r,x=t.length>0?x/t.length:0);const C=document.createElement("div");C.style.position="absolute",C.style.left="-9999px",C.style.top="-9999px",C.style.width="800px",C.style.backgroundColor="white",C.style.padding="20px",C.style.fontFamily="Arial, sans-serif";let te="Todos os produtos";if(Ye){const m=[];G.category&&m.push(`Categoria: ${G.category}`),G.stockFilter==="inStock"&&m.push("Em estoque"),G.stockFilter==="outOfStock"&&m.push("Sem estoque"),G.soldFilter==="sold"&&m.push("Vendidos"),G.soldFilter==="notSold"&&m.push("N√£o vendidos"),G.costFilter==="withCost"&&m.push("Com pre√ßo de custo"),G.costFilter==="withoutCost"&&m.push("Sem pre√ßo de custo"),m.length>0?te=`Produtos filtrados: ${m.join(", ")}`:te="Todos os produtos (sem filtros ativos)"}let q=`
        <div style="text-align: center; margin-bottom: 30px;">
          <h1 style="color: #f59e0b; font-size: 28px; margin: 0; font-weight: bold;">ALYA VELAS</h1>
          <h2 style="color: #374151; font-size: 24px; margin: 10px 0; font-weight: bold;">Relat√≥rio de Produtos</h2>
          <p style="color: #6b7280; font-size: 14px; margin: 5px 0;">${te}</p>
          <p style="color: #6b7280; font-size: 14px; margin: 0;">Gerado em ${new Date().toLocaleDateString("pt-BR")} √†s ${new Date().toLocaleTimeString("pt-BR")}</p>
        </div>
      `;Ge&&(q+=`
          <div style="margin-bottom: 30px;">
            <h3 style="color: #f59e0b; font-size: 20px; margin-bottom: 15px; border-bottom: 2px solid #f59e0b; padding-bottom: 5px;">üìä Resumo Estat√≠stico</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
              <div style="background: #fffbeb; padding: 15px; border-radius: 8px; border-left: 4px solid #f59e0b;">
                <div style="font-weight: bold; color: #f59e0b; margin-bottom: 5px;">Total de Produtos</div>
                <div style="font-size: 18px; font-weight: bold; color: #d97706;">${s}</div>
              </div>
              <div style="background: #f0fdf4; padding: 15px; border-radius: 8px; border-left: 4px solid #10b981;">
                <div style="font-weight: bold; color: #10b981; margin-bottom: 5px;">Valor Total do Estoque</div>
                <div style="font-size: 18px; font-weight: bold; color: #059669;">R$ ${a.toLocaleString("pt-BR",{minimumFractionDigits:2})}</div>
              </div>
              <div style="background: #fef2f2; padding: 15px; border-radius: 8px; border-left: 4px solid #ef4444;">
                <div style="font-weight: bold; color: #ef4444; margin-bottom: 5px;">Custo Total do Estoque</div>
                <div style="font-size: 18px; font-weight: bold; color: #dc2626;">R$ ${r.toLocaleString("pt-BR",{minimumFractionDigits:2})}</div>
              </div>
              <div style="background: ${n>=0?"#f0fdf4":"#fef2f2"}; padding: 15px; border-radius: 8px; border-left: 4px solid ${n>=0?"#10b981":"#ef4444"};">
                <div style="font-weight: bold; color: ${n>=0?"#10b981":"#ef4444"}; margin-bottom: 5px;">Lucro Potencial</div>
                <div style="font-size: 18px; font-weight: bold; color: ${n>=0?"#059669":"#dc2626"};">R$ ${n.toLocaleString("pt-BR",{minimumFractionDigits:2})}</div>
              </div>
              <div style="background: #fffbeb; padding: 15px; border-radius: 8px; border-left: 4px solid #f59e0b;">
                <div style="font-weight: bold; color: #f59e0b; margin-bottom: 5px;">Margem de Lucro M√©dia</div>
                <div style="font-size: 18px; font-weight: bold; color: #d97706;">${x.toFixed(1)}%</div>
              </div>
              <div style="background: #eff6ff; padding: 15px; border-radius: 8px; border-left: 4px solid #3b82f6;">
                <div style="font-weight: bold; color: #3b82f6; margin-bottom: 5px;">Total Vendidos</div>
                <div style="font-size: 18px; font-weight: bold; color: #2563eb;">${c}</div>
              </div>
              <div style="background: #f0fdf4; padding: 15px; border-radius: 8px; border-left: 4px solid #10b981;">
                <div style="font-weight: bold; color: #10b981; margin-bottom: 5px;">Em Estoque</div>
                <div style="font-size: 18px; font-weight: bold; color: #059669;">${d}</div>
              </div>
              <div style="background: #fef2f2; padding: 15px; border-radius: 8px; border-left: 4px solid #ef4444;">
                <div style="font-weight: bold; color: #ef4444; margin-bottom: 5px;">Sem Estoque</div>
                <div style="font-size: 18px; font-weight: bold; color: #dc2626;">${u}</div>
              </div>
            </div>
            
            ${Object.keys(p).length>0?`
              <div style="background: #f8fafc; padding: 15px; border-radius: 8px; border: 1px solid #e2e8f0; margin-top: 15px;">
                <h4 style="color: #374151; font-size: 16px; margin-bottom: 10px; font-weight: bold;">Distribui√ß√£o por Categoria:</h4>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px;">
                  ${Object.entries(p).map(([m,B])=>`
                    <div style="text-align: center; padding: 8px; background: white; border-radius: 6px; border: 1px solid #e2e8f0;">
                      <div style="font-weight: bold; color: #f59e0b; font-size: 18px;">${B}</div>
                      <div style="font-size: 12px; color: #6b7280;">${m}</div>
                    </div>
                  `).join("")}
                </div>
              </div>
            `:""}
          </div>
        `),q+=`
        <div style="margin-bottom: 30px;">
          <h3 style="color: #f59e0b; font-size: 20px; margin-bottom: 15px; border-bottom: 2px solid #f59e0b; padding-bottom: 5px;">üì¶ Lista de Produtos</h3>
          <div style="overflow-x: auto;">
            <table style="width: 100%; border-collapse: collapse; background: white;">
              <thead>
                <tr style="background: linear-gradient(to right, #fef3c7, #fed7aa); border-bottom: 2px solid #f59e0b;">
                  <th style="padding: 12px; text-align: left; font-weight: bold; color: #92400e; border-right: 1px solid #fbbf24;">Nome</th>
                  <th style="padding: 12px; text-align: left; font-weight: bold; color: #92400e; border-right: 1px solid #fbbf24;">Categoria</th>
                  <th style="padding: 12px; text-align: right; font-weight: bold; color: #92400e; border-right: 1px solid #fbbf24;">Pre√ßo</th>
                  <th style="padding: 12px; text-align: right; font-weight: bold; color: #92400e; border-right: 1px solid #fbbf24;">Custo</th>
                  <th style="padding: 12px; text-align: center; font-weight: bold; color: #92400e; border-right: 1px solid #fbbf24;">Estoque</th>
                  <th style="padding: 12px; text-align: center; font-weight: bold; color: #92400e; border-right: 1px solid #fbbf24;">Vendidos</th>
                  <th style="padding: 12px; text-align: right; font-weight: bold; color: #92400e;">Margem</th>
                </tr>
              </thead>
              <tbody>
      `,t.forEach((m,B)=>{const Se=m.price.toLocaleString("pt-BR",{minimumFractionDigits:2}),Be=m.cost.toLocaleString("pt-BR",{minimumFractionDigits:2});let K=0,X="#6b7280";m.price>0&&(K=(m.price-m.cost)/m.price*100,X=K>=0?"#10b981":"#ef4444");let ce="#ef4444";m.stock>10?ce="#10b981":m.stock>0&&(ce="#f59e0b");const _=B%2===0?"#ffffff":"#f9fafb";q+=`
          <tr style="background: ${_}; border-bottom: 1px solid #e5e7eb;">
            <td style="padding: 10px; color: #374151; font-weight: 500;">${m.name}</td>
            <td style="padding: 10px; color: #6b7280;">${m.category}</td>
            <td style="padding: 10px; text-align: right; font-weight: bold; color: #10b981;">R$ ${Se}</td>
            <td style="padding: 10px; text-align: right; font-weight: bold; color: #f97316;">R$ ${Be}</td>
            <td style="padding: 10px; text-align: center; font-weight: bold; color: ${ce};">${m.stock}</td>
            <td style="padding: 10px; text-align: center; font-weight: bold; color: #3b82f6;">${m.sold}</td>
            <td style="padding: 10px; text-align: right; font-weight: bold; color: ${X};">${K.toFixed(1)}%</td>
          </tr>
        `}),q+=`
              </tbody>
            </table>
          </div>
        </div>
      `,q+=`
        <div style="text-align: center; margin-top: 40px; padding-top: 20px; border-top: 2px solid #e2e8f0;">
          <p style="color: #6b7280; font-size: 12px; margin: 0;">
            Relat√≥rio gerado automaticamente pelo sistema Alya Velas<br>
            Dados baseados em produtos ${Ye?"filtrados":"completos"}<br>
            Para mais informa√ß√µes, acesse o painel administrativo
          </p>
        </div>
      `,C.innerHTML=q,document.body.appendChild(C);const V=await St(C,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"});document.body.removeChild(C);const be=V.toDataURL("image/png"),R=new $t("p","mm","a4"),g=210,N=295,v=V.height*g/V.width;let T=v,H=0;for(R.addImage(be,"PNG",0,H,g,v),T-=N;T>=0;)H=T-v,R.addPage(),R.addImage(be,"PNG",0,H,g,v),T-=N;const oe=`Produtos_${Ye?"Filtrados":"Completos"}_${new Date().toISOString().split("T")[0]}.pdf`;R.save(oe),alert(`‚úÖ Relat√≥rio PDF exportado com sucesso!
Arquivo: ${oe}

üìä Dados inclu√≠dos:
‚Ä¢ Total de produtos: ${s}${Ge?`
‚Ä¢ Valor total do estoque: R$ ${a.toLocaleString("pt-BR",{minimumFractionDigits:2})}
‚Ä¢ Custo total do estoque: R$ ${r.toLocaleString("pt-BR",{minimumFractionDigits:2})}
‚Ä¢ Lucro potencial: R$ ${n.toLocaleString("pt-BR",{minimumFractionDigits:2})}
‚Ä¢ Margem m√©dia: ${x.toFixed(1)}%`:""}`)}catch(t){console.error("Erro ao exportar PDF:",t),alert("‚ùå Erro ao exportar PDF. Tente novamente.")}},aa=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[e.jsx(Qt,{className:"w-8 h-8 text-purple-600"}),"Produtos"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>We(!0),className:"flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-amber-500 to-orange-600 text-white font-semibold rounded-xl hover:from-amber-600 hover:to-orange-700 shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300",children:[e.jsx(De,{className:"h-5 w-5"}),"Exportar PDF"]}),e.jsxs("button",{onClick:()=>{z("products"),o(!0)},className:"flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-amber-400 to-orange-400 text-white font-semibold rounded-xl hover:from-amber-500 hover:to-orange-500 shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300",children:[e.jsx(De,{className:"h-5 w-5"}),"Importar/Exportar"]}),e.jsxs("button",{onClick:()=>Ee(!0),className:"flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-amber-400 to-orange-400 text-white font-semibold rounded-xl hover:from-amber-500 hover:to-orange-500 shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300",children:[e.jsx(Dt,{className:"h-5 w-5"}),"Novo Produto"]})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 p-4 rounded-lg border border-amber-200 shadow-sm",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-4 lg:gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ss,{className:"w-5 h-5 text-amber-600"}),e.jsx("h2",{className:"text-lg font-bold text-gray-800 uppercase tracking-wide",children:"FILTRE SEUS ITENS:"})]}),e.jsxs("div",{className:"flex items-end gap-1 sm:gap-2 md:gap-3 lg:gap-4 flex-1",children:[e.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[e.jsx("label",{className:"text-xs sm:text-sm font-semibold text-gray-700 mb-1 truncate",children:"Categoria"}),e.jsx("input",{type:"text",placeholder:"Categoria...",value:G.category,onChange:t=>Et(s=>({...s,category:t.target.value})),className:"px-1 sm:px-2 md:px-3 py-1 sm:py-2 border border-amber-300 rounded-md text-xs sm:text-sm focus:ring-2 focus:ring-amber-500 focus:border-amber-500 bg-white w-full"})]}),e.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[e.jsx("label",{className:"text-xs sm:text-sm font-semibold text-gray-700 mb-1 truncate",children:"Estoque"}),e.jsxs("select",{value:G.stockFilter,onChange:t=>Et(s=>({...s,stockFilter:t.target.value})),className:"px-1 sm:px-2 md:px-3 py-1 sm:py-2 border border-amber-300 rounded-md text-xs sm:text-sm focus:ring-2 focus:ring-amber-500 focus:border-amber-500 bg-white w-full",children:[e.jsx("option",{value:"",children:"Todos os estoques"}),e.jsx("option",{value:"inStock",children:"Em estoque"}),e.jsx("option",{value:"outOfStock",children:"Sem estoque"})]})]}),e.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[e.jsx("label",{className:"text-xs sm:text-sm font-semibold text-gray-700 mb-1 truncate",children:"Vendidos"}),e.jsxs("select",{value:G.soldFilter,onChange:t=>Et(s=>({...s,soldFilter:t.target.value})),className:"px-1 sm:px-2 md:px-3 py-1 sm:py-2 border border-amber-300 rounded-md text-xs sm:text-sm focus:ring-2 focus:ring-amber-500 focus:border-amber-500 bg-white w-full",children:[e.jsx("option",{value:"",children:"Todos os vendidos"}),e.jsx("option",{value:"sold",children:"Vendidos"}),e.jsx("option",{value:"notSold",children:"N√£o vendidos"})]})]}),e.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[e.jsx("label",{className:"text-xs sm:text-sm font-semibold text-gray-700 mb-1 truncate",children:"Pre√ßo de Custo"}),e.jsxs("select",{value:G.costFilter,onChange:t=>Et(s=>({...s,costFilter:t.target.value})),className:"px-1 sm:px-2 md:px-3 py-1 sm:py-2 border border-amber-300 rounded-md text-xs sm:text-sm focus:ring-2 focus:ring-amber-500 focus:border-amber-500 bg-white w-full",children:[e.jsx("option",{value:"",children:"Todos os custos"}),e.jsx("option",{value:"withCost",children:"Com pre√ßo de custo"}),e.jsx("option",{value:"withoutCost",children:"Sem pre√ßo de custo"})]})]})]}),e.jsx("div",{className:"lg:ml-auto",children:e.jsx("button",{onClick:Vs,className:"px-4 py-2 bg-amber-600 text-white rounded-md text-sm hover:bg-amber-700 transition-colors w-full lg:w-auto",children:"Limpar Filtros"})})]})}),e.jsx("div",{className:"space-y-4",children:O.length===0?e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-8 text-center",children:[e.jsx("p",{className:"text-gray-600",children:"Nenhum produto encontrado."}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:'Adicione seu primeiro produto clicando no bot√£o "Novo Produto".'})]}):e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-100 border-b border-amber-200 p-4",children:e.jsxs("div",{className:"flex items-center gap-0.5 sm:gap-1 md:gap-2 lg:gap-3",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("input",{type:"checkbox",checked:O.length>0&&re.size===O.length,onChange:Ms,className:"w-4 h-4 text-amber-600 bg-gray-100 border-gray-300 rounded focus:ring-amber-500 focus:ring-2"})}),e.jsxs("button",{onClick:()=>qe("name"),className:"flex items-center justify-center gap-1 hover:bg-amber-100 rounded px-1 sm:px-2 py-1 transition-colors flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-bold text-amber-800 uppercase tracking-wide",children:"Nome"}),Ve("name")]}),e.jsxs("button",{onClick:()=>qe("category"),className:"flex items-center justify-center gap-1 hover:bg-amber-100 rounded px-1 sm:px-2 py-1 transition-colors flex-shrink-0 w-20 sm:w-24",children:[e.jsx("p",{className:"text-xs sm:text-sm font-bold text-amber-800 uppercase tracking-wide truncate",children:"Categoria"}),Ve("category")]}),e.jsxs("button",{onClick:()=>qe("price"),className:"flex items-center justify-center gap-1 hover:bg-amber-100 rounded px-1 sm:px-2 py-1 transition-colors flex-shrink-0 w-20 sm:w-24",children:[e.jsx("p",{className:"text-xs sm:text-sm font-bold text-amber-800 uppercase tracking-wide",children:"Pre√ßo"}),Ve("price")]}),e.jsxs("button",{onClick:()=>qe("cost"),className:"flex items-center justify-center gap-1 hover:bg-amber-100 rounded px-1 sm:px-2 py-1 transition-colors flex-shrink-0 w-16 sm:w-20",children:[e.jsx("p",{className:"text-xs sm:text-sm font-bold text-amber-800 uppercase tracking-wide",children:"Custo"}),Ve("cost")]}),e.jsxs("button",{onClick:()=>qe("stock"),className:"flex items-center justify-center gap-1 hover:bg-amber-100 rounded px-1 sm:px-2 py-1 transition-colors flex-shrink-0 w-16 sm:w-20",children:[e.jsx("p",{className:"text-xs sm:text-sm font-bold text-amber-800 uppercase tracking-wide",children:"Estoque"}),Ve("stock")]}),e.jsxs("button",{onClick:()=>qe("sold"),className:"flex items-center justify-center gap-1 hover:bg-amber-100 rounded px-1 sm:px-2 py-1 transition-colors flex-shrink-0 w-16 sm:w-20",children:[e.jsx("p",{className:"text-xs sm:text-sm font-bold text-amber-800 uppercase tracking-wide",children:"Vendidos"}),Ve("sold")]}),e.jsx("div",{className:"flex-shrink-0 w-16 sm:w-20 flex justify-center",children:e.jsx("p",{className:"text-xs sm:text-sm font-bold text-amber-800 uppercase tracking-wide",children:"A√ß√µes"})})]})}),gs().map((t,s)=>e.jsx("div",{className:`bg-white border-b border-gray-100 p-4 hover:bg-amber-50/30 transition-all duration-200 ${s===O.length-1?"border-b-0":""}`,children:e.jsxs("div",{className:"flex items-center gap-0.5 sm:gap-1 md:gap-2 lg:gap-3",children:[e.jsx("div",{className:"flex-shrink-0 text-left",children:e.jsx("input",{type:"checkbox",checked:re.has(t.id),onChange:()=>As(t.id),className:"w-3 h-3 sm:w-4 sm:h-4 text-amber-600 bg-gray-100 border-gray-300 rounded focus:ring-amber-500 focus:ring-2"})}),e.jsx("div",{className:"flex-1 min-w-0 text-left",children:e.jsx("h3",{className:"text-xs sm:text-sm font-semibold text-gray-900 truncate",children:t.name})}),e.jsx("div",{className:"flex-shrink-0 w-20 sm:w-24 text-center",children:e.jsx("span",{className:"text-xs sm:text-sm text-gray-600 bg-gray-50 px-0.5 sm:px-1 py-0.5 rounded-md truncate",children:t.category})}),e.jsx("div",{className:"flex-shrink-0 w-20 sm:w-24 text-center",children:e.jsxs("p",{className:"text-xs sm:text-sm md:text-lg font-bold text-green-600 truncate",children:["R$ ",t.price.toLocaleString("pt-BR",{minimumFractionDigits:2})]})}),e.jsx("div",{className:"flex-shrink-0 w-16 sm:w-20 text-center",children:e.jsxs("p",{className:"text-xs sm:text-sm md:text-lg font-bold text-orange-600 truncate",children:["R$ ",t.cost.toLocaleString("pt-BR",{minimumFractionDigits:2})]})}),e.jsx("div",{className:"flex-shrink-0 w-16 sm:w-20 text-center",children:e.jsx("p",{className:`text-xs sm:text-sm md:text-lg font-bold ${t.stock>10?"text-green-600":t.stock>0?"text-yellow-600":"text-red-600"} truncate`,children:t.stock})}),e.jsx("div",{className:"flex-shrink-0 w-16 sm:w-20 text-center",children:e.jsx("p",{className:"text-xs sm:text-sm md:text-lg font-bold text-blue-600 truncate",children:t.sold})}),e.jsxs("div",{className:"flex-shrink-0 w-16 sm:w-20 flex gap-0.5 sm:gap-1 justify-center",children:[e.jsx("button",{onClick:()=>Ks(t),className:"p-0.5 sm:p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-full transition-all duration-200",title:"Editar produto",children:e.jsx(as,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3"})}),e.jsx("button",{onClick:async()=>{if(confirm("Tem certeza que deseja excluir este produto?"))try{await pe(t.id)&&ye(r=>r.filter(n=>n.id!==t.id))}catch(a){console.error("Erro ao deletar produto:",a)}},className:"p-0.5 sm:p-1 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-full transition-all duration-200",title:"Excluir produto",children:e.jsx(Ct,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3"})})]})]})},t.id)),re.size>0&&e.jsx("div",{className:"flex justify-end p-4 bg-red-50 border-t border-red-200",children:e.jsxs("button",{onClick:Bs,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:[e.jsx(Ct,{className:"h-4 w-4"}),"Deletar Selecionado",re.size>1?"s":""," (",re.size,")"]})})]})})]}),ra=()=>{ue(!0)},At=async t=>{try{ue(!1);const s=new Date,a=new Date(s);a.setDate(s.getDate()-s.getDay()),a.setHours(0,0,0,0);const r=new Date(s.getFullYear(),s.getMonth(),1),n=new Date(s.getFullYear(),Math.floor(s.getMonth()/3)*3,1),x=new Date(s.getFullYear(),0,1),c=E.filter(K=>new Date(K.date)>=a),d=E.filter(K=>new Date(K.date)>=r),u=E.filter(K=>new Date(K.date)>=n),p=E.filter(K=>new Date(K.date)>=x),C=K=>{const X={};K.forEach(_=>{_.type==="Receita"&&(X[_.category]=(X[_.category]||0)+_.value)});const ce=["#22c55e","#3b82f6","#f59e0b","#8b5cf6","#ec4899","#06b6d4"];return Object.entries(X).map(([_,Ne],j)=>({nome:_,valor:Ne,cor:ce[j%ce.length]}))},te=K=>{const X={};K.forEach(_=>{_.type==="Despesa"&&(X[_.category]=(X[_.category]||0)+_.value)});const ce=["#ef4444","#f97316","#84cc16","#f59e0b","#8b5cf6"];return Object.entries(X).map(([_,Ne],j)=>({nome:_,valor:Ne,cor:ce[j%ce.length]}))},q=K=>{const X={};K.forEach(_=>{if(_.type==="Receita"){const Ne=_.description||"Produto sem nome";X[Ne]=(X[Ne]||0)+_.value}});const ce=["#8b5cf6","#ec4899","#06b6d4","#22c55e","#3b82f6"];return Object.entries(X).sort(([,_],[,Ne])=>Ne-_).slice(0,5).map(([_,Ne],j)=>({nome:_,valor:Ne,cor:ce[j%ce.length]}))},V=[];if(t==="Todos")V.push({nome:"Semana",transacoes:c},{nome:"M√™s",transacoes:d},{nome:"Trimestre",transacoes:u},{nome:"Ano",transacoes:p});else{const K={Semana:c,M√™s:d,Trimestre:u,Ano:p};V.push({nome:t,transacoes:K[t]||[]})}if(!V.some(K=>K.transacoes.length>0)){alert("N√£o h√° dados para exportar no per√≠odo selecionado!");return}const R=document.createElement("div");R.style.position="absolute",R.style.left="-9999px",R.style.top="-9999px",R.style.width="800px",R.style.backgroundColor="white",R.style.padding="20px",R.style.fontFamily="Arial, sans-serif";let g="";g+=`
        <div style="text-align: center; margin-bottom: 40px;">
          <h1 style="color: #f59e0b; font-size: 28px; margin: 0; font-weight: bold;">ALYA VELAS</h1>
          <h2 style="color: #374151; font-size: 24px; margin: 10px 0; font-weight: bold;">Relat√≥rio Financeiro${t==="Todos"?"":" - "+t}</h2>
          <p style="color: #6b7280; font-size: 14px; margin: 0;">Gerado em ${new Date().toLocaleDateString("pt-BR")} √†s ${new Date().toLocaleTimeString("pt-BR")}</p>
        </div>
      `,V.forEach((K,X)=>{const ce=C(K.transacoes),_=q(K.transacoes),Ne=te(K.transacoes),j=ce.reduce((we,gt)=>we+gt.valor,0),ie=Ne.reduce((we,gt)=>we+gt.valor,0),je=j-ie,wt=j>0?je/j*100:0;g+=`
          <div style="margin-bottom: ${X<V.length-1?"50px":"30px"}; page-break-after: ${X<V.length-1?"always":"auto"};">
            <h3 style="color: #f59e0b; font-size: 22px; margin-bottom: 20px; border-bottom: 3px solid #f59e0b; padding-bottom: 10px;">üìä Relat√≥rio ${K.nome}</h3>
            
            <!-- Resumo Executivo -->
            <div style="margin-bottom: 30px;">
              <h4 style="color: #f59e0b; font-size: 18px; margin-bottom: 15px; border-bottom: 2px solid #f59e0b; padding-bottom: 5px;">Resumo Executivo</h4>
              <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                <div style="background: #f0fdf4; padding: 15px; border-radius: 8px; border-left: 4px solid #10b981;">
                  <div style="font-weight: bold; color: #10b981; margin-bottom: 5px;">Total Vendas</div>
                  <div style="font-size: 18px; font-weight: bold; color: #059669;">R$ ${j.toLocaleString("pt-BR",{minimumFractionDigits:2})}</div>
                </div>
                <div style="background: #fef2f2; padding: 15px; border-radius: 8px; border-left: 4px solid #ef4444;">
                  <div style="font-weight: bold; color: #ef4444; margin-bottom: 5px;">Total Despesas</div>
                  <div style="font-size: 18px; font-weight: bold; color: #dc2626;">R$ ${ie.toLocaleString("pt-BR",{minimumFractionDigits:2})}</div>
                </div>
                <div style="background: ${je>=0?"#f0fdf4":"#fef2f2"}; padding: 15px; border-radius: 8px; border-left: 4px solid ${je>=0?"#10b981":"#ef4444"};">
                  <div style="font-weight: bold; color: ${je>=0?"#10b981":"#ef4444"}; margin-bottom: 5px;">Lucro L√≠quido</div>
                  <div style="font-size: 18px; font-weight: bold; color: ${je>=0?"#059669":"#dc2626"};">R$ ${je.toLocaleString("pt-BR",{minimumFractionDigits:2})}</div>
                </div>
                <div style="background: #fffbeb; padding: 15px; border-radius: 8px; border-left: 4px solid #f59e0b;">
                  <div style="font-weight: bold; color: #f59e0b; margin-bottom: 5px;">Margem de Lucro</div>
                  <div style="font-size: 18px; font-weight: bold; color: #d97706;">${wt.toFixed(1)}%</div>
                </div>
              </div>
            </div>

            <!-- Vendas por Categoria -->
            <div style="margin-bottom: 30px;">
              <h4 style="color: #f59e0b; font-size: 18px; margin-bottom: 15px; border-bottom: 2px solid #f59e0b; padding-bottom: 5px;">üìà Vendas por Categoria</h4>
              <div style="background: #f8fafc; padding: 20px; border-radius: 8px; border: 1px solid #e2e8f0;">
                ${ce.length>0?ce.map(we=>`
                  <div style="display: flex; justify-content: space-between; padding: 10px; border-bottom: 1px solid #e2e8f0;">
                    <span style="font-weight: bold; color: #374151;">${we.nome}</span>
                    <span style="font-weight: bold; color: #10b981;">R$ ${we.valor.toLocaleString("pt-BR",{minimumFractionDigits:2})}</span>
                  </div>
                `).join(""):'<p style="color: #6b7280; text-align: center;">Nenhuma venda registrada</p>'}
                <div style="display: flex; justify-content: space-between; padding: 15px; margin-top: 10px; background: #f0fdf4; border-radius: 8px; border: 2px solid #10b981;">
                  <span style="font-weight: bold; color: #10b981; font-size: 16px;">Total</span>
                  <span style="font-weight: bold; color: #10b981; font-size: 16px;">R$ ${j.toLocaleString("pt-BR",{minimumFractionDigits:2})}</span>
                </div>
              </div>
            </div>

            <!-- Vendas por Produto (Top 5) -->
            <div style="margin-bottom: 30px;">
              <h4 style="color: #f59e0b; font-size: 18px; margin-bottom: 15px; border-bottom: 2px solid #f59e0b; padding-bottom: 5px;">üì¶ Top 5 Produtos</h4>
              <div style="background: #f8fafc; padding: 20px; border-radius: 8px; border: 1px solid #e2e8f0;">
                ${_.length>0?_.map((we,gt)=>`
                  <div style="display: flex; justify-content: space-between; padding: 10px; border-bottom: 1px solid #e2e8f0;">
                    <span style="font-weight: bold; color: #374151;">${gt+1}. ${we.nome}</span>
                    <span style="font-weight: bold; color: #3b82f6;">R$ ${we.valor.toLocaleString("pt-BR",{minimumFractionDigits:2})}</span>
                  </div>
                `).join(""):'<p style="color: #6b7280; text-align: center;">Nenhum produto vendido</p>'}
              </div>
            </div>

            <!-- Despesas por Categoria -->
            <div style="margin-bottom: 30px;">
              <h4 style="color: #f59e0b; font-size: 18px; margin-bottom: 15px; border-bottom: 2px solid #f59e0b; padding-bottom: 5px;">üí∏ Despesas por Categoria</h4>
              <div style="background: #f8fafc; padding: 20px; border-radius: 8px; border: 1px solid #e2e8f0;">
                ${Ne.length>0?Ne.map(we=>`
                  <div style="display: flex; justify-content: space-between; padding: 10px; border-bottom: 1px solid #e2e8f0;">
                    <span style="font-weight: bold; color: #374151;">${we.nome}</span>
                    <span style="font-weight: bold; color: #ef4444;">R$ ${we.valor.toLocaleString("pt-BR",{minimumFractionDigits:2})}</span>
                  </div>
                `).join(""):'<p style="color: #6b7280; text-align: center;">Nenhuma despesa registrada</p>'}
                <div style="display: flex; justify-content: space-between; padding: 15px; margin-top: 10px; background: #fef2f2; border-radius: 8px; border: 2px solid #ef4444;">
                  <span style="font-weight: bold; color: #ef4444; font-size: 16px;">Total</span>
                  <span style="font-weight: bold; color: #ef4444; font-size: 16px;">R$ ${ie.toLocaleString("pt-BR",{minimumFractionDigits:2})}</span>
                </div>
              </div>
            </div>
          </div>
        `}),g+=`
        <div style="text-align: center; margin-top: 40px; padding-top: 20px; border-top: 2px solid #e2e8f0;">
          <p style="color: #6b7280; font-size: 12px; margin: 0;">
            Relat√≥rio gerado automaticamente pelo sistema Alya Velas<br>
            Dados baseados em transa√ß√µes reais do per√≠odo<br>
            Para mais informa√ß√µes, acesse o painel administrativo
          </p>
        </div>
      `,R.innerHTML=g,document.body.appendChild(R);const N=await St(R,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"});document.body.removeChild(R);const v=N.toDataURL("image/png"),T=new $t("p","mm","a4"),H=210,oe=295,m=N.height*H/N.width;let B=m,Se=0;for(T.addImage(v,"PNG",0,Se,H,m),B-=oe;B>=0;)Se=B-m,T.addPage(),T.addImage(v,"PNG",0,Se,H,m),B-=oe;const Be=`Relatorio_${t==="Todos"?"Completo":t}_${new Date().toISOString().split("T")[0]}.pdf`;T.save(Be),alert(`‚úÖ Relat√≥rio PDF exportado com sucesso!
Arquivo: ${Be}

üìä Per√≠odo: ${t}
üìà Total de per√≠odos: ${V.length}`)}catch(s){console.error("Erro ao exportar PDF:",s),alert("‚ùå Erro ao exportar PDF. Tente novamente.")}},oa=()=>{const t=new Date,s=new Date(t);s.setDate(t.getDate()-t.getDay()),s.setHours(0,0,0,0);const a=new Date(t.getFullYear(),t.getMonth(),1),r=new Date(t.getFullYear(),Math.floor(t.getMonth()/3)*3,1),n=new Date(t.getFullYear(),0,1),x=E.filter(R=>new Date(R.date)>=s),c=E.filter(R=>new Date(R.date)>=a),d=E.filter(R=>new Date(R.date)>=r),u=E.filter(R=>new Date(R.date)>=n),p=R=>{const g={};R.forEach(v=>{v.type==="Receita"&&(g[v.category]=(g[v.category]||0)+v.value)});const N=["#22c55e","#3b82f6","#f59e0b","#8b5cf6","#ec4899","#06b6d4"];return Object.entries(g).map(([v,T],H)=>({nome:v,valor:T,cor:N[H%N.length]}))},C=R=>{const g={};R.forEach(v=>{v.type==="Despesa"&&(g[v.category]=(g[v.category]||0)+v.value)});const N=["#ef4444","#f97316","#84cc16","#f59e0b","#8b5cf6"];return Object.entries(g).map(([v,T],H)=>({nome:v,valor:T,cor:N[H%N.length]}))},te=R=>{const g={};R.forEach(v=>{if(v.type==="Receita"){const T=v.description||"Produto sem nome";g[T]=(g[T]||0)+v.value}});const N=["#8b5cf6","#ec4899","#06b6d4","#22c55e","#3b82f6"];return Object.entries(g).sort(([,v],[,T])=>T-v).slice(0,5).map(([v,T],H)=>({nome:v,valor:T,cor:N[H%N.length]}))},q=(R,g)=>{const N={};return R.forEach(v=>{if(v.type==="Receita"){const T=new Date(v.date);let H;g==="dia"?H=["Dom","Seg","Ter","Qua","Qui","Sex","S√°b"][T.getDay()]:H=`Sem ${Math.ceil(T.getDate()/7)}`,N[H]||(N[H]={});const oe=v.description||"Produto sem nome";N[H][oe]=(N[H][oe]||0)+1}}),Object.entries(N).map(([v,T])=>({nome:v,...T}))},V={semana:{vendasPorCategoria:p(x),vendasPorProduto:te(x),despesasPorCategoria:C(x),produtosPorDia:q(x,"dia")},mes:{vendasPorCategoria:p(c),vendasPorProduto:te(c),despesasPorCategoria:C(c),produtosPorSemana:q(c,"semana")},trimestre:{vendasPorCategoria:p(d),vendasPorProduto:te(d),despesasPorCategoria:C(d),produtosPorMes:q(d,"semana")},ano:{vendasPorCategoria:p(u),vendasPorProduto:te(u),despesasPorCategoria:C(u),produtosPorTrimestre:q(u,"semana")}},be=(R,g,N)=>{const v=g.vendasPorCategoria.reduce((m,B)=>m+B.valor,0),T=g.vendasPorProduto.reduce((m,B)=>m+B.valor,0),H=g.despesasPorCategoria.reduce((m,B)=>m+B.valor,0),oe=v-H;return e.jsxs("div",{className:"space-y-6 mb-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:R}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-200",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("span",{className:"text-gray-400 text-lg mr-3",children:"üìà"}),e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Vendas por Categoria"})]}),e.jsx("div",{className:"space-y-3",children:g.vendasPorCategoria.map((m,B)=>{const Se=["bg-green-100","bg-green-100","bg-green-100"],Be=["bg-green-200","bg-green-200","bg-green-200"],K=["text-green-800","text-green-800","text-green-800"],X=`vendas-categoria-${N}-${B}`;return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:`${Se[B]} p-4 rounded-xl flex justify-between items-center cursor-pointer hover:opacity-80 transition-opacity`,onClick:()=>pt(X),children:[e.jsx("span",{className:`${Be[B]} ${K[B]} font-medium px-4 py-2 rounded-lg min-w-0 flex-shrink-0`,children:m.nome}),e.jsxs("span",{className:"font-bold text-gray-500 ml-4 text-right",children:["R$ ",m.valor.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),at.includes(X)&&e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx(et,{width:"100%",height:250,children:e.jsxs(ot,{data:[{name:m.nome,valor:m.valor}],children:[e.jsx(it,{strokeDasharray:"3 3"}),e.jsx(nt,{dataKey:"name"}),e.jsx(lt,{}),e.jsx(tt,{formatter:ce=>[`R$ ${ce.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,"Valor"]}),e.jsx(He,{dataKey:"valor",fill:m.cor})]})})})]},B)})}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-green-200 p-4 rounded-xl flex justify-between items-center cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>pt(`total-vendas-categoria-${N}`),children:[e.jsx("span",{className:"bg-green-300 text-green-800 font-bold px-4 py-2 rounded-lg min-w-0 flex-shrink-0",children:"Total Vendas por Categoria"}),e.jsxs("span",{className:"font-bold text-green-800 text-lg ml-4 text-right",children:["R$ ",v.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),at.includes(`total-vendas-categoria-${N}`)&&e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx(et,{width:"100%",height:300,children:e.jsxs(ot,{data:g.vendasPorCategoria,children:[e.jsx(it,{strokeDasharray:"3 3"}),e.jsx(nt,{dataKey:"nome"}),e.jsx(lt,{}),e.jsx(tt,{formatter:m=>[`R$ ${m.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,"Valor"]}),e.jsx(He,{dataKey:"valor",fill:"#22c55e"})]})})})]})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-4",children:e.jsx("h4",{className:"text-md font-bold text-gray-700",children:"Vendas por Tipo de Produto"})}),e.jsx("div",{className:"space-y-3",children:g.vendasPorProduto.map((m,B)=>{const Se=["bg-blue-100","bg-blue-100","bg-blue-100"],Be=["bg-blue-200","bg-blue-200","bg-blue-200"],K=["text-blue-800","text-blue-800","text-blue-800"],X=`vendas-produto-${N}-${B}`;return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:`${Se[B]} p-3 rounded-lg flex justify-between items-center cursor-pointer hover:opacity-80 transition-opacity`,onClick:()=>pt(X),children:[e.jsx("span",{className:`${Be[B]} ${K[B]} font-medium text-sm px-3 py-2 rounded min-w-0 flex-shrink-0`,children:m.nome}),e.jsxs("span",{className:"font-bold text-blue-900 text-sm ml-3 text-right",children:["R$ ",m.valor.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),at.includes(X)&&e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx(et,{width:"100%",height:250,children:e.jsxs(ot,{data:[{name:m.nome,valor:m.valor}],children:[e.jsx(it,{strokeDasharray:"3 3"}),e.jsx(nt,{dataKey:"name"}),e.jsx(lt,{}),e.jsx(tt,{formatter:ce=>[`R$ ${ce.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,"Valor"]}),e.jsx(He,{dataKey:"valor",fill:m.cor})]})})})]},B)})}),e.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-blue-200 p-3 rounded-lg flex justify-between items-center cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>pt(`total-vendas-produto-${N}`),children:[e.jsx("span",{className:"bg-blue-300 text-blue-800 font-bold text-sm px-3 py-2 rounded min-w-0 flex-shrink-0",children:"Total por Produto"}),e.jsxs("span",{className:"font-bold text-blue-800 text-sm ml-3 text-right",children:["R$ ",T.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),at.includes(`total-vendas-produto-${N}`)&&e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx(et,{width:"100%",height:300,children:e.jsxs(ot,{data:g.vendasPorProduto,children:[e.jsx(it,{strokeDasharray:"3 3"}),e.jsx(nt,{dataKey:"nome"}),e.jsx(lt,{}),e.jsx(tt,{formatter:m=>[`R$ ${m.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,"Valor"]}),e.jsx(He,{dataKey:"valor",fill:"#3b82f6"})]})})})]})})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("span",{className:"text-gray-400 text-lg mr-3",children:"üí∏"}),e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Despesas por Categoria"})]}),e.jsx("div",{className:"space-y-3",children:g.despesasPorCategoria.map((m,B)=>{const Se=`despesas-categoria-${N}-${B}`;return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-orange-50 p-4 rounded-xl flex justify-between items-center cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>pt(Se),children:[e.jsx("span",{className:"bg-orange-100 text-orange-700 font-medium px-4 py-2 rounded-lg min-w-0 flex-shrink-0",children:m.nome}),e.jsxs("span",{className:"font-bold text-gray-500 ml-4 text-right",children:["R$ ",m.valor.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),at.includes(Se)&&e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx(et,{width:"100%",height:250,children:e.jsxs(ot,{data:[{name:m.nome,valor:m.valor}],children:[e.jsx(it,{strokeDasharray:"3 3"}),e.jsx(nt,{dataKey:"name"}),e.jsx(lt,{}),e.jsx(tt,{formatter:Be=>[`R$ ${Be.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,"Valor"]}),e.jsx(He,{dataKey:"valor",fill:m.cor})]})})})]},B)})}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-orange-200 p-4 rounded-xl flex justify-between items-center cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>pt(`total-despesas-${N}`),children:[e.jsx("span",{className:"bg-orange-300 text-orange-800 font-bold px-4 py-2 rounded-lg min-w-0 flex-shrink-0",children:"Total de Despesas"}),e.jsxs("span",{className:"font-bold text-orange-800 text-lg ml-4 text-right",children:["R$ ",H.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),at.includes(`total-despesas-${N}`)&&e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx(et,{width:"100%",height:300,children:e.jsxs(ot,{data:g.despesasPorCategoria,children:[e.jsx(it,{strokeDasharray:"3 3"}),e.jsx(nt,{dataKey:"nome"}),e.jsx(lt,{}),e.jsx(tt,{formatter:m=>[`R$ ${m.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,"Valor"]}),e.jsx(He,{dataKey:"valor",fill:"#f97316"})]})})})]})})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-400 text-lg mr-3",children:"üì¶"}),e.jsxs("h3",{className:"text-lg font-bold text-gray-800",children:["Produtos Vendidos por ",N==="Semana"?"Dia":N==="M√™s"?"Semana":N==="Trimestre"?"M√™s":"Trimestre"]})]}),e.jsx("button",{className:"text-blue-600 hover:text-blue-800 font-medium",onClick:()=>pt(`produtos-${N}`),children:at.includes(`produtos-${N}`)?"Ocultar Gr√°fico":"Ver Gr√°fico"})]}),at.includes(`produtos-${N}`)&&e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx(et,{width:"100%",height:300,children:e.jsxs(ot,{data:N==="Semana"?g.produtosPorDia:N==="M√™s"?g.produtosPorSemana:N==="Trimestre"?g.produtosPorMes:g.produtosPorTrimestre,children:[e.jsx(it,{strokeDasharray:"3 3"}),e.jsx(nt,{dataKey:"nome"}),e.jsx(lt,{}),e.jsx(tt,{}),e.jsx(bs,{}),e.jsx(He,{dataKey:"vela_lavanda",fill:"#8b5cf6",name:"Vela Lavanda"}),e.jsx(He,{dataKey:"vela_vanilla",fill:"#ec4899",name:"Vela Vanilla"}),e.jsx(He,{dataKey:"kit_romance",fill:"#06b6d4",name:"Kit Romance"})]})})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-6",children:["Resumo do ",N]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-xl",children:[e.jsx("p",{className:"text-sm font-bold text-green-600 mb-2",children:"Total Vendas"}),e.jsxs("p",{className:"text-xl font-bold text-green-600",children:["R$ ",v.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-xl",children:[e.jsx("p",{className:"text-sm font-bold text-red-600 mb-2",children:"Total Despesas"}),e.jsxs("p",{className:"text-xl font-bold text-red-600",children:["R$ ",H.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:`text-center p-4 rounded-xl ${oe>=0?"bg-green-50":"bg-red-50"}`,children:[e.jsx("p",{className:`text-sm font-bold mb-2 ${oe>=0?"text-green-600":"text-red-600"}`,children:"Lucro L√≠quido"}),e.jsxs("p",{className:`text-xl font-bold ${oe>=0?"text-green-600":"text-red-600"}`,children:["R$ ",oe.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsx("div",{className:`mt-2 p-2 rounded-lg ${oe>=0?"bg-green-100":"bg-red-100"}`,children:e.jsxs("p",{className:`text-xs font-bold ${oe>=0?"text-green-600":"text-red-600"}`,children:["Margem: ",(oe/v*100).toFixed(1),"%"]})})]}),e.jsxs("div",{className:`text-center p-4 rounded-xl ${oe>=0?"bg-green-50":"bg-red-50"}`,children:[e.jsx("p",{className:`text-sm font-bold mb-2 ${oe>=0?"text-green-600":"text-red-600"}`,children:"Status"}),e.jsx("div",{className:`inline-flex items-center px-3 py-2 rounded-lg ${oe>=0?"bg-green-100":"bg-red-100"}`,children:e.jsx("span",{className:`text-sm font-bold ${oe>=0?"text-green-600":"text-red-600"}`,children:oe>=0?"üìà Positivo":"üìâ Negativo"})})]})]})]})]})};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[e.jsx(dt,{className:"w-8 h-8 text-blue-600"}),"Relat√≥rios"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:ra,className:"flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-amber-500 to-orange-600 text-white font-semibold rounded-xl hover:from-amber-600 hover:to-orange-700 shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300",children:[e.jsx(De,{className:"h-5 w-5"}),"Exportar PDF"]}),e.jsxs("button",{onClick:()=>alert("Ferramenta em constru√ß√£o"),className:"flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-amber-400 to-orange-400 text-white font-semibold rounded-xl hover:from-amber-500 hover:to-orange-500 shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300",children:[e.jsx(Dt,{className:"h-5 w-5"}),"Novo Relat√≥rio"]})]})]}),be("Relat√≥rio Semanal",V.semana,"Semana"),be("Relat√≥rio Mensal",V.mes,"M√™s"),be("Relat√≥rio Trimestral",V.trimestre,"Trimestre"),be("Relat√≥rio Anual",V.ano,"Ano")]})},ia=async()=>{try{const t=rt.find(v=>v.indice===yt);if(!t){alert("M√™s selecionado n√£o encontrado!");return}const s=document.createElement("div");s.style.position="absolute",s.style.left="-9999px",s.style.top="-9999px",s.style.width="800px",s.style.backgroundColor="white",s.style.padding="20px",s.style.fontFamily="Arial, sans-serif";const a=yt,r=2025,n=E.filter(v=>{const T=new Date(v.date);return T.getMonth()===a&&T.getFullYear()===r}),x=n.filter(v=>v.type==="Receita").reduce((v,T)=>v+T.value,0),c=n.filter(v=>v.type==="Despesa").reduce((v,T)=>v+T.value,0),d=t.meta,u=x-c;s.innerHTML=`
        <div style="text-align: center; margin-bottom: 30px;">
          <h1 style="color: #f59e0b; font-size: 28px; margin: 0; font-weight: bold;">ALYA VELAS</h1>
          <h2 style="color: #374151; font-size: 24px; margin: 10px 0; font-weight: bold;">Relat√≥rio de Metas - ${t.nome} 2025</h2>
          <p style="color: #6b7280; font-size: 14px; margin: 0;">Gerado em ${new Date().toLocaleDateString("pt-BR")} √†s ${new Date().toLocaleTimeString("pt-BR")}</p>
        </div>
        
        <div style="margin-bottom: 30px;">
          <h3 style="color: #f59e0b; font-size: 20px; margin-bottom: 15px; border-bottom: 2px solid #f59e0b; padding-bottom: 5px;">üìä Resumo Executivo</h3>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div style="background: #fffbeb; padding: 15px; border-radius: 8px; border-left: 4px solid #f59e0b;">
              <div style="font-weight: bold; color: #f59e0b; margin-bottom: 5px;">Meta de Faturamento</div>
              <div style="font-size: 18px; font-weight: bold; color: #d97706;">R$ ${d.toLocaleString("pt-BR",{minimumFractionDigits:2})}</div>
            </div>
            <div style="background: #f0fdf4; padding: 15px; border-radius: 8px; border-left: 4px solid #10b981;">
              <div style="font-weight: bold; color: #10b981; margin-bottom: 5px;">Faturamento Realizado</div>
              <div style="font-size: 18px; font-weight: bold; color: #059669;">R$ ${x.toLocaleString("pt-BR",{minimumFractionDigits:2})}</div>
            </div>
            <div style="background: #fef2f2; padding: 15px; border-radius: 8px; border-left: 4px solid #ef4444;">
              <div style="font-weight: bold; color: #ef4444; margin-bottom: 5px;">Total de Despesas</div>
              <div style="font-size: 18px; font-weight: bold; color: #dc2626;">R$ ${c.toLocaleString("pt-BR",{minimumFractionDigits:2})}</div>
            </div>
            <div style="background: ${u>=0?"#f0fdf4":"#fef2f2"}; padding: 15px; border-radius: 8px; border-left: 4px solid ${u>=0?"#10b981":"#ef4444"};">
              <div style="font-weight: bold; color: ${u>=0?"#10b981":"#ef4444"}; margin-bottom: 5px;">Resultado Financeiro</div>
              <div style="font-size: 18px; font-weight: bold; color: ${u>=0?"#059669":"#dc2626"};">R$ ${u.toLocaleString("pt-BR",{minimumFractionDigits:2})}</div>
            </div>
          </div>
        </div>
        
        <div style="margin-bottom: 30px;">
          <h3 style="color: #f59e0b; font-size: 20px; margin-bottom: 15px; border-bottom: 2px solid #f59e0b; padding-bottom: 5px;">üìà An√°lise de Performance</h3>
          <div style="background: #f8fafc; padding: 20px; border-radius: 8px; border: 1px solid #e2e8f0;">
            <div style="margin-bottom: 15px;">
              <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                <span style="font-weight: bold;">Meta vs Realizado:</span>
                <span style="font-weight: bold; color: ${x>=d?"#10b981":"#ef4444"};">${x>=d?"‚úÖ Meta Atingida":"‚ùå Meta N√£o Atingida"}</span>
              </div>
              <div style="background: #e2e8f0; height: 20px; border-radius: 10px; overflow: hidden;">
                <div style="background: ${x>=d?"#10b981":"#ef4444"}; height: 100%; width: ${d>0?Math.min(x/d*100,100):0}%; transition: width 0.3s ease;"></div>
              </div>
              <div style="text-align: center; margin-top: 5px; font-size: 14px; color: #6b7280;">
                ${d>0?(x/d*100).toFixed(1):0}% da meta
              </div>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
              <div>
                <div style="font-weight: bold; color: #374151; margin-bottom: 5px;">Diferen√ßa da Meta:</div>
                <div style="font-size: 16px; color: ${x>=d?"#10b981":"#ef4444"}; font-weight: bold;">
                  R$ ${(x-d).toLocaleString("pt-BR",{minimumFractionDigits:2})}
                </div>
              </div>
              <div>
                <div style="font-weight: bold; color: #374151; margin-bottom: 5px;">Margem de Lucro:</div>
                <div style="font-size: 16px; color: ${u>=0?"#10b981":"#ef4444"}; font-weight: bold;">
                  ${x>0?(u/x*100).toFixed(1):0}%
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div style="margin-bottom: 30px;">
          <h3 style="color: #f59e0b; font-size: 20px; margin-bottom: 15px; border-bottom: 2px solid #f59e0b; padding-bottom: 5px;">üìã Dados de Transa√ß√µes Reais</h3>
          <div style="background: #f8fafc; padding: 20px; border-radius: 8px; border: 1px solid #e2e8f0;">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
              <div>
                <div style="font-weight: bold; color: #374151; margin-bottom: 5px;">Total de Transa√ß√µes:</div>
                <div style="font-size: 16px; color: #f59e0b; font-weight: bold;">${n.length} transa√ß√µes</div>
              </div>
              <div>
                <div style="font-weight: bold; color: #374151; margin-bottom: 5px;">Receitas Reais:</div>
                <div style="font-size: 16px; color: #10b981; font-weight: bold;">R$ ${x.toLocaleString("pt-BR",{minimumFractionDigits:2})}</div>
              </div>
              <div>
                <div style="font-weight: bold; color: #374151; margin-bottom: 5px;">Despesas Reais:</div>
                <div style="font-size: 16px; color: #ef4444; font-weight: bold;">R$ ${c.toLocaleString("pt-BR",{minimumFractionDigits:2})}</div>
              </div>
              <div>
                <div style="font-weight: bold; color: #374151; margin-bottom: 5px;">Meta de Faturamento:</div>
                <div style="font-size: 16px; color: #f59e0b; font-weight: bold;">R$ ${d.toLocaleString("pt-BR",{minimumFractionDigits:2})}</div>
              </div>
            </div>
          </div>
        </div>
        
        <div style="text-align: center; margin-top: 40px; padding-top: 20px; border-top: 2px solid #e2e8f0;">
          <p style="color: #6b7280; font-size: 12px; margin: 0;">
            Relat√≥rio gerado automaticamente pelo sistema Alya Velas<br>
            Dados baseados em metas e transa√ß√µes reais do m√™s<br>
            Para mais informa√ß√µes, acesse o painel administrativo
          </p>
        </div>
      `,document.body.appendChild(s);const p=await St(s,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"});document.body.removeChild(s);const C=p.toDataURL("image/png"),te=new $t("p","mm","a4"),q=210,V=295,be=p.height*q/p.width;let R=be,g=0;for(te.addImage(C,"PNG",0,g,q,be),R-=V;R>=0;)g=R-be,te.addPage(),te.addImage(C,"PNG",0,g,q,be),R-=V;const N=`Metas_${t.nome}_2025_${new Date().toISOString().split("T")[0]}.pdf`;te.save(N),alert(`‚úÖ Relat√≥rio PDF exportado com sucesso!
Arquivo: ${N}

üìä Dados inclu√≠dos:
‚Ä¢ Meta de Faturamento: R$ ${d.toLocaleString("pt-BR",{minimumFractionDigits:2})}
‚Ä¢ Faturamento Realizado: R$ ${x.toLocaleString("pt-BR",{minimumFractionDigits:2})}
‚Ä¢ Total de Despesas: R$ ${c.toLocaleString("pt-BR",{minimumFractionDigits:2})}
‚Ä¢ Resultado Financeiro: R$ ${u.toLocaleString("pt-BR",{minimumFractionDigits:2})}`)}catch(t){console.error("Erro ao exportar PDF:",t),alert("‚ùå Erro ao exportar PDF. Tente novamente.")}},na=()=>{const t=rt.find(s=>s.indice===yt);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[e.jsx($a,{className:"w-8 h-8 text-amber-600"}),"Metas"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:ia,className:"flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-amber-500 to-orange-600 text-white font-semibold rounded-xl hover:from-amber-600 hover:to-orange-700 shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300",children:[e.jsx(De,{className:"h-5 w-5"}),"Exportar PDF"]}),e.jsxs("button",{onClick:()=>alert("Ferramenta em constru√ß√£o"),className:"flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-amber-400 to-orange-400 text-white font-semibold rounded-xl hover:from-amber-500 hover:to-orange-500 shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300",children:[e.jsx(Dt,{className:"h-5 w-5"}),"Nova Meta"]})]})]}),t&&e.jsxs("div",{className:"space-y-6 mb-12",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-400 to-orange-400 p-6 rounded-2xl shadow-lg",children:e.jsx("select",{value:yt,onChange:s=>Rs(Number(s.target.value)),className:"w-full text-3xl font-bold text-white text-center uppercase tracking-wider bg-transparent border-none outline-none cursor-pointer",style:{appearance:"none",WebkitAppearance:"none",MozAppearance:"none",backgroundImage:`url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3E%3Cpath stroke='%23ffffff' stroke-linecap='round' stroke-linejoin='round' stroke-width='2.5' d='M6 8l4 4 4-4'/%3E%3C/svg%3E")`,backgroundPosition:"right 1rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.2em 1.2em",paddingRight:"3rem"},children:rt.map(s=>e.jsxs("option",{value:s.indice,className:"text-gray-800 bg-white normal-case text-lg font-normal",children:[s.nome," - 2025"]},s.indice))})}),hs(t.nome,t.indice,t.meta,31970.5)]}),Zs(),rt.map(s=>Xs(s.nome,s.indice,s.meta,31970.5))]})};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 via-orange-50 to-yellow-50",children:[e.jsxs("div",{className:"fixed top-0 left-0 right-0 z-50",children:[e.jsx("header",{className:"bg-white/95 backdrop-blur-md shadow-sm border-b border-amber-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center py-5",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:D?"/app/alya-logo.png":"/alya-logo.png",alt:"Alya Velas Logo",className:"w-10 h-10 mr-3 rounded-lg shadow-sm object-contain"}),e.jsxs("div",{className:"min-w-0 flex-shrink",children:[e.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-amber-600 to-orange-600 bg-clip-text text-transparent",children:"Alya Velas"}),e.jsx("p",{className:"text-sm text-amber-600/70 font-medium break-words",children:"Sistema de Gest√£o Financeira"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-amber-50 rounded-lg border border-amber-200",children:[e.jsx(ts,{className:"w-4 h-4 text-amber-600"}),e.jsx("span",{className:"text-sm font-medium text-amber-800",children:w?.username}),e.jsx("span",{className:"text-xs text-amber-600 bg-amber-100 px-2 py-0.5 rounded-full",children:w?.role})]}),e.jsxs("button",{onClick:S,className:"flex items-center gap-2 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors shadow-sm",title:"Sair",children:[e.jsx(ja,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Sair"})]})]})]})})}),e.jsx("nav",{className:"bg-white/90 backdrop-blur-sm shadow-sm border-b border-amber-100",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex items-center overflow-x-auto scrollbar-hide",children:e.jsx("div",{className:"flex items-center space-x-2 min-w-max",children:(()=>{const s=[{id:"dashboard",name:"Dashboard",icon:Na,key:"dashboard"},{id:"metas",name:"Metas",icon:Jt,key:"metas"},{id:"reports",name:"Relat√≥rios",icon:dt,key:"reports"},{id:"transactions",name:"Transa√ß√µes",icon:st,key:"transactions"},{id:"products",name:"Produtos",icon:Qt,key:"products"},{id:"clients",name:"Clientes",icon:ts,key:"clients"},{id:"dre",name:"DRE",icon:dt,key:"dre"}].filter(a=>!w?.modules||w.modules.length===0||w.role==="admin"?!0:w.modules.includes(a.key));return w?.role==="admin"&&s.push({id:"admin",name:"Admin",icon:Ca,key:"admin"}),s.map(a=>{const r=a.icon;return e.jsxs("button",{onClick:()=>{k(a.id),os([])},className:`flex items-center px-6 pt-6 pb-4 text-sm font-medium rounded-t-xl transition-all duration-300 whitespace-nowrap ${U===a.id?"bg-gradient-to-r from-amber-400 to-orange-400 text-white shadow-lg":"text-amber-700 hover:text-amber-900 hover:bg-amber-50 rounded-t-lg"}`,children:[e.jsx(r,{className:"h-5 w-5 mr-2"}),a.name]},a.id)})})()})})})})]}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pt-[180px]",children:[U==="dashboard"&&Qs(),U==="metas"&&na(),U==="transactions"&&ta(),U==="products"&&aa(),U==="reports"&&oa(),U==="clients"&&e.jsx(Aa,{}),U==="dre"&&e.jsx(Ba,{}),U==="admin"&&e.jsx(l.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Carregando painel administrativo..."})}),children:e.jsx(Ia,{})})]}),Pe&&e.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-amber-900/50 to-orange-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:t=>{t.target===t.currentTarget&&(Ee(!1),vt(null),Oe({name:"",category:"",price:"",cost:"",stock:"",sold:""}),Le({name:!1,category:!1,price:!1,cost:!1,stock:!1,sold:!1}))},children:e.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-2xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto shadow-2xl border border-gray-200/50",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 -mx-6 -mt-6 mb-6 px-6 py-4 border-b border-amber-200/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-bold text-amber-800 flex items-center gap-2",children:[e.jsx(Qt,{className:"w-6 h-6 text-amber-700"}),Lt?"Editar Produto":"Novo Produto"]}),e.jsx("button",{onClick:()=>{Ee(!1),vt(null),Oe({name:"",category:"",price:"",cost:"",stock:"",sold:""}),Le({name:!1,category:!1,price:!1,cost:!1,stock:!1,sold:!1})},className:"text-amber-600 hover:text-amber-800 hover:bg-amber-100 p-2 rounded-full transition-all",children:"‚úï"})]})}),e.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),!!Hs()){if(Lt)try{const s=await $e(Lt.id,{name:Z.name,category:Z.category,price:parseFloat(Z.price)||0,cost:parseFloat(Z.cost)||0,stock:parseInt(Z.stock)||0,sold:parseInt(Z.sold)||0});s&&ye(a=>a.map(r=>r.id===Lt.id?s:r))}catch(s){console.error("Erro ao atualizar produto:",s)}else try{const s=await xe({name:Z.name,category:Z.category,price:parseFloat(Z.price)||0,cost:parseFloat(Z.cost)||0,stock:parseInt(Z.stock)||0,sold:parseInt(Z.sold)||0});s&&ye(a=>[s,...a])}catch(s){console.error("Erro ao salvar produto:",s)}vt(null),Ee(!1),Oe({name:"",category:"",price:"",cost:"",stock:"",sold:""})}},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Nome do Produto ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",required:!0,value:Z.name,onChange:Nt,className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent focus:bg-white transition-all duration-200 shadow-sm ${_e.name?"bg-red-50 border-red-300 focus:ring-red-500":"bg-gray-50 border-gray-200"}`,placeholder:"Ex: Vela Arom√°tica Lavanda"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Categoria ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"category",required:!0,value:Z.category,onChange:Nt,className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent focus:bg-white transition-all duration-200 shadow-sm ${_e.category?"bg-red-50 border-red-300 focus:ring-red-500":"bg-gray-50 border-gray-200"}`,placeholder:"Ex: Velas Arom√°ticas"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Pre√ßo de Venda (R$) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",name:"price",step:"0.01",min:"0",required:!0,value:Z.price,onChange:Nt,className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent focus:bg-white transition-all duration-200 shadow-sm ${_e.price?"bg-red-50 border-red-300 focus:ring-red-500":"bg-gray-50 border-gray-200"}`,placeholder:"0,00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Custo (R$)"}),e.jsx("input",{type:"number",name:"cost",step:"0.01",min:"0",value:Z.cost,onChange:Nt,className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent focus:bg-white transition-all duration-200 shadow-sm",placeholder:"0,00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Estoque"}),e.jsx("input",{type:"number",name:"stock",min:"0",value:Z.stock,onChange:Nt,className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent focus:bg-white transition-all duration-200 shadow-sm",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Quantidade Vendida"}),e.jsx("input",{type:"number",name:"sold",min:"0",value:Z.sold,onChange:Nt,className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent focus:bg-white transition-all duration-200 shadow-sm",placeholder:"0"})]}),e.jsxs("div",{className:"flex gap-3 pt-6 border-t border-gray-200 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>{Ee(!1),vt(null),Oe({name:"",category:"",price:"",cost:"",stock:"",sold:""}),Le({name:!1,category:!1,price:!1,cost:!1,stock:!1,sold:!1})},className:"flex-1 px-6 py-3 text-gray-700 bg-gradient-to-r from-gray-100 to-gray-200 rounded-xl hover:from-gray-200 hover:to-gray-300 transition-all duration-200 font-semibold shadow-sm",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-gradient-to-r from-amber-500 to-orange-500 text-white font-semibold rounded-lg hover:from-amber-600 hover:to-orange-600 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200",children:Lt?"Atualizar":"Salvar"})]})]})]})}),ze&&e.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-amber-900/50 to-orange-900/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",onClick:t=>{t.target===t.currentTarget&&(ke(!1),Q({date:new Date().toISOString().split("T")[0],description:"",value:"",type:"Receita",category:""}),Qe({date:!1,description:!1,value:!1,type:!1,category:!1}))},children:e.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-2xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto shadow-2xl border border-gray-200/50",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 -mx-6 -mt-6 mb-6 px-6 py-4 border-b border-amber-200/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-bold text-amber-800 flex items-center gap-2",children:[e.jsx(st,{className:"w-6 h-6 text-amber-700"}),Ie?"Editar Transa√ß√£o":"Nova Transa√ß√£o"]}),e.jsx("button",{onClick:()=>{ke(!1),Je(null),Q({date:new Date().toISOString().split("T")[0],description:"",value:"",type:"Receita",category:""}),Qe({date:!1,description:!1,value:!1,type:!1,category:!1}),mt(!1)},className:"text-amber-600 hover:text-amber-800 hover:bg-amber-100 p-2 rounded-full transition-all",children:"‚úï"})]})}),e.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),!!Us()){if(Ie)try{const s=await b(Ie.id,{date:Y.date,description:Y.description,value:parseFloat(Y.value)||0,type:Y.type,category:Y.category});s&&Ce(a=>a.map(r=>r.id===Ie.id?s:r))}catch(s){console.error("Erro ao atualizar transa√ß√£o:",s)}else try{const s=await ne({date:Y.date,description:Y.description,value:parseFloat(Y.value)||0,type:Y.type,category:Y.category});s&&Ce(a=>[s,...a])}catch(s){console.error("Erro ao salvar transa√ß√£o:",s)}Je(null),Q({date:new Date().toISOString().split("T")[0],description:"",value:"",type:"Receita",category:""}),ke(!1)}},className:"space-y-5",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Data ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",name:"date",value:Y.date?Kt(Y.date):"",readOnly:!0,className:`w-full px-4 py-3 pr-12 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 focus:bg-white cursor-pointer ${Me.date?"bg-red-50 border-red-300 focus:ring-red-500":"bg-gray-100 border-gray-300"}`,placeholder:"Selecione uma data",onClick:ns,required:!0}),e.jsx("button",{type:"button",onClick:ns,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-amber-600 hover:text-amber-800 transition-colors",children:e.jsx(ht,{className:"w-5 h-5"})}),Me.date&&e.jsx("div",{className:"absolute -bottom-8 left-0 z-50",children:e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg shadow-sm flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 bg-orange-500 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"!"})}),e.jsx("span",{className:"text-gray-700 text-sm",children:"Preencha este campo."})]}),e.jsx("div",{className:"absolute -top-1 left-4 w-0 h-0 border-l-2 border-r-2 border-b-2 border-transparent border-b-gray-50"})]})})]}),ft&&_s()]}),e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Descri√ß√£o ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",name:"description",value:Y.description,onChange:Vt,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 focus:bg-white ${Me.description?"bg-red-50 border-red-300 focus:ring-red-500":"bg-gray-100 border-gray-300"}`,placeholder:"Digite a descri√ß√£o da transa√ß√£o...",required:!0}),Me.description&&e.jsx("div",{className:"absolute -bottom-8 left-0 z-50",children:e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg shadow-sm flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 bg-orange-500 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"!"})}),e.jsx("span",{className:"text-gray-700 text-sm",children:"Preencha este campo."})]}),e.jsx("div",{className:"absolute -top-1 left-4 w-0 h-0 border-l-2 border-r-2 border-b-2 border-transparent border-b-gray-50"})]})})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Valor (R$) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",name:"value",value:Y.value,onChange:Vt,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 focus:bg-white ${Me.value?"bg-red-50 border-red-300 focus:ring-red-500":"bg-gray-100 border-gray-300"}`,placeholder:"0,00",step:"0.01",min:"0",required:!0}),Me.value&&e.jsx("div",{className:"absolute -bottom-8 left-0 z-50",children:e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg shadow-sm flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 bg-orange-500 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"!"})}),e.jsx("span",{className:"text-gray-700 text-sm",children:"Preencha este campo."})]}),e.jsx("div",{className:"absolute -top-1 left-4 w-0 h-0 border-l-2 border-r-2 border-b-2 border-transparent border-b-gray-50"})]})})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Tipo ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{name:"type",value:Y.type,onChange:Vt,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 focus:bg-white ${Me.type?"bg-red-50 border-red-300 focus:ring-red-500":"bg-gray-100 border-gray-300"}`,required:!0,children:[e.jsx("option",{value:"",children:"Selecione o tipo"}),e.jsx("option",{value:"Receita",children:"Receita"}),e.jsx("option",{value:"Despesa",children:"Despesa"})]}),Me.type&&e.jsx("div",{className:"absolute -bottom-8 left-0 z-50",children:e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg shadow-sm flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 bg-orange-500 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"!"})}),e.jsx("span",{className:"text-gray-700 text-sm",children:"Preencha este campo."})]}),e.jsx("div",{className:"absolute -top-1 left-4 w-0 h-0 border-l-2 border-r-2 border-b-2 border-transparent border-b-gray-50"})]})})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Categoria ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{name:"category",value:Y.category,onChange:Vt,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 focus:bg-white ${Me.category?"bg-red-50 border-red-300 focus:ring-red-500":"bg-gray-100 border-gray-300"}`,required:!0,children:[e.jsx("option",{value:"",disabled:!0,children:"Selecione uma categoria"}),Ut(Y.type).map(t=>e.jsx("option",{value:t,children:t},t))]}),Me.category&&e.jsx("div",{className:"absolute -bottom-8 left-0 z-50",children:e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg shadow-sm flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 bg-orange-500 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"!"})}),e.jsx("span",{className:"text-gray-700 text-sm",children:"Preencha este campo."})]}),e.jsx("div",{className:"absolute -top-1 left-4 w-0 h-0 border-l-2 border-r-2 border-b-2 border-transparent border-b-gray-50"})]})})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{ke(!1),Je(null),Q({date:new Date().toISOString().split("T")[0],description:"",value:"",type:"Receita",category:""}),Qe({date:!1,description:!1,value:!1,type:!1,category:!1}),mt(!1)},className:"flex-1 px-6 py-3 bg-gray-100 text-gray-700 font-semibold rounded-lg hover:bg-gray-200 transition-all duration-200",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-gradient-to-r from-amber-500 to-orange-500 text-white font-semibold rounded-lg hover:from-amber-600 hover:to-orange-600 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200",children:Ie?"Atualizar":"Salvar"})]})]})]})}),Ke&&e.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-amber-900/50 to-orange-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:t=>{t.target===t.currentTarget&&(o(!1),f(null))},children:e.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-2xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto shadow-2xl border border-gray-200/50",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 -mx-6 -mt-6 mb-6 px-6 py-4 border-b border-amber-200/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-bold text-amber-800 flex items-center gap-2",children:[e.jsx(De,{className:"w-6 h-6 text-amber-700"}),"Importar/Exportar ",h==="transactions"?"Transa√ß√µes":"Produtos"]}),e.jsx("button",{onClick:()=>{o(!1),f(null)},className:"text-amber-600 hover:text-amber-800 hover:bg-amber-100 p-2 rounded-full transition-all",children:"‚úï"})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("p",{className:"text-gray-600 text-center",children:"Escolha uma das op√ß√µes abaixo para gerenciar seus dados:"}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(wa,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Primeiro baixe o modelo, depois importe!"})]}),e.jsx("p",{className:"text-xs text-blue-700 mb-3",children:"Baixe o arquivo modelo, preencha com seus dados e depois fa√ßa o upload."}),e.jsxs("button",{onClick:async()=>{try{console.log("Baixando modelo para:",h);const t=await fetch(`${ae}/modelo/${h}`);if(t.ok){const s=await t.blob(),a=window.URL.createObjectURL(s),r=document.createElement("a");r.href=a,r.download=`modelo-${h==="transactions"?"transacoes":"produtos"}.xlsx`,document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(a),document.body.removeChild(r),alert("Modelo baixado! Preencha o arquivo e depois importe.")}else throw new Error("Servidor offline")}catch(t){console.error("Servidor offline, criando modelo local:",t);let s="",a="";h==="transactions"?(s=`Data,Descri√ß√£o,Valor,Tipo,Categoria
`,s+=`2025-09-23,"Exemplo de venda",150.00,Entrada,Vendas
`,s+=`2025-09-23,"Exemplo de compra",75.50,Sa√≠da,Compras
`,s+='2025-09-23,"Exemplo de servi√ßo",200.00,Sa√≠da,Servi√ßos',a="modelo-transacoes.csv"):(s=`Nome,Categoria,Pre√ßo,Custo,Estoque,Vendido
`,s+=`Produto Exemplo 1,Eletr√¥nicos,299.90,150.00,25,8
`,s+=`Produto Exemplo 2,Roupas,89.90,45.00,50,15
`,s+="Produto Exemplo 3,Casa,149.90,75.00,10,3",a="modelo-produtos.csv");const r=new Blob([s],{type:"text/csv;charset=utf-8;"}),n=window.URL.createObjectURL(r),x=document.createElement("a");x.href=n,x.download=a,document.body.appendChild(x),x.click(),window.URL.revokeObjectURL(n),document.body.removeChild(x),alert("Modelo CSV criado localmente! Preencha o arquivo e importe.")}},className:"w-full px-4 py-2 bg-blue-600 text-white font-medium rounded-md hover:bg-blue-700 transition-colors duration-200 flex items-center justify-center gap-2",children:[e.jsx(De,{className:"w-4 h-4"}),"Baixar Modelo ",h==="transactions"?"de Transa√ß√µes":"de Produtos"]})]}),i?e.jsx("div",{className:"w-full p-4 bg-green-50 border-2 border-green-200 rounded-xl",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-full",children:e.jsx(Yt,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-green-800",children:"Arquivo selecionado:"}),e.jsx("div",{className:"text-sm text-green-600 truncate",children:i.name}),e.jsxs("div",{className:"text-xs text-green-500",children:["Tamanho: ",(i.size/1024).toFixed(1)," KB"]})]}),e.jsx("button",{onClick:()=>f(null),className:"p-2 text-green-600 hover:text-green-800 hover:bg-green-100 rounded-full transition-all",title:"Remover arquivo",children:"‚úï"})]})}):e.jsxs("button",{onClick:()=>{const t=document.createElement("input");t.type="file",t.accept=".xlsx",t.style.display="none",t.onchange=s=>{const a=s.target.files?.[0];a&&(a.name.toLowerCase().endsWith(".xlsx")?f(a):alert("Por favor, selecione apenas arquivos no formato .xlsx")),document.body.removeChild(t)},document.body.appendChild(t),t.click()},className:"w-full flex items-center justify-center gap-3 px-6 py-4 bg-gradient-to-r from-amber-400 to-orange-400 text-white font-semibold rounded-xl hover:from-amber-500 hover:to-orange-500 shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300",children:[e.jsx(Yt,{className:"h-6 w-6"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-bold",children:"Selecionar Arquivo"}),e.jsx("div",{className:"text-sm opacity-90",children:"Carregar arquivo .xlsx"})]})]}),e.jsxs("button",{onClick:async()=>{try{le(!0);const t=h==="transactions"?E:O;if(t.length===0){alert(`Nenhuma ${h==="transactions"?"transa√ß√£o":"produto"} encontrada para exportar!`);return}const s=await fetch(`${ae}/export`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:h,data:t})});if(s.ok){const a=await s.blob(),r=window.URL.createObjectURL(a),n=document.createElement("a");n.href=r,n.download=`${h==="transactions"?"transacoes":"produtos"}_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(r),document.body.removeChild(n),alert(`Arquivo ${h==="transactions"?"de transa√ß√µes":"de produtos"} exportado com sucesso!`)}else{const a=await s.text();console.error("Erro do servidor:",a),alert(`Erro ao exportar arquivo: ${a}`)}}catch(t){console.error("Erro ao exportar:",t),alert(`Erro ao exportar arquivo: ${t instanceof Error?t.message:"Erro desconhecido"}`)}finally{le(!1)}},className:"w-full flex items-center justify-center gap-3 px-6 py-4 bg-gradient-to-r from-amber-400 to-orange-400 text-white font-semibold rounded-xl hover:from-amber-500 hover:to-orange-500 shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300",children:[e.jsx(De,{className:"h-6 w-6"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-bold",children:"Exportar"}),e.jsx("div",{className:"text-sm opacity-90",children:"Salvar dados em arquivo"})]})]}),i&&e.jsx("button",{onClick:async()=>{le(!0);try{const t=new FormData;t.append("file",i),t.append("type",h),console.log(`Enviando arquivo: ${i.name} (${h})`);try{const s={};y&&(s.Authorization=`Bearer ${y}`);const a=await fetch(`${ae}/import`,{method:"POST",headers:s,body:t});if(a.ok){const r=await a.json();if(console.log("Resposta do servidor:",r),h==="transactions"&&r.data)for(const n of r.data)try{const x=await ne({date:n.date,description:n.description,value:n.value,type:n.type,category:n.category});x&&Ce(c=>[...c,x])}catch(x){console.error("Erro ao salvar transa√ß√£o:",x)}else if(h==="products"&&r.data)for(const n of r.data)try{const x=await xe({name:n.name,category:n.category,price:n.price,cost:n.cost,stock:n.stock,sold:n.sold});x&&ye(c=>[...c,x])}catch(x){console.error("Erro ao salvar produto:",x)}alert(`Arquivo "${i.name}" importado com sucesso!

${r.message||"Dados processados com sucesso."}`)}else{const r=await a.text();console.error("Erro do servidor:",r),alert(`Erro ao importar arquivo: ${r}`)}}catch(s){if(console.error("Erro de conex√£o com servidor:",s),console.log("Servidor n√£o dispon√≠vel, usando dados de exemplo..."),h==="transactions"){const a=[{id:(Date.now()+1).toString(),date:new Date().toISOString().split("T")[0],description:"Transa√ß√£o Importada 1",value:150,type:"Receita",category:"Vendas",createdAt:new Date},{id:(Date.now()+2).toString(),date:new Date().toISOString().split("T")[0],description:"Transa√ß√£o Importada 2",value:75,type:"Despesa",category:"Compras",createdAt:new Date}];Ce(n=>[...n,...a]),M().setItem("transactions",JSON.stringify([...E,...a])),alert(`Arquivo "${i.name}" processado localmente!

${a.length} transa√ß√µes adicionadas como exemplo.`)}else if(h==="products"){const a=[{id:(Date.now()+1).toString(),name:"Produto Importado 1",category:"Importados",price:120,cost:60,stock:15,sold:3},{id:(Date.now()+2).toString(),name:"Produto Importado 2",category:"Importados",price:80,cost:40,stock:25,sold:8}];ye(n=>[...n,...a]),M().setItem("products",JSON.stringify([...O,...a])),alert(`Arquivo "${i.name}" processado localmente!

${a.length} produtos adicionados como exemplo.`)}}}catch(t){console.error("Erro na requisi√ß√£o:",t),alert(`Erro ao enviar arquivo: ${t instanceof Error?t.message:"Erro desconhecido"}`)}finally{le(!1)}f(null),o(!1)},disabled:L,className:`w-full px-6 py-3 font-semibold rounded-lg shadow-lg transition-all duration-200 ${L?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-amber-500 to-orange-500 text-white hover:from-amber-600 hover:to-orange-600 hover:shadow-xl transform hover:-translate-y-0.5"}`,children:L?"Enviando arquivo...":"Importar Arquivo"}),e.jsx("button",{onClick:()=>{o(!1),f(null)},className:"w-full px-6 py-3 bg-gray-100 text-gray-700 font-semibold rounded-lg hover:bg-gray-200 transition-all duration-200",children:"Cancelar"})]})]})}),Re&&e.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-amber-900/50 to-orange-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:t=>{t.target===t.currentTarget&&ue(!1)},children:e.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-2xl p-6 w-full max-w-md shadow-2xl border border-gray-200/50",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 -mx-6 -mt-6 mb-6 px-6 py-4 border-b border-amber-200/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-bold text-amber-800 flex items-center gap-2",children:[e.jsx(De,{className:"w-6 h-6 text-amber-700"}),"Exportar Relat√≥rio PDF"]}),e.jsx("button",{onClick:()=>ue(!1),className:"text-amber-600 hover:text-amber-800 hover:bg-amber-100 p-2 rounded-full transition-all",children:e.jsx(kt,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-700 text-center mb-6",children:"Selecione o per√≠odo que deseja exportar:"}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("button",{onClick:()=>At("Semana"),className:"flex items-center justify-between p-4 bg-gradient-to-r from-amber-50 to-orange-50 hover:from-amber-100 hover:to-orange-100 border-2 border-amber-200 rounded-xl transition-all duration-300 transform hover:scale-105 hover:shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ht,{className:"w-5 h-5 text-amber-600"}),e.jsx("span",{className:"font-semibold text-gray-800",children:"Semana"})]}),e.jsx(ct,{className:"w-5 h-5 text-amber-600"})]}),e.jsxs("button",{onClick:()=>At("M√™s"),className:"flex items-center justify-between p-4 bg-gradient-to-r from-amber-50 to-orange-50 hover:from-amber-100 hover:to-orange-100 border-2 border-amber-200 rounded-xl transition-all duration-300 transform hover:scale-105 hover:shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ht,{className:"w-5 h-5 text-amber-600"}),e.jsx("span",{className:"font-semibold text-gray-800",children:"M√™s"})]}),e.jsx(ct,{className:"w-5 h-5 text-amber-600"})]}),e.jsxs("button",{onClick:()=>At("Trimestre"),className:"flex items-center justify-between p-4 bg-gradient-to-r from-amber-50 to-orange-50 hover:from-amber-100 hover:to-orange-100 border-2 border-amber-200 rounded-xl transition-all duration-300 transform hover:scale-105 hover:shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ht,{className:"w-5 h-5 text-amber-600"}),e.jsx("span",{className:"font-semibold text-gray-800",children:"Trimestre"})]}),e.jsx(ct,{className:"w-5 h-5 text-amber-600"})]}),e.jsxs("button",{onClick:()=>At("Ano"),className:"flex items-center justify-between p-4 bg-gradient-to-r from-amber-50 to-orange-50 hover:from-amber-100 hover:to-orange-100 border-2 border-amber-200 rounded-xl transition-all duration-300 transform hover:scale-105 hover:shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ht,{className:"w-5 h-5 text-amber-600"}),e.jsx("span",{className:"font-semibold text-gray-800",children:"Ano"})]}),e.jsx(ct,{className:"w-5 h-5 text-amber-600"})]}),e.jsxs("button",{onClick:()=>At("Todos"),className:"flex items-center justify-between p-4 bg-gradient-to-r from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 text-white border-2 border-amber-400 rounded-xl transition-all duration-300 transform hover:scale-105 hover:shadow-lg font-semibold",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(dt,{className:"w-5 h-5"}),e.jsx("span",{children:"Todos os Per√≠odos"})]}),e.jsx(ct,{className:"w-5 h-5"})]})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:()=>ue(!1),className:"w-full py-2 px-4 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-all",children:"Cancelar"})})]})]})}),Fe&&e.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-amber-900/50 to-orange-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:t=>{t.target===t.currentTarget&&ee(!1)},children:e.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-2xl p-6 w-full max-w-md shadow-2xl border border-gray-200/50",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 -mx-6 -mt-6 mb-6 px-6 py-4 border-b border-amber-200/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-bold text-amber-800 flex items-center gap-2",children:[e.jsx(De,{className:"w-6 h-6 text-amber-700"}),"Exportar Transa√ß√µes em PDF"]}),e.jsx("button",{onClick:()=>ee(!1),className:"text-amber-600 hover:text-amber-800 hover:bg-amber-100 p-2 rounded-full transition-all",children:e.jsx(kt,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("p",{className:"text-gray-700 text-sm",children:"Configure as op√ß√µes de exporta√ß√£o:"}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-amber-50 rounded-xl border border-amber-200",children:[e.jsx("input",{type:"checkbox",id:"exportarFiltradas",checked:F,onChange:t=>J(t.target.checked),className:"mt-1 w-5 h-5 text-amber-600 bg-gray-100 border-gray-300 rounded focus:ring-amber-500 focus:ring-2"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"exportarFiltradas",className:"font-semibold text-gray-800 cursor-pointer block mb-1",children:"Exportar apenas transa√ß√µes filtradas"}),e.jsx("p",{className:"text-sm text-gray-600",children:F?"Ser√£o exportadas apenas as transa√ß√µes que est√£o vis√≠veis na lista (com filtros aplicados).":"Todas as transa√ß√µes ser√£o exportadas, independente dos filtros ativos."})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-amber-50 rounded-xl border border-amber-200",children:[e.jsx("input",{type:"checkbox",id:"incluirResumo",checked:se,onChange:t=>Ae(t.target.checked),className:"mt-1 w-5 h-5 text-amber-600 bg-gray-100 border-gray-300 rounded focus:ring-amber-500 focus:ring-2"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"incluirResumo",className:"font-semibold text-gray-800 cursor-pointer block mb-1",children:"Incluir resumo financeiro"}),e.jsx("p",{className:"text-sm text-gray-600",children:se?"O PDF incluir√° um resumo com totais de receitas, despesas, saldo e quantidade de transa√ß√µes.":"Apenas a tabela de transa√ß√µes ser√° inclu√≠da no PDF."})]})]}),(A.type||A.category||A.dateFrom||A.dateTo)&&F&&e.jsxs("div",{className:"p-4 bg-blue-50 rounded-xl border border-blue-200",children:[e.jsx("p",{className:"text-sm font-semibold text-blue-800 mb-2",children:"Filtros ativos:"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[A.type&&e.jsxs("li",{children:["‚Ä¢ Tipo: ",A.type]}),A.category&&e.jsxs("li",{children:["‚Ä¢ Categoria: ",A.category]}),A.dateFrom&&e.jsxs("li",{children:["‚Ä¢ Data in√≠cio: ",new Date(A.dateFrom).toLocaleDateString("pt-BR")]}),A.dateTo&&e.jsxs("li",{children:["‚Ä¢ Data fim: ",new Date(A.dateTo).toLocaleDateString("pt-BR")]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>ee(!1),className:"flex-1 py-2 px-4 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-all font-medium",children:"Cancelar"}),e.jsx("button",{onClick:ea,className:"flex-1 py-2 px-4 bg-gradient-to-r from-amber-500 to-orange-600 text-white font-semibold rounded-lg hover:from-amber-600 hover:to-orange-700 transition-all shadow-lg hover:shadow-xl",children:"Exportar PDF"})]})]})]})}),ut&&e.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-amber-900/50 to-orange-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:t=>{t.target===t.currentTarget&&We(!1)},children:e.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-2xl p-6 w-full max-w-md shadow-2xl border border-gray-200/50",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 -mx-6 -mt-6 mb-6 px-6 py-4 border-b border-amber-200/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-bold text-amber-800 flex items-center gap-2",children:[e.jsx(De,{className:"w-6 h-6 text-amber-700"}),"Exportar Produtos em PDF"]}),e.jsx("button",{onClick:()=>We(!1),className:"text-amber-600 hover:text-amber-800 hover:bg-amber-100 p-2 rounded-full transition-all",children:e.jsx(kt,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("p",{className:"text-gray-700 text-sm",children:"Configure as op√ß√µes de exporta√ß√£o:"}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-amber-50 rounded-xl border border-amber-200",children:[e.jsx("input",{type:"checkbox",id:"exportarFiltrados",checked:Ye,onChange:t=>bt(t.target.checked),className:"mt-1 w-5 h-5 text-amber-600 bg-gray-100 border-gray-300 rounded focus:ring-amber-500 focus:ring-2"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"exportarFiltrados",className:"font-semibold text-gray-800 cursor-pointer block mb-1",children:"Exportar apenas produtos filtrados"}),e.jsx("p",{className:"text-sm text-gray-600",children:Ye?"Ser√£o exportados apenas os produtos que est√£o vis√≠veis na lista (com filtros aplicados).":"Todos os produtos ser√£o exportados, independente dos filtros ativos."})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-amber-50 rounded-xl border border-amber-200",children:[e.jsx("input",{type:"checkbox",id:"incluirResumoProdutos",checked:Ge,onChange:t=>Ft(t.target.checked),className:"mt-1 w-5 h-5 text-amber-600 bg-gray-100 border-gray-300 rounded focus:ring-amber-500 focus:ring-2"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"incluirResumoProdutos",className:"font-semibold text-gray-800 cursor-pointer block mb-1",children:"Incluir resumo estat√≠stico"}),e.jsx("p",{className:"text-sm text-gray-600",children:Ge?"O PDF incluir√° um resumo com totais de estoque, custos, lucro potencial, margem m√©dia e distribui√ß√£o por categoria.":"Apenas a tabela de produtos ser√° inclu√≠da no PDF."})]})]}),(G.category||G.stockFilter||G.soldFilter||G.costFilter)&&Ye&&e.jsxs("div",{className:"p-4 bg-blue-50 rounded-xl border border-blue-200",children:[e.jsx("p",{className:"text-sm font-semibold text-blue-800 mb-2",children:"Filtros ativos:"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[G.category&&e.jsxs("li",{children:["‚Ä¢ Categoria: ",G.category]}),G.stockFilter==="inStock"&&e.jsx("li",{children:"‚Ä¢ Em estoque"}),G.stockFilter==="outOfStock"&&e.jsx("li",{children:"‚Ä¢ Sem estoque"}),G.soldFilter==="sold"&&e.jsx("li",{children:"‚Ä¢ Vendidos"}),G.soldFilter==="notSold"&&e.jsx("li",{children:"‚Ä¢ N√£o vendidos"}),G.costFilter==="withCost"&&e.jsx("li",{children:"‚Ä¢ Com pre√ßo de custo"}),G.costFilter==="withoutCost"&&e.jsx("li",{children:"‚Ä¢ Sem pre√ßo de custo"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>We(!1),className:"flex-1 py-2 px-4 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-all font-medium",children:"Cancelar"}),e.jsx("button",{onClick:sa,className:"flex-1 py-2 px-4 bg-gradient-to-r from-amber-500 to-orange-600 text-white font-semibold rounded-lg hover:from-amber-600 hover:to-orange-700 transition-all shadow-lg hover:shadow-xl",children:"Exportar PDF"})]})]})]})}),e.jsx("footer",{className:"bg-gradient-to-r from-amber-600 to-orange-600 text-white py-8 mt-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("img",{src:D?"/app/logo_rodape.png":"/logo_rodape.png",alt:"Viver de PJ Logo",className:"h-12 w-12 mr-2 object-contain"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-base font-bold",children:"Viver de PJ"}),e.jsx("p",{className:"text-amber-100 text-sm",children:"Ecosistema de Empreendedorismo"})]})]}),e.jsxs("p",{className:"text-amber-100 text-sm",children:["Sistema de Gest√£o Financeira por Viver de PJ. A Viver de PJ √© um ecosistema completo de gest√£o e educa√ß√£o para Empreeendedores.",e.jsx("br",{}),e.jsx("br",{}),"Autor: Fernando Carvalho Gomes dos Santos 39063242816."]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Contato"}),e.jsxs("div",{className:"space-y-2 text-amber-100",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Da,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:"(11) 91611-1900"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ra,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:"vem@viverdepj.com.br"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Sa,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:"S√£o Paulo, SP"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Servi√ßos"}),e.jsxs("div",{className:"space-y-2 text-amber-100",children:[e.jsx("p",{children:"Consultoria Estrat√©gica de Neg√≥cios"}),e.jsx("p",{children:"Consultoria em Neg√≥cios"}),e.jsx("p",{children:"Sistema de Gest√£o"}),e.jsx("p",{children:"Sistema Financeiro"}),e.jsx("p",{children:"CRM"}),e.jsx("p",{children:"IA Financeira"}),e.jsx("p",{children:"IA de Atendimento"}),e.jsx("p",{children:"IA para Neg√≥cios"}),e.jsx("p",{children:"Benef√≠cios Corporativos"}),e.jsx("p",{children:"Contabilidade para Empresas"}),e.jsx("p",{children:"BPO Financeiro"})]})]})]}),e.jsx("div",{className:"border-t border-amber-500 mt-8 pt-8 text-center text-amber-100",children:e.jsx("p",{children:"¬© 2026 Viver de PJ. TODOS OS DIREITOS RESERVADOS"})})]})})]})};function Va(){return e.jsx(Ma,{children:e.jsx(qa,{})})}if(typeof window<"u"&&(window.location.hostname.includes("github.io")||window.location.hostname==="alya.fercarvalho.com"||window.location.hostname.includes("demo"))&&"serviceWorker"in navigator){const w=window.location.pathname.replace(/\/app\/.*$/,"/")||"/";navigator.serviceWorker.register(w+"sw.js",{scope:w}).then(y=>{console.log("[Main] Service Worker registrado:",y.scope),setInterval(()=>{y.update().then(()=>{console.log("[Main] Verifica√ß√£o de atualiza√ß√£o do Service Worker")})},6e4),y.addEventListener("updatefound",()=>{console.log("[Main] Nova vers√£o do Service Worker encontrada");const S=y.installing;S&&S.addEventListener("statechange",()=>{S.state==="installed"&&navigator.serviceWorker.controller&&(console.log("[Main] Nova vers√£o instalada, recarregando em 2 segundos..."),setTimeout(()=>{window.location.reload()},2e3))})})}).catch(y=>{console.warn("[Main] Falha ao registrar Service Worker:",y)})}Ea.createRoot(document.getElementById("root")).render(e.jsx(pa.StrictMode,{children:e.jsx(Va,{})}));export{ae as A,za as a,e as j,Gt as u};
